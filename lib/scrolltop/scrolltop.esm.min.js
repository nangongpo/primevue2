import{DomHandler as n}from"primevue2/utils";var e={name:"ScrollTop",scrollListener:null,data:function(){return{visible:!1}},props:{target:{type:String,default:"window"},threshold:{type:Number,default:400},icon:{type:String,default:"pi pi-chevron-up"},behavior:{type:String,default:"smooth"}},mounted:function(){"window"===this.target?this.bindDocumentScrollListener():"parent"===this.target&&this.bindParentScrollListener()},beforeDestroy:function(){"window"===this.target?this.unbindDocumentScrollListener():"parent"===this.target&&this.unbindParentScrollListener()},methods:{onClick:function(){("window"===this.target?window:this.$el.parentElement).scroll({top:0,behavior:this.behavior})},checkVisibility:function(n){this.visible=n>this.threshold},bindParentScrollListener:function(){var n=this;this.scrollListener=function(){n.checkVisibility(n.$el.parentElement.scrollTop)},this.$el.parentElement.addEventListener("scroll",this.scrollListener)},bindDocumentScrollListener:function(){var e=this;this.scrollListener=function(){e.checkVisibility(n.getWindowScrollTop())},window.addEventListener("scroll",this.scrollListener)},unbindParentScrollListener:function(){this.scrollListener&&(this.$el.parentElement.removeEventListener("scroll",this.scrollListener),this.scrollListener=null)},unbindDocumentScrollListener:function(){this.scrollListener&&(window.removeEventListener("scroll",this.scrollListener),this.scrollListener=null)},onEnter:function(){this.$refs.button.style.zIndex=String(n.generateZIndex())}},computed:{containerClass:function(){return["p-scrolltop p-link p-component",{"p-scrolltop-sticky":"window"!==this.target}]},iconClass:function(){return["p-scrolltop-icon",this.icon]}}};function t(n,e,t,i,s,o,r,l,c,a){"boolean"!=typeof r&&(c=l,l=r,r=!1);const p="function"==typeof t?t.options:t;let A;if(n&&n.render&&(p.render=n.render,p.staticRenderFns=n.staticRenderFns,p._compiled=!0,s&&(p.functional=!0)),i&&(p._scopeId=i),o?(A=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),e&&e.call(this,c(n)),n&&n._registeredComponents&&n._registeredComponents.add(o)},p._ssrRegister=A):e&&(A=r?function(n){e.call(this,a(n,this.$root.$options.shadowRoot))}:function(n){e.call(this,l(n))}),A)if(p.functional){const n=p.render;p.render=function(e,t){return A.call(t),n(e,t)}}else{const n=p.beforeCreate;p.beforeCreate=n?[].concat(n,A):[A]}return t}const i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function s(n){return(n,e)=>l(n,e)}let o;const r={};function l(n,e){const t=i?e.media||"default":n,s=r[t]||(r[t]={ids:new Set,styles:[]});if(!s.ids.has(n)){s.ids.add(n);let t=e.source;if(e.map&&(t+="\n/*# sourceURL="+e.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),s.element||(s.element=document.createElement("style"),s.element.type="text/css",e.media&&s.element.setAttribute("media",e.media),void 0===o&&(o=document.head||document.getElementsByTagName("head")[0]),o.appendChild(s.element)),"styleSheet"in s.element)s.styles.push(t),s.element.styleSheet.cssText=s.styles.filter(Boolean).join("\n");else{const n=s.ids.size-1,e=document.createTextNode(t),i=s.element.childNodes;i[n]&&s.element.removeChild(i[n]),i.length?s.element.insertBefore(e,i[n]):s.element.appendChild(e)}}}var c=e,a=function(){var n=this,e=n._self._c||n.$createElement;return e("transition",{attrs:{name:"p-scrolltop",appear:""},on:{enter:n.onEnter}},[n.visible?e("button",{ref:"button",class:n.containerClass,attrs:{type:"button"},on:{click:n.onClick}},[e("span",{class:n.iconClass})]):n._e()])};a._withStripped=!0;var p=t({render:a,staticRenderFns:[]},(function(n){n&&n("data-v-4088598b_0",{source:"\n.p-scrolltop {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.p-scrolltop-sticky {\n  position: -webkit-sticky;\n  position: sticky;\n}\n.p-scrolltop-sticky.p-link {\n  margin-left: auto;\n}\n.p-scrolltop-enter-from {\n  opacity: 0;\n}\n.p-scrolltop-enter-active {\n  -webkit-transition: opacity .15s;\n  transition: opacity .15s;\n}\n.p-scrolltop.p-scrolltop-leave-to {\n  opacity: 0;\n}\n.p-scrolltop-leave-active {\n  -webkit-transition: opacity .15s;\n  transition: opacity .15s;\n}\n",map:{version:3,sources:["/Users/nangongpo/Desktop/我的开源/primevue2/src/components/scrolltop/ScrollTop.vue"],names:[],mappings:";AAwGA;EACA,eAAA;EACA,YAAA;EACA,WAAA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,wBAAA;EAAA,+BAAA;MAAA,qBAAA;UAAA,uBAAA;AACA;AACA;EACA,wBAAA;EAAA,gBAAA;AACA;AACA;EACA,iBAAA;AACA;AACA;EACA,UAAA;AACA;AACA;EACA,gCAAA;EAAA,wBAAA;AACA;AACA;EACA,UAAA;AACA;AACA;EACA,gCAAA;EAAA,wBAAA;AACA",file:"ScrollTop.vue",sourcesContent:["<template>\n  <transition name=\"p-scrolltop\" appear @enter=\"onEnter\">\n    <button :class=\"containerClass\" v-if=\"visible\" @click=\"onClick\" type=\"button\" ref=\"button\">\n      <span :class=\"iconClass\"></span>\n    </button>\n  </transition>\n</template>\n\n<script>\nimport { DomHandler } from 'primevue2/utils'\nexport default {\n  name: 'ScrollTop',\n  scrollListener: null,\n  data() {\n    return {\n      visible: false\n    }\n  },\n  props: {\n    target: {\n      type: String,\n      default: 'window'\n    },\n    threshold: {\n      type: Number,\n      default: 400\n    },\n    icon: {\n      type: String,\n      default: 'pi pi-chevron-up'\n    },\n    behavior: {\n      type: String,\n      default: 'smooth'\n    }\n  },\n  mounted() {\n    if (this.target === 'window')\n      this.bindDocumentScrollListener()\n    else if (this.target === 'parent')\n      this.bindParentScrollListener()\n  },\n  beforeDestroy() {\n    if (this.target === 'window')\n      this.unbindDocumentScrollListener()\n    else if (this.target === 'parent')\n      this.unbindParentScrollListener()\n  },\n  methods: {\n    onClick() {\n      let scrollElement = this.target === 'window' ? window : this.$el.parentElement\n      scrollElement.scroll({\n        top: 0,\n        behavior: this.behavior\n      })\n    },\n    checkVisibility(scrollY) {\n      if (scrollY > this.threshold)\n        this.visible = true\n      else\n        this.visible = false\n    },\n    bindParentScrollListener() {\n      this.scrollListener = () => {\n        this.checkVisibility(this.$el.parentElement.scrollTop)\n      }\n\n      this.$el.parentElement.addEventListener('scroll', this.scrollListener)\n    },\n    bindDocumentScrollListener() {\n      this.scrollListener = () => {\n        this.checkVisibility(DomHandler.getWindowScrollTop())\n      }\n\n      window.addEventListener('scroll', this.scrollListener)\n    },\n    unbindParentScrollListener() {\n      if (this.scrollListener) {\n        this.$el.parentElement.removeEventListener('scroll', this.scrollListener)\n        this.scrollListener = null\n      }\n    },\n    unbindDocumentScrollListener() {\n      if (this.scrollListener) {\n        window.removeEventListener('scroll', this.scrollListener)\n        this.scrollListener = null\n      }\n    },\n    onEnter() {\n      this.$refs.button.style.zIndex = String(DomHandler.generateZIndex())\n    }\n  },\n  computed: {\n    containerClass() {\n      return ['p-scrolltop p-link p-component', { 'p-scrolltop-sticky': this.target !== 'window' }]\n    },\n    iconClass() {\n      return ['p-scrolltop-icon', this.icon]\n    }\n  }\n}\n<\/script>\n\n<style>\n.p-scrolltop {\n  position: fixed;\n  bottom: 20px;\n  right: 20px;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.p-scrolltop-sticky {\n  position: sticky;\n}\n.p-scrolltop-sticky.p-link {\n  margin-left: auto;\n}\n.p-scrolltop-enter-from {\n  opacity: 0;\n}\n.p-scrolltop-enter-active {\n  transition: opacity .15s;\n}\n.p-scrolltop.p-scrolltop-leave-to {\n  opacity: 0;\n}\n.p-scrolltop-leave-active {\n  transition: opacity .15s;\n}\n</style>\n"]},media:void 0})}),c,undefined,false,undefined,!1,s,void 0,void 0);export{p as default};
