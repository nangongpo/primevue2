"use strict";var n=require("primevue2/confirmationeventbus"),e=require("primevue2/button"),t=require("primevue2/utils");function i(n){return n&&"object"==typeof n&&"default"in n?n:{default:n}}var o=i(n),r={name:"ConfirmPopup",props:{group:String},data:function(){return{visible:!1,confirmation:null}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,container:null,mounted:function(){var n=this;o.default.on("confirm",(function(e){e&&e.group===n.group&&(n.confirmation=e,n.target=e.target,n.visible=!0)})),o.default.on("close",(function(){n.visible=!1,n.confirmation=null}))},beforeDestroy:function(){o.default.off("confirm"),o.default.off("close"),this.restoreAppend(),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.unbindResizeListener(),this.target=null,this.container=null,this.confirmation=null},methods:{accept:function(){this.confirmation.accept&&this.confirmation.accept(),this.visible=!1},reject:function(){this.confirmation.reject&&this.confirmation.reject(),this.visible=!1},onEnter:function(){this.appendContainer(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.$refs.container.style.zIndex=String(this.baseZIndex+t.DomHandler.generateZIndex())},onLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener()},alignOverlay:function(){t.DomHandler.absolutePosition(this.$refs.container,this.target);var n=t.DomHandler.getOffset(this.$refs.container),e=t.DomHandler.getOffset(this.target),i=0;n.left<e.left&&(i=e.left-n.left),this.$refs.container.style.setProperty("--overlayArrowLeft","".concat(i,"px")),n.top<e.top&&t.DomHandler.addClass(this.$refs.container,"p-confirm-popup-flipped")},bindOutsideClickListener:function(){var n=this;this.outsideClickListener||(this.outsideClickListener=function(e){n.visible&&n.$refs.container&&!n.$refs.container.contains(e.target)&&!n.isTargetClicked(e)&&(n.visible=!1)},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var n=this;this.scrollHandler||(this.scrollHandler=new t.ConnectedOverlayScrollHandler(this.target,(function(){n.visible&&(n.visible=!1)}))),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var n=this;this.resizeListener||(this.resizeListener=function(){n.visible&&(n.visible=!1)},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked:function(){return this.target&&(this.target===event.target||this.target.contains(event.target))},appendContainer:function(){document.body.append(this.$refs.container)},restoreAppend:function(){this.container&&document.body.remove(this.$refs.container)}},computed:{message:function(){return this.confirmation?this.confirmation.message:null},iconClass:function(){return["p-confirm-popup-icon",this.confirmation?this.confirmation.icon:null]},acceptLabel:function(){return this.confirmation?this.confirmation.acceptLabel||this.$primevue.config.locale.accept:null},rejectLabel:function(){return this.confirmation?this.confirmation.rejectLabel||this.$primevue.config.locale.reject:null},acceptIcon:function(){return this.confirmation?this.confirmation.acceptIcon:null},rejectIcon:function(){return this.confirmation?this.confirmation.rejectIcon:null},acceptClass:function(){return["p-confirm-popup-accept p-button-sm",this.confirmation?this.confirmation.acceptClass:null]},rejectClass:function(){return["p-confirm-popup-reject p-button-sm",this.confirmation?this.confirmation.rejectClass||"p-button-text":null]}},components:{CPButton:i(e).default}};function s(n,e,t,i,o,r,s,c,a,l){"boolean"!=typeof s&&(a=c,c=s,s=!1);const p="function"==typeof t?t.options:t;let f;if(n&&n.render&&(p.render=n.render,p.staticRenderFns=n.staticRenderFns,p._compiled=!0,o&&(p.functional=!0)),i&&(p._scopeId=i),r?(f=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),e&&e.call(this,a(n)),n&&n._registeredComponents&&n._registeredComponents.add(r)},p._ssrRegister=f):e&&(f=s?function(n){e.call(this,l(n,this.$root.$options.shadowRoot))}:function(n){e.call(this,c(n))}),f)if(p.functional){const n=p.render;p.render=function(e,t){return f.call(t),n(e,t)}}else{const n=p.beforeCreate;p.beforeCreate=n?[].concat(n,f):[f]}return t}const c="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function a(n){return(n,e)=>f(n,e)}let l;const p={};function f(n,e){const t=c?e.media||"default":n,i=p[t]||(p[t]={ids:new Set,styles:[]});if(!i.ids.has(n)){i.ids.add(n);let t=e.source;if(e.map&&(t+="\n/*# sourceURL="+e.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),void 0===l&&(l=document.head||document.getElementsByTagName("head")[0]),l.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(t),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const n=i.ids.size-1,e=document.createTextNode(t),o=i.element.childNodes;o[n]&&i.element.removeChild(o[n]),o.length?i.element.insertBefore(e,o[n]):i.element.appendChild(e)}}}var u=r,A=function(){var n=this,e=n._self._c||n.$createElement;return e("transition",{attrs:{name:"p-confirm-popup"},on:{enter:n.onEnter,leave:n.onLeave}},[n.visible?e("div",{ref:"container",staticClass:"p-confirm-popup p-component"},[n.$scopedSlots.message?n._t("message"):[e("div",{staticClass:"p-confirm-popup-content"},[e("i",{class:n.iconClass}),n._v(" "),e("span",{staticClass:"p-confirm-popup-message"},[n._v(n._s(n.confirmation.message))])])],n._v(" "),e("div",{staticClass:"p-confirm-popup-footer"},[e("CPButton",{class:n.rejectClass,attrs:{label:n.rejectLabel,icon:n.rejectIcon},on:{click:function(e){return n.reject()}}}),n._v(" "),e("CPButton",{class:n.acceptClass,attrs:{label:n.acceptLabel,icon:n.acceptIcon,autofocus:""},on:{click:function(e){return n.accept()}}})],1)],2):n._e()])};A._withStripped=!0;module.exports=s({render:A,staticRenderFns:[]},(function(n){n&&n("data-v-1c98e9a8_0",{source:'\n.p-confirm-popup {\n  position: absolute;\n  margin-top: 10px;\n}\n.p-confirm-popup-flipped {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n/* Animation */\n.p-confirm-popup-enter-from {\n  opacity: 0;\n  -webkit-transform: scaleY(0.8);\n          transform: scaleY(0.8);\n}\n.p-confirm-popup-leave-to {\n  opacity: 0;\n}\n.p-confirm-popup-enter-active {\n  -webkit-transition: opacity 0.12s cubic-bezier(0, 0, 0.2, 1), -webkit-transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n  transition: opacity 0.12s cubic-bezier(0, 0, 0.2, 1), -webkit-transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n  transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1);\n  transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1), -webkit-transform 0.12s cubic-bezier(0, 0, 0.2, 1);\n}\n.p-confirm-popup-leave-active {\n  -webkit-transition: opacity 0.1s linear;\n  transition: opacity 0.1s linear;\n}\n.p-confirm-popup:after,\n.p-confirm-popup:before {\n  bottom: 100%;\n  left: calc(var(--overlayArrowLeft, 0) + 1.25rem);\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n.p-confirm-popup:after {\n  border-width: 8px;\n  margin-left: -8px;\n}\n.p-confirm-popup:before {\n  border-width: 10px;\n  margin-left: -10px;\n}\n.p-confirm-popup-flipped:after,\n.p-confirm-popup-flipped:before {\n  bottom: auto;\n  top: 100%;\n}\n.p-confirm-popup.p-confirm-popup-flipped:after {\n  border-bottom-color: transparent;\n}\n.p-confirm-popup.p-confirm-popup-flipped:before {\n  border-bottom-color: transparent;\n}\n.p-confirm-popup .p-confirm-popup-content {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n',map:{version:3,sources:["/Users/nangongpo/Desktop/开源学习/primevue2/src/components/confirmpopup/ConfirmPopup.vue"],names:[],mappings:";AAiNA;EACA,kBAAA;EACA,gBAAA;AACA;AAEA;EACA,aAAA;EACA,mBAAA;AACA;;AAEA,cAAA;AACA;EACA,UAAA;EACA,8BAAA;UAAA,sBAAA;AACA;AAEA;EACA,UAAA;AACA;AAEA;EACA,gHAAA;EAAA,wGAAA;EAAA,gGAAA;EAAA,oJAAA;AACA;AAEA;EACA,uCAAA;EAAA,+BAAA;AACA;AAEA;;EAEA,YAAA;EACA,gDAAA;EACA,YAAA;EACA,SAAA;EACA,QAAA;EACA,kBAAA;EACA,oBAAA;AACA;AAEA;EACA,iBAAA;EACA,iBAAA;AACA;AAEA;EACA,kBAAA;EACA,kBAAA;AACA;AAEA;;EAEA,YAAA;EACA,SAAA;AACA;AAEA;EACA,gCAAA;AACA;AAEA;EACA,gCAAA;AACA;AAEA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;AACA",file:"ConfirmPopup.vue",sourcesContent:['<template>\n  <transition name="p-confirm-popup" @enter="onEnter" @leave="onLeave">\n    <div class="p-confirm-popup p-component" v-if="visible" ref="container">\n      <slot name="message" v-if="$scopedSlots.message"></slot>\n      <template v-else>\n        <div class="p-confirm-popup-content">\n          <i :class="iconClass" />\n          <span class="p-confirm-popup-message">{{ confirmation.message }}</span>\n        </div>\n      </template>\n      <div class="p-confirm-popup-footer">\n        <CPButton :label="rejectLabel" :icon="rejectIcon" :class="rejectClass" @click="reject()" />\n        <CPButton :label="acceptLabel" :icon="acceptIcon" :class="acceptClass" @click="accept()" autofocus />\n      </div>\n    </div>\n  </transition>\n</template>\n\n<script>\nimport ConfirmationEventBus from \'primevue2/confirmationeventbus\'\nimport Button from \'primevue2/button\'\nimport {ConnectedOverlayScrollHandler, DomHandler } from \'primevue2/utils\'\n\nexport default {\n  name: \'ConfirmPopup\',\n  props: {\n    group: String\n  },\n  data() {\n    return {\n      visible: false,\n      confirmation: null\n    }\n  },\n  target: null,\n  outsideClickListener: null,\n  scrollHandler: null,\n  resizeListener: null,\n  container: null,\n  mounted() {\n    ConfirmationEventBus.on(\'confirm\', (options) => {\n      if (!options) {\n        return\n      }\n\n      if (options.group === this.group) {\n        this.confirmation = options\n        this.target = options.target\n        this.visible = true\n      }\n    })\n\n    ConfirmationEventBus.on(\'close\', () => {\n      this.visible = false\n      this.confirmation = null\n    })\n  },\n  beforeDestroy() {\n    ConfirmationEventBus.off(\'confirm\')\n    ConfirmationEventBus.off(\'close\')\n\n    this.restoreAppend()\n    this.unbindOutsideClickListener()\n    if (this.scrollHandler) {\n      this.scrollHandler.destroy()\n      this.scrollHandler = null\n    }\n    this.unbindResizeListener()\n    this.target = null\n    this.container = null\n    this.confirmation = null\n  },\n  methods: {\n    accept() {\n      if (this.confirmation.accept) {\n        this.confirmation.accept()\n      }\n\n      this.visible = false\n    },\n    reject() {\n      if (this.confirmation.reject) {\n        this.confirmation.reject()\n      }\n\n      this.visible = false\n    },\n    onEnter() {\n      this.appendContainer()\n      this.alignOverlay()\n      this.bindOutsideClickListener()\n      this.bindScrollListener()\n      this.bindResizeListener()\n      this.$refs.container.style.zIndex = String(this.baseZIndex + DomHandler.generateZIndex())\n    },\n    onLeave() {\n      this.unbindOutsideClickListener()\n      this.unbindScrollListener()\n      this.unbindResizeListener()\n    },\n    alignOverlay() {\n      DomHandler.absolutePosition(this.$refs.container, this.target)\n\n      const containerOffset = DomHandler.getOffset(this.$refs.container)\n      const targetOffset = DomHandler.getOffset(this.target)\n      let arrowLeft = 0\n\n      if (containerOffset.left < targetOffset.left) {\n        arrowLeft = targetOffset.left - containerOffset.left\n      }\n      this.$refs.container.style.setProperty(\'--overlayArrowLeft\', `${arrowLeft}px`)\n\n      if (containerOffset.top < targetOffset.top) {\n        DomHandler.addClass(this.$refs.container, \'p-confirm-popup-flipped\')\n      }\n    },\n    bindOutsideClickListener() {\n      if (!this.outsideClickListener) {\n        this.outsideClickListener = (event) => {\n          if (this.visible && this.$refs.container && !this.$refs.container.contains(event.target) && !this.isTargetClicked(event)) {\n            this.visible = false\n          }\n        }\n        document.addEventListener(\'click\', this.outsideClickListener)\n      }\n    },\n    unbindOutsideClickListener() {\n      if (this.outsideClickListener) {\n        document.removeEventListener(\'click\', this.outsideClickListener)\n        this.outsideClickListener = null\n      }\n    },\n    bindScrollListener() {\n      if (!this.scrollHandler) {\n        this.scrollHandler = new ConnectedOverlayScrollHandler(this.target, () => {\n          if (this.visible) {\n            this.visible = false\n          }\n        })\n      }\n\n      this.scrollHandler.bindScrollListener()\n    },\n    unbindScrollListener() {\n      if (this.scrollHandler) {\n        this.scrollHandler.unbindScrollListener()\n      }\n    },\n    bindResizeListener() {\n      if (!this.resizeListener) {\n        this.resizeListener = () => {\n          if (this.visible) {\n            this.visible = false\n          }\n        }\n        window.addEventListener(\'resize\', this.resizeListener)\n      }\n    },\n    unbindResizeListener() {\n      if (this.resizeListener) {\n        window.removeEventListener(\'resize\', this.resizeListener)\n        this.resizeListener = null\n      }\n    },\n    isTargetClicked() {\n      return this.target && (this.target === event.target || this.target.contains(event.target))\n    },\n    appendContainer() {\n      document.body.append(this.$refs.container)\n    },\n    restoreAppend() {\n      if (this.container) {\n        document.body.remove(this.$refs.container)\n      }\n    }\n  },\n  computed: {\n    message() {\n      return this.confirmation ? this.confirmation.message : null\n    },\n    iconClass() {\n      return [\'p-confirm-popup-icon\', this.confirmation ? this.confirmation.icon : null]\n    },\n    acceptLabel() {\n      return this.confirmation ? (this.confirmation.acceptLabel || this.$primevue.config.locale.accept) : null\n    },\n    rejectLabel() {\n      return this.confirmation ? (this.confirmation.rejectLabel || this.$primevue.config.locale.reject) : null\n    },\n    acceptIcon() {\n      return this.confirmation ? this.confirmation.acceptIcon : null\n    },\n    rejectIcon() {\n      return this.confirmation ? this.confirmation.rejectIcon : null\n    },\n    acceptClass() {\n      return [\'p-confirm-popup-accept p-button-sm\', this.confirmation ? this.confirmation.acceptClass : null]\n    },\n    rejectClass() {\n      return [\'p-confirm-popup-reject p-button-sm\', this.confirmation ? (this.confirmation.rejectClass || \'p-button-text\') : null]\n    }\n  },\n  components: {\n    \'CPButton\': Button\n  }\n}\n<\/script>\n\n<style>\n.p-confirm-popup {\n  position: absolute;\n  margin-top: 10px;\n}\n\n.p-confirm-popup-flipped {\n  margin-top: 0;\n  margin-bottom: 10px;\n}\n\n/* Animation */\n.p-confirm-popup-enter-from {\n  opacity: 0;\n  transform: scaleY(0.8);\n}\n\n.p-confirm-popup-leave-to {\n  opacity: 0;\n}\n\n.p-confirm-popup-enter-active {\n  transition: transform 0.12s cubic-bezier(0, 0, 0.2, 1), opacity 0.12s cubic-bezier(0, 0, 0.2, 1);\n}\n\n.p-confirm-popup-leave-active {\n  transition: opacity 0.1s linear;\n}\n\n.p-confirm-popup:after,\n.p-confirm-popup:before {\n  bottom: 100%;\n  left: calc(var(--overlayArrowLeft, 0) + 1.25rem);\n  content: " ";\n  height: 0;\n  width: 0;\n  position: absolute;\n  pointer-events: none;\n}\n\n.p-confirm-popup:after {\n  border-width: 8px;\n  margin-left: -8px;\n}\n\n.p-confirm-popup:before {\n  border-width: 10px;\n  margin-left: -10px;\n}\n\n.p-confirm-popup-flipped:after,\n.p-confirm-popup-flipped:before {\n  bottom: auto;\n  top: 100%;\n}\n\n.p-confirm-popup.p-confirm-popup-flipped:after {\n  border-bottom-color: transparent;\n}\n\n.p-confirm-popup.p-confirm-popup-flipped:before {\n  border-bottom-color: transparent;\n}\n\n.p-confirm-popup .p-confirm-popup-content {\n  display: flex;\n  align-items: center;\n}\n</style>\n']},media:void 0})}),u,undefined,false,undefined,!1,a,void 0,void 0);
