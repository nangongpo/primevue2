"use strict";var e=require("primevue2/utils"),n=require("primevue2/button"),t=require("primevue2/ripple");function i(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function l(e){return l="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l(e)}function s(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);n&&(i=i.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,i)}return t}function o(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?s(Object(t),!0).forEach((function(n){r(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):s(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function r(e,n,t){var i;return(n="symbol"==l(i=a(n,"string"))?i:i+"")in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){if("object"!=l(e)||!e)return e;var t=e[Symbol.toPrimitive];if(void 0!==t){var i=t.call(e,n||"default");if("object"!=l(i))return i;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===n?String:Number)(e)}function u(e,n){var t="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!t){if(Array.isArray(e)||(t=d(e))||n&&e&&"number"==typeof e.length){t&&(e=t);var i=0,l=function(){};return{s:l,n:function(){return i>=e.length?{done:!0}:{done:!1,value:e[i++]}},e:function(e){throw e},f:l}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var s,o=!0,r=!1;return{s:function(){t=t.call(e)},n:function(){var e=t.next();return o=e.done,e},e:function(e){r=!0,s=e},f:function(){try{o||null==t.return||t.return()}finally{if(r)throw s}}}}function p(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function d(e,n){if(e){if("string"==typeof e)return A(e,n);var t=Object.prototype.toString.call(e).slice(8,-1);return"Object"===t&&e.constructor&&(t=e.constructor.name),"Map"===t||"Set"===t?Array.from(e):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?A(e,n):void 0}}function h(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function c(e){if(Array.isArray(e))return A(e)}function A(e,n){(null==n||n>e.length)&&(n=e.length);for(var t=0,i=new Array(n);t<n;t++)i[t]=e[t];return i}var m={name:"AutoComplete",inheritAttrs:!1,props:{value:null,suggestions:{type:Array,default:null},field:{type:[String,Function],default:null},scrollHeight:{type:String,default:"200px"},dropdown:{type:Boolean,default:!1},dropdownMode:{type:String,default:"blank"},multiple:{type:Boolean,default:!1},minLength:{type:Number,default:1},delay:{type:Number,default:300},ariaLabelledBy:{type:String,default:null},appendTo:{type:String,default:null},forceSelection:{type:Boolean,default:!1},autoHighlight:{type:Boolean,default:!1}},timeout:null,outsideClickListener:null,resizeListener:null,scrollHandler:null,data:function(){return{searching:!1,focused:!1,overlayVisible:!1,inputTextValue:null}},watch:{suggestions:function(){this.searching&&(this.suggestions&&this.suggestions.length?this.showOverlay():this.hideOverlay(),this.searching=!1)}},beforeDestroy:function(){this.restoreAppend(),this.unbindOutsideClickListener(),this.unbindResizeListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null)},updated:function(){this.overlayVisible&&this.alignOverlay()},methods:{onOverlayEnter:function(){this.$refs.overlay.style.zIndex=String(e.DomHandler.generateZIndex()),this.appendContainer(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindScrollListener(),this.bindResizeListener(),this.autoHighlight&&this.suggestions&&this.suggestions.length&&e.DomHandler.addClass(this.$refs.overlay.firstElementChild.firstElementChild,"p-highlight")},onOverlayLeave:function(){this.unbindOutsideClickListener(),this.unbindScrollListener(),this.unbindResizeListener()},alignOverlay:function(){var n=this.multiple?this.$refs.multiContainer:this.$refs.input;this.appendTo?e.DomHandler.absolutePosition(this.$refs.overlay,n):e.DomHandler.relativePosition(this.$refs.overlay,n)},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.overlayVisible&&e.$refs.overlay&&e.isOutsideClicked(n)&&e.hideOverlay()},document.addEventListener("click",this.outsideClickListener))},bindScrollListener:function(){var n=this;this.scrollHandler||(this.scrollHandler=new e.ConnectedOverlayScrollHandler(this.$el,(function(){n.overlayVisible&&n.hideOverlay()}))),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.overlayVisible&&e.hideOverlay()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isOutsideClicked:function(e){return!this.$refs.overlay.contains(e.target)&&!this.isInputClicked(e)&&!this.isDropdownClicked(e)},isInputClicked:function(e){return this.multiple?e.target===this.$refs.multiContainer||this.$refs.multiContainer.contains(e.target):e.target===this.$refs.input},isDropdownClicked:function(e){return!!this.$refs.dropdownButton&&(e.target===this.$refs.dropdownButton||this.$refs.dropdownButton.$el.contains(e.target))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},selectItem:function(e,n){if(this.multiple){if(this.$refs.input.value="",this.inputTextValue="",!this.isSelected(n)){var t=this.value?[].concat(c(i=this.value)||h(i)||d(i)||p(),[n]):[n];this.$emit("input",t)}}else this.$emit("input",n);var i;this.$emit("item-select",{originalEvent:e,value:n}),this.focus(),this.hideOverlay()},onMultiContainerClick:function(){this.focus()},removeItem:function(e,n){var t=this.value[n],i=this.value.filter((function(e,t){return n!==t}));this.$emit("input",i),this.$emit("item-unselect",{originalEvent:e,value:t})},onDropdownClick:function(e){this.focus();var n=this.$refs.input.value;"blank"===this.dropdownMode?this.search(e,"","dropdown"):"current"===this.dropdownMode&&this.search(e,n,"dropdown"),this.$emit("dropdown-click",{originalEvent:e,query:n})},getItemContent:function(n){return this.field?e.ObjectUtils.resolveFieldData(n,this.field):n},showOverlay:function(){this.overlayVisible=!0},hideOverlay:function(){this.overlayVisible=!1},focus:function(){this.$refs.input.focus()},search:function(e,n,t){null!=n&&("input"===t&&0===n.trim().length||(this.searching=!0,this.$emit("complete",{originalEvent:e,query:n})))},onInput:function(e){var n=this;this.inputTextValue=e.target.value,this.timeout&&clearTimeout(this.timeout);var t=e.target.value;this.multiple||this.$emit("input",t),0===t.length?(this.hideOverlay(),this.$emit("clear")):t.length>=this.minLength?this.timeout=setTimeout((function(){n.search(e,t,"input")}),this.delay):this.hideOverlay()},onFocus:function(e){this.focused=!0,this.$emit("focus",e)},onBlur:function(e){this.focused=!1,this.$emit("blur",e)},onKeyDown:function(n){if(this.overlayVisible){var t=e.DomHandler.findSingle(this.$refs.overlay,"li.p-highlight");switch(n.which){case 40:if(t){var i=t.nextElementSibling;i&&(e.DomHandler.addClass(i,"p-highlight"),e.DomHandler.removeClass(t,"p-highlight"),e.DomHandler.scrollInView(this.$refs.overlay,i))}else e.DomHandler.addClass(this.$refs.overlay.firstChild.firstElementChild,"p-highlight");n.preventDefault();break;case 38:if(t){var l=t.previousElementSibling;l&&(e.DomHandler.addClass(l,"p-highlight"),e.DomHandler.removeClass(t,"p-highlight"),e.DomHandler.scrollInView(this.$refs.overlay,l))}n.preventDefault();break;case 13:t&&(this.selectItem(n,this.suggestions[e.DomHandler.index(t)]),this.hideOverlay()),n.preventDefault();break;case 27:this.hideOverlay(),n.preventDefault();break;case 9:t&&this.selectItem(n,this.suggestions[e.DomHandler.index(t)]),this.hideOverlay()}}if(this.multiple&&8===n.which)if(this.value&&this.value.length&&!this.$refs.input.value){var s=this.value[this.value.length-1],o=this.value.slice(0,-1);this.$emit("input",o),this.$emit("item-unselect",{originalEvent:n,value:s})}},onChange:function(n){if(this.forceSelection){var t=!1,i=n.target.value.trim();if(this.suggestions){var l,s=u(this.suggestions);try{for(s.s();!(l=s.n()).done;){var o=l.value,r=this.field?e.ObjectUtils.resolveFieldData(o,this.field):o;if(r&&i===r.trim()){t=!0,this.selectItem(n,o);break}}}catch(e){s.e(e)}finally{s.f()}}t||(this.$refs.input.value="",this.inputTextValue="",this.$emit("clear"),this.multiple||this.$emit("input",null))}},isSelected:function(n){var t=!1;if(this.value&&this.value.length)for(var i=0;i<this.value.length;i++)if(e.ObjectUtils.equals(this.value[i],n)){t=!0;break}return t},appendContainer:function(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.$refs.overlay):document.getElementById(this.appendTo).appendChild(this.$refs.overlay))},restoreAppend:function(){this.$refs.overlay&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.$refs.overlay):document.getElementById(this.appendTo).removeChild(this.$refs.overlay))}},computed:{listeners:function(){return o(o({},this.$listeners),{},{input:this.onInput,focus:this.onFocus,blur:this.onBlur,keydown:this.onKeyDown,change:this.onChange})},containerClass:function(){return["p-autocomplete p-component p-inputwrapper",{"p-autocomplete-dd":this.dropdown,"p-autocomplete-multiple":this.multiple,"p-inputwrapper-filled":this.value||this.inputTextValue&&this.inputTextValue.length,"p-inputwrapper-focus":this.focused}]},inputClass:function(){return["p-autocomplete-input p-inputtext p-component",{"p-autocomplete-dd-input":this.dropdown,"p-disabled":this.$attrs.disabled}]},multiContainerClass:function(){return["p-autocomplete-multiple-container p-component p-inputtext",{"p-disabled":this.$attrs.disabled,"p-focus":this.focused}]},inputValue:function(){if(this.value){if(this.field&&"object"===l(this.value)){var n=e.ObjectUtils.resolveFieldData(this.value,this.field);return null!=n?n:this.value}return this.value}return""},listId:function(){return e.UniqueComponentId()+"_list"}},components:{Button:i(n).default},directives:{ripple:i(t).default}};function f(e,n,t,i,l,s,o,r,a,u){"boolean"!=typeof o&&(a=r,r=o,o=!1);const p="function"==typeof t?t.options:t;let d;if(e&&e.render&&(p.render=e.render,p.staticRenderFns=e.staticRenderFns,p._compiled=!0,l&&(p.functional=!0)),i&&(p._scopeId=i),s?(d=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(s)},p._ssrRegister=d):n&&(d=o?function(e){n.call(this,u(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,r(e))}),d)if(p.functional){const e=p.render;p.render=function(n,t){return d.call(t),e(n,t)}}else{const e=p.beforeCreate;p.beforeCreate=e?[].concat(e,d):[d]}return t}const v="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function y(e){return(e,n)=>C(e,n)}let g;const b={};function C(e,n){const t=v?n.media||"default":e,i=b[t]||(b[t]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let t=n.source;if(n.map&&(t+="\n/*# sourceURL="+n.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",n.media&&i.element.setAttribute("media",n.media),void 0===g&&(g=document.head||document.getElementsByTagName("head")[0]),g.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(t),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,n=document.createTextNode(t),l=i.element.childNodes;l[e]&&i.element.removeChild(l[e]),l.length?i.element.insertBefore(n,l[e]):i.element.appendChild(n)}}}var w=m,E=function(){var e=this,n=e._self._c||e.$createElement;return n("span",{class:e.containerClass,attrs:{"aria-haspopup":"listbox","aria-owns":e.listId,"aria-expanded":e.overlayVisible}},[e.multiple?e._e():n("input",e._g(e._b({ref:"input",class:e.inputClass,attrs:{type:"text",autoComplete:"off",role:"searchbox","aria-autocomplete":"list","aria-controls":e.listId,"aria-labelledby":e.ariaLabelledBy},domProps:{value:e.inputValue}},"input",e.$attrs,!1),e.listeners)),e._v(" "),e.multiple?n("ul",{ref:"multiContainer",class:e.multiContainerClass,on:{click:e.onMultiContainerClick}},[e._l(e.value,(function(t,i){return n("li",{key:i,staticClass:"p-autocomplete-token"},[n("span",{staticClass:"p-autocomplete-token-label"},[e._v(e._s(e.getItemContent(t)))]),e._v(" "),n("span",{staticClass:"p-autocomplete-token-icon pi pi-times-circle",on:{click:function(n){return e.removeItem(n,i)}}})])})),e._v(" "),n("li",{staticClass:"p-autocomplete-input-token"},[n("input",e._g(e._b({ref:"input",attrs:{type:"text",autoComplete:"off",role:"searchbox","aria-autocomplete":"list","aria-controls":e.listId,"aria-labelledby":e.ariaLabelledBy}},"input",e.$attrs,!1),e.listeners))])],2):e._e(),e._v(" "),e.searching?n("i",{staticClass:"p-autocomplete-loader pi pi-spinner pi-spin"}):e._e(),e._v(" "),e.dropdown?n("Button",{ref:"dropdownButton",staticClass:"p-autocomplete-dropdown",attrs:{type:"button",icon:"pi pi-chevron-down",disabled:e.$attrs.disabled},on:{click:e.onDropdownClick}}):e._e(),e._v(" "),n("transition",{attrs:{name:"p-connected-overlay"},on:{enter:e.onOverlayEnter,leave:e.onOverlayLeave}},[e.overlayVisible?n("div",{ref:"overlay",staticClass:"p-autocomplete-panel p-component",style:{"max-height":e.scrollHeight}},[n("ul",{staticClass:"p-autocomplete-items",attrs:{id:e.listId,role:"listbox"}},e._l(e.suggestions,(function(t,i){return n("li",{directives:[{name:"ripple",rawName:"v-ripple"}],key:i,staticClass:"p-autocomplete-item",attrs:{role:"option"},on:{click:function(n){return e.selectItem(n,t)}}},[e._t("item",(function(){return[e._v("\n              "+e._s(e.getItemContent(t))+"\n            ")]}),{item:t,index:i})],2)})),0)]):e._e()])],1)};E._withStripped=!0;module.exports=f({render:E,staticRenderFns:[]},(function(e){e&&e("data-v-772cde54_0",{source:"\n.p-autocomplete {\n  display: -webkit-inline-box;\n  display: -webkit-inline-flex;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  position: relative;\n}\n.p-autocomplete-loader {\n  position: absolute;\n  top: 50%;\n  margin-top: -0.5rem;\n}\n.p-autocomplete-dd .p-autocomplete-input {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1 1 auto;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n  width: 1%;\n}\n.p-autocomplete-dd .p-autocomplete-input,\n.p-autocomplete-dd .p-autocomplete-multiple-container {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n.p-autocomplete-dd .p-autocomplete-dropdown {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0px;\n}\n.p-autocomplete .p-autocomplete-panel {\n  min-width: 100%;\n}\n.p-autocomplete-panel {\n  position: absolute;\n  overflow: auto;\n}\n.p-autocomplete-items {\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n}\n.p-autocomplete-item {\n  cursor: pointer;\n  white-space: nowrap;\n  position: relative;\n  overflow: hidden;\n}\n.p-autocomplete-multiple-container {\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  cursor: text;\n  overflow: hidden;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.p-autocomplete-token {\n  cursor: default;\n  display: -webkit-inline-box;\n  display: -webkit-inline-flex;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-flex: 0;\n  -webkit-flex: 0 0 auto;\n      -ms-flex: 0 0 auto;\n          flex: 0 0 auto;\n}\n.p-autocomplete-token-icon {\n  cursor: pointer;\n}\n.p-autocomplete-input-token {\n  -webkit-box-flex: 1;\n  -webkit-flex: 1 1 auto;\n      -ms-flex: 1 1 auto;\n          flex: 1 1 auto;\n  display: -webkit-inline-box;\n  display: -webkit-inline-flex;\n  display: -ms-inline-flexbox;\n  display: inline-flex;\n}\n.p-autocomplete-input-token input {\n  border: 0 none;\n  outline: 0 none;\n  background-color: transparent;\n  margin: 0;\n  padding: 0;\n  -webkit-box-shadow: none;\n          box-shadow: none;\n  border-radius: 0;\n  width: 100%;\n}\n.p-fluid .p-autocomplete {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.p-fluid .p-autocomplete-dd .p-autocomplete-input {\n  width: 1%;\n}\n",map:{version:3,sources:["/Users/nangongpo/Desktop/开源学习/primevue2/src/components/autocomplete/AutoComplete.vue"],names:[],mappings:";AAmjBA;EACA,2BAAA;EAAA,4BAAA;EAAA,2BAAA;EAAA,oBAAA;EACA,kBAAA;AACA;AAEA;EACA,kBAAA;EACA,QAAA;EACA,mBAAA;AACA;AAEA;EACA,mBAAA;EAAA,sBAAA;MAAA,kBAAA;UAAA,cAAA;EACA,SAAA;AACA;AAEA;;EAEA,0BAAA;EACA,6BAAA;AACA;AAEA;EACA,yBAAA;EACA,8BAAA;AACA;AAEA;EACA,eAAA;AACA;AAEA;EACA,kBAAA;EACA,cAAA;AACA;AAEA;EACA,SAAA;EACA,UAAA;EACA,qBAAA;AACA;AAEA;EACA,eAAA;EACA,mBAAA;EACA,kBAAA;EACA,gBAAA;AACA;AAEA;EACA,SAAA;EACA,UAAA;EACA,qBAAA;EACA,YAAA;EACA,gBAAA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;AACA;AAEA;EACA,eAAA;EACA,2BAAA;EAAA,4BAAA;EAAA,2BAAA;EAAA,oBAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,mBAAA;EAAA,sBAAA;MAAA,kBAAA;UAAA,cAAA;AACA;AAEA;EACA,eAAA;AACA;AAEA;EACA,mBAAA;EAAA,sBAAA;MAAA,kBAAA;UAAA,cAAA;EACA,2BAAA;EAAA,4BAAA;EAAA,2BAAA;EAAA,oBAAA;AACA;AAEA;EACA,cAAA;EACA,eAAA;EACA,6BAAA;EACA,SAAA;EACA,UAAA;EACA,wBAAA;UAAA,gBAAA;EACA,gBAAA;EACA,WAAA;AACA;AAEA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;AACA;AAEA;EACA,SAAA;AACA",file:"AutoComplete.vue",sourcesContent:['<template>\n  <span :class="containerClass" aria-haspopup="listbox" :aria-owns="listId" :aria-expanded="overlayVisible">\n    <input\n      ref="input"\n      :class="inputClass"\n      v-bind="$attrs"\n      v-on="listeners"\n      :value="inputValue"\n      type="text"\n      autoComplete="off"\n      v-if="!multiple"\n      role="searchbox"\n      aria-autocomplete="list"\n      :aria-controls="listId"\n      :aria-labelledby="ariaLabelledBy" />\n    <ul ref="multiContainer" :class="multiContainerClass" v-if="multiple" @click="onMultiContainerClick">\n      <li v-for="(item, i) of value" :key="i" class="p-autocomplete-token">\n        <span class="p-autocomplete-token-label">{{ getItemContent(item) }}</span>\n        <span class="p-autocomplete-token-icon pi pi-times-circle" @click="removeItem($event, i)"></span>\n      </li>\n      <li class="p-autocomplete-input-token">\n        <input\n          ref="input"\n          type="text"\n          autoComplete="off"\n          v-bind="$attrs"\n          v-on="listeners"\n          role="searchbox"\n          aria-autocomplete="list"\n          :aria-controls="listId"\n          :aria-labelledby="ariaLabelledBy" />\n      </li>\n    </ul>\n    <i class="p-autocomplete-loader pi pi-spinner pi-spin" v-if="searching"></i>\n    <Button\n      ref="dropdownButton"\n      type="button"\n      icon="pi pi-chevron-down"\n      class="p-autocomplete-dropdown"\n      :disabled="$attrs.disabled"\n      @click="onDropdownClick"\n      v-if="dropdown" />\n    <transition name="p-connected-overlay" @enter="onOverlayEnter" @leave="onOverlayLeave">\n      <div\n        ref="overlay"\n        class="p-autocomplete-panel p-component"\n        :style="{ \'max-height\': scrollHeight }"\n        v-if="overlayVisible">\n        <ul :id="listId" class="p-autocomplete-items" role="listbox">\n          <li\n            v-for="(item, i) of suggestions"\n            class="p-autocomplete-item"\n            :key="i"\n            @click="selectItem($event, item)"\n            role="option"\n            v-ripple>\n            <slot name="item" :item="item" :index="i">\n              {{ getItemContent(item) }}\n            </slot>\n          </li>\n        </ul>\n      </div>\n    </transition>\n  </span>\n</template>\n\n<script>\nimport { ConnectedOverlayScrollHandler, ObjectUtils, DomHandler, UniqueComponentId } from \'primevue2/utils\'\nimport Button from \'primevue2/button\'\nimport Ripple from \'primevue2/ripple\'\n\nexport default {\n  name: \'AutoComplete\',\n  inheritAttrs: false,\n  props: {\n    value: null,\n    suggestions: {\n      type: Array,\n      default: null\n    },\n    field: {\n      type: [String, Function],\n      default: null\n    },\n    scrollHeight: {\n      type: String,\n      default: \'200px\'\n    },\n    dropdown: {\n      type: Boolean,\n      default: false\n    },\n    dropdownMode: {\n      type: String,\n      default: \'blank\'\n    },\n    multiple: {\n      type: Boolean,\n      default: false\n    },\n    minLength: {\n      type: Number,\n      default: 1\n    },\n    delay: {\n      type: Number,\n      default: 300\n    },\n    ariaLabelledBy: {\n      type: String,\n      default: null\n    },\n    appendTo: {\n      type: String,\n      default: null\n    },\n    forceSelection: {\n      type: Boolean,\n      default: false\n    },\n    autoHighlight: {\n      type: Boolean,\n      default: false\n    }\n  },\n  timeout: null,\n  outsideClickListener: null,\n  resizeListener: null,\n  scrollHandler: null,\n  data() {\n    return {\n      searching: false,\n      focused: false,\n      overlayVisible: false,\n      inputTextValue: null\n    }\n  },\n  watch: {\n    suggestions() {\n      if (this.searching) {\n\n        if (this.suggestions && this.suggestions.length)\n          this.showOverlay()\n        else\n          this.hideOverlay()\n\n        this.searching = false\n      }\n    }\n  },\n  beforeDestroy() {\n    this.restoreAppend()\n    this.unbindOutsideClickListener()\n    this.unbindResizeListener()\n\n    if (this.scrollHandler) {\n      this.scrollHandler.destroy()\n      this.scrollHandler = null\n    }\n  },\n  updated() {\n    if (this.overlayVisible) {\n      this.alignOverlay()\n    }\n  },\n  methods: {\n    onOverlayEnter() {\n      this.$refs.overlay.style.zIndex = String(DomHandler.generateZIndex())\n      this.appendContainer()\n      this.alignOverlay()\n      this.bindOutsideClickListener()\n      this.bindScrollListener()\n      this.bindResizeListener()\n\n      if (this.autoHighlight && this.suggestions && this.suggestions.length) {\n        DomHandler.addClass(this.$refs.overlay.firstElementChild.firstElementChild, \'p-highlight\')\n      }\n    },\n    onOverlayLeave() {\n      this.unbindOutsideClickListener()\n      this.unbindScrollListener()\n      this.unbindResizeListener()\n    },\n    alignOverlay() {\n      let target = this.multiple ? this.$refs.multiContainer : this.$refs.input\n      if (this.appendTo)\n        DomHandler.absolutePosition(this.$refs.overlay, target)\n      else\n        DomHandler.relativePosition(this.$refs.overlay, target)\n    },\n    bindOutsideClickListener() {\n      if (!this.outsideClickListener) {\n        this.outsideClickListener = (event) => {\n          if (this.overlayVisible && this.$refs.overlay && this.isOutsideClicked(event)) {\n            this.hideOverlay()\n          }\n        }\n        document.addEventListener(\'click\', this.outsideClickListener)\n      }\n    },\n    bindScrollListener() {\n      if (!this.scrollHandler) {\n        this.scrollHandler = new ConnectedOverlayScrollHandler(this.$el, () => {\n          if (this.overlayVisible) {\n            this.hideOverlay()\n          }\n        })\n      }\n\n      this.scrollHandler.bindScrollListener()\n    },\n    unbindScrollListener() {\n      if (this.scrollHandler) {\n        this.scrollHandler.unbindScrollListener()\n      }\n    },\n    bindResizeListener() {\n      if (!this.resizeListener) {\n        this.resizeListener = () => {\n          if (this.overlayVisible) {\n            this.hideOverlay()\n          }\n        }\n        window.addEventListener(\'resize\', this.resizeListener)\n      }\n    },\n    unbindResizeListener() {\n      if (this.resizeListener) {\n        window.removeEventListener(\'resize\', this.resizeListener)\n        this.resizeListener = null\n      }\n    },\n    isOutsideClicked(event) {\n      return !this.$refs.overlay.contains(event.target) && !this.isInputClicked(event) && !this.isDropdownClicked(event)\n    },\n    isInputClicked(event) {\n      if (this.multiple)\n        return event.target === this.$refs.multiContainer || this.$refs.multiContainer.contains(event.target)\n      else\n        return event.target === this.$refs.input\n    },\n    isDropdownClicked(event) {\n      return this.$refs.dropdownButton ? (event.target === this.$refs.dropdownButton || this.$refs.dropdownButton.$el.contains(event.target)) : false\n    },\n    unbindOutsideClickListener() {\n      if (this.outsideClickListener) {\n        document.removeEventListener(\'click\', this.outsideClickListener)\n        this.outsideClickListener = null\n      }\n    },\n    selectItem(event, item) {\n      if (this.multiple) {\n        this.$refs.input.value = \'\'\n        this.inputTextValue = \'\'\n\n        if (!this.isSelected(item)) {\n          let newValue = this.value ? [...this.value, item] : [item]\n          this.$emit(\'input\', newValue)\n        }\n      }\n      else {\n        this.$emit(\'input\', item)\n      }\n\n      this.$emit(\'item-select\', {\n        originalEvent: event,\n        value: item\n      })\n\n      this.focus()\n      this.hideOverlay()\n    },\n    onMultiContainerClick() {\n      this.focus()\n    },\n    removeItem(event, index) {\n      let removedValue = this.value[index]\n      let newValue = this.value.filter((val, i) => (index !== i))\n      this.$emit(\'input\', newValue)\n      this.$emit(\'item-unselect\', {\n        originalEvent: event,\n        value: removedValue\n      })\n    },\n    onDropdownClick(event) {\n      this.focus()\n      const query = this.$refs.input.value\n\n      if (this.dropdownMode === \'blank\')\n        this.search(event, \'\', \'dropdown\')\n      else if (this.dropdownMode === \'current\')\n        this.search(event, query, \'dropdown\')\n\n      this.$emit(\'dropdown-click\', {\n        originalEvent: event,\n        query: query\n      })\n    },\n    getItemContent(item) {\n      return this.field ? ObjectUtils.resolveFieldData(item, this.field) : item\n    },\n    showOverlay() {\n      this.overlayVisible = true\n    },\n    hideOverlay() {\n      this.overlayVisible = false\n    },\n    focus() {\n      this.$refs.input.focus()\n    },\n    search(event, query, source) {\n      //allow empty string but not undefined or null\n      if (query === undefined || query === null) {\n        return\n      }\n\n      //do not search blank values on input change\n      if (source === \'input\' && query.trim().length === 0) {\n        return\n      }\n\n      this.searching = true\n      this.$emit(\'complete\', {\n        originalEvent: event,\n        query: query\n      })\n    },\n    onInput(event) {\n      this.inputTextValue = event.target.value\n\n      if (this.timeout) {\n        clearTimeout(this.timeout)\n      }\n\n      let query = event.target.value\n      if (!this.multiple) {\n        this.$emit(\'input\', query)\n      }\n\n      if (query.length === 0) {\n        this.hideOverlay()\n        this.$emit(\'clear\')\n      }\n      else {\n        if (query.length >= this.minLength) {\n          this.timeout = setTimeout(() => {\n            this.search(event, query, \'input\')\n          }, this.delay)\n        }\n        else {\n          this.hideOverlay()\n        }\n      }\n    },\n    onFocus(event) {\n      this.focused = true\n      this.$emit(\'focus\', event)\n    },\n    onBlur(event) {\n      this.focused = false\n      this.$emit(\'blur\', event)\n    },\n    onKeyDown(event) {\n      if (this.overlayVisible) {\n        let highlightItem = DomHandler.findSingle(this.$refs.overlay, \'li.p-highlight\')\n\n        switch (event.which) {\n        //down\n        case 40:\n          if (highlightItem) {\n            let nextElement = highlightItem.nextElementSibling\n            if (nextElement) {\n              DomHandler.addClass(nextElement, \'p-highlight\')\n              DomHandler.removeClass(highlightItem, \'p-highlight\')\n              DomHandler.scrollInView(this.$refs.overlay, nextElement)\n            }\n          }\n          else {\n            DomHandler.addClass(this.$refs.overlay.firstChild.firstElementChild, \'p-highlight\')\n          }\n\n          event.preventDefault()\n          break\n\n          //up\n        case 38:\n          if (highlightItem) {\n            let previousElement = highlightItem.previousElementSibling\n            if (previousElement) {\n              DomHandler.addClass(previousElement, \'p-highlight\')\n              DomHandler.removeClass(highlightItem, \'p-highlight\')\n              DomHandler.scrollInView(this.$refs.overlay, previousElement)\n            }\n          }\n\n          event.preventDefault()\n          break\n\n          //enter,tab\n        case 13:\n          if (highlightItem) {\n            this.selectItem(event, this.suggestions[DomHandler.index(highlightItem)])\n            this.hideOverlay()\n          }\n\n          event.preventDefault()\n          break\n\n          //escape\n        case 27:\n          this.hideOverlay()\n          event.preventDefault()\n          break\n\n          //tab\n        case 9:\n          if (highlightItem) {\n            this.selectItem(event, this.suggestions[DomHandler.index(highlightItem)])\n          }\n\n          this.hideOverlay()\n          break\n\n        default:\n          break\n        }\n      }\n\n      if (this.multiple) {\n        switch (event.which) {\n        //backspace\n        case 8:\n          if (this.value && this.value.length && !this.$refs.input.value) {\n            let removedValue = this.value[this.value.length - 1]\n            let newValue = this.value.slice(0, -1)\n\n            this.$emit(\'input\', newValue)\n            this.$emit(\'item-unselect\', {\n              originalEvent: event,\n              value: removedValue\n            })\n          }\n          break\n\n        default:\n          break\n        }\n      }\n    },\n    onChange(event) {\n      if (this.forceSelection) {\n        let valid = false\n        let inputValue = event.target.value.trim()\n\n        if (this.suggestions) {\n          for (let item of this.suggestions) {\n            let itemValue = this.field ? ObjectUtils.resolveFieldData(item, this.field) : item\n            if (itemValue && inputValue === itemValue.trim()) {\n              valid = true\n              this.selectItem(event, item)\n              break\n            }\n          }\n        }\n\n        if (!valid) {\n          this.$refs.input.value = \'\'\n          this.inputTextValue = \'\'\n          this.$emit(\'clear\')\n          if (!this.multiple) {\n            this.$emit(\'input\', null)\n          }\n        }\n      }\n    },\n    isSelected(val) {\n      let selected = false\n      if (this.value && this.value.length) {\n        for (let i = 0; i < this.value.length; i++) {\n          if (ObjectUtils.equals(this.value[i], val)) {\n            selected = true\n            break\n          }\n        }\n      }\n\n      return selected\n    },\n    appendContainer() {\n      if (this.appendTo) {\n        if (this.appendTo === \'body\')\n          document.body.appendChild(this.$refs.overlay)\n        else\n          document.getElementById(this.appendTo).appendChild(this.$refs.overlay)\n      }\n    },\n    restoreAppend() {\n      if (this.$refs.overlay && this.appendTo) {\n        if (this.appendTo === \'body\')\n          document.body.removeChild(this.$refs.overlay)\n        else\n          document.getElementById(this.appendTo).removeChild(this.$refs.overlay)\n      }\n    }\n  },\n  computed: {\n    listeners() {\n      return {\n        ...this.$listeners,\n        input: this.onInput,\n        focus: this.onFocus,\n        blur: this.onBlur,\n        keydown: this.onKeyDown,\n        change: this.onChange\n      }\n    },\n    containerClass() {\n      return [\'p-autocomplete p-component p-inputwrapper\', {\n        \'p-autocomplete-dd\': this.dropdown,\n        \'p-autocomplete-multiple\': this.multiple,\n        \'p-inputwrapper-filled\': ((this.value) || (this.inputTextValue && this.inputTextValue.length)),\n        \'p-inputwrapper-focus\': this.focused\n      }]\n    },\n    inputClass() {\n      return [\'p-autocomplete-input p-inputtext p-component\', {\n        \'p-autocomplete-dd-input\': this.dropdown,\n        \'p-disabled\': this.$attrs.disabled\n      }]\n    },\n    multiContainerClass() {\n      return [\'p-autocomplete-multiple-container p-component p-inputtext\', {\n        \'p-disabled\': this.$attrs.disabled,\n        \'p-focus\': this.focused\n      }]\n    },\n    inputValue() {\n      if (this.value) {\n        if (this.field && typeof this.value === \'object\') {\n          const resolvedFieldData = ObjectUtils.resolveFieldData(this.value, this.field)\n          return resolvedFieldData != null ? resolvedFieldData : this.value\n        }\n        else\n          return this.value\n      }\n      else {\n        return \'\'\n      }\n    },\n    listId() {\n      return UniqueComponentId() + \'_list\'\n    }\n  },\n  components: {\n    \'Button\': Button\n  },\n  directives: {\n    \'ripple\': Ripple\n  }\n}\n<\/script>\n\n<style>\n.p-autocomplete {\n  display: inline-flex;\n  position: relative;\n}\n\n.p-autocomplete-loader {\n  position: absolute;\n  top: 50%;\n  margin-top: -0.5rem;\n}\n\n.p-autocomplete-dd .p-autocomplete-input {\n  flex: 1 1 auto;\n  width: 1%;\n}\n\n.p-autocomplete-dd .p-autocomplete-input,\n.p-autocomplete-dd .p-autocomplete-multiple-container {\n  border-top-right-radius: 0;\n  border-bottom-right-radius: 0;\n}\n\n.p-autocomplete-dd .p-autocomplete-dropdown {\n  border-top-left-radius: 0;\n  border-bottom-left-radius: 0px;\n}\n\n.p-autocomplete .p-autocomplete-panel {\n  min-width: 100%;\n}\n\n.p-autocomplete-panel {\n  position: absolute;\n  overflow: auto;\n}\n\n.p-autocomplete-items {\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n}\n\n.p-autocomplete-item {\n  cursor: pointer;\n  white-space: nowrap;\n  position: relative;\n  overflow: hidden;\n}\n\n.p-autocomplete-multiple-container {\n  margin: 0;\n  padding: 0;\n  list-style-type: none;\n  cursor: text;\n  overflow: hidden;\n  display: flex;\n  align-items: center;\n}\n\n.p-autocomplete-token {\n  cursor: default;\n  display: inline-flex;\n  align-items: center;\n  flex: 0 0 auto;\n}\n\n.p-autocomplete-token-icon {\n  cursor: pointer;\n}\n\n.p-autocomplete-input-token {\n  flex: 1 1 auto;\n  display: inline-flex;\n}\n\n.p-autocomplete-input-token input {\n  border: 0 none;\n  outline: 0 none;\n  background-color: transparent;\n  margin: 0;\n  padding: 0;\n  box-shadow: none;\n  border-radius: 0;\n  width: 100%;\n}\n\n.p-fluid .p-autocomplete {\n  display: flex;\n}\n\n.p-fluid .p-autocomplete-dd .p-autocomplete-input {\n  width: 1%;\n}\n</style>\n']},media:void 0})}),w,undefined,false,undefined,!1,y,void 0,void 0);
