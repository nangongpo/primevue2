import{DomHandler as n}from"primevue2/utils";function e(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function t(n,e){if(n){if("string"==typeof n)return s(n,e);var t=Object.prototype.toString.call(n).slice(8,-1);return"Object"===t&&n.constructor&&(t=n.constructor.name),"Map"===t||"Set"===t?Array.from(n):"Arguments"===t||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t)?s(n,e):void 0}}function i(n){if("undefined"!=typeof Symbol&&null!=n[Symbol.iterator]||null!=n["@@iterator"])return Array.from(n)}function a(n){if(Array.isArray(n))return s(n)}function s(n,e){(null==e||e>n.length)&&(e=n.length);for(var t=0,i=new Array(e);t<e;t++)i[t]=n[t];return i}var r={name:"Slider",props:{value:[Number,Array],min:{type:Number,default:0},max:{type:Number,default:100},orientation:{type:String,default:"horizontal"},step:{type:Number,default:null},range:{type:Boolean,default:!1},disabled:{type:Boolean,default:!1},ariaLabelledBy:{type:String,default:null}},dragging:!1,handleIndex:null,initX:null,initY:null,barWidth:null,barHeight:null,dragListener:null,dragEndListener:null,beforeDestroy:function(){this.unbindDragListeners()},methods:{updateDomData:function(){var e=this.$refs.container.getBoundingClientRect();this.initX=e.left+n.getWindowScrollLeft(),this.initY=e.top+n.getWindowScrollTop(),this.barWidth=this.$refs.container.offsetWidth,this.barHeight=this.$refs.container.offsetHeight},setValue:function(n){var e=("horizontal"===this.orientation?100*((n.touches?n.touches[0].pageX:n.pageX)-this.initX)/this.barWidth:100*(this.initY+this.barHeight-(n.touches?n.touches[0].pageY:n.pageY))/this.barHeight)/100*(this.max-this.min)+this.min;if(this.step){var t=this.range?this.value[this.handleIndex]:this.value,i=e-t;i<0?e=t+Math.ceil(e/this.step-t/this.step)*this.step:i>0&&(e=t+Math.floor(e/this.step-t/this.step)*this.step)}else e=Math.floor(e);this.updateModel(n,e)},updateModel:function(n,s){var r,l,o=parseFloat(s.toFixed(10));if(this.range)if(r=this.value?a(l=this.value)||i(l)||t(l)||e():[],0==this.handleIndex){var h=this.value?this.value[1]:this.max;o<this.min?o=this.min:o>=h&&(o=h),r[0]=o,r[1]=r[1]||this.max}else{var d=this.value?this.value[0]:this.min;o>this.max?o=this.max:o<=d&&(o=d),r[0]=r[0]||this.min,r[1]=o}else o<this.min?o=this.min:o>this.max&&(o=this.max),r=o;this.$emit("input",r),this.$emit("change",r)},onDragStart:function(e,t){this.disabled||(n.addClass(this.$el,"p-slider-sliding"),this.dragging=!0,this.updateDomData(),this.handleIndex=this.range&&this.value[0]===this.max?0:t,e.preventDefault())},onDrag:function(n){this.dragging&&(this.setValue(n),n.preventDefault())},onDragEnd:function(e){this.dragging&&(this.dragging=!1,n.removeClass(this.$el,"p-slider-sliding"),this.$emit("slideend",{originalEvent:e,value:this.value}))},onBarClick:function(e){this.disabled||n.hasClass(e.target,"p-slider-handle")||(this.updateDomData(),this.setValue(e))},onMouseDown:function(n,e){this.bindDragListeners(),this.onDragStart(n,e)},onKeyDown:function(n,e){switch(this.handleIndex=e,n.which){case 40:this.vertical&&(this.decrementValue(n,e),n.preventDefault());break;case 38:this.vertical&&(this.incrementValue(n,e),n.preventDefault());break;case 37:this.horizontal&&(this.decrementValue(n,e),n.preventDefault());break;case 39:this.horizontal&&(this.incrementValue(n,e),n.preventDefault())}},decrementValue:function(n,e){this.updateModel(n,this.range?this.step?this.value[e]-this.step:this.value[e]-1:this.step?this.value-this.step:this.value-1),n.preventDefault()},incrementValue:function(n,e){this.updateModel(n,this.range?this.step?this.value[e]+this.step:this.value[e]+1:this.step?this.value+this.step:this.value+1),n.preventDefault()},bindDragListeners:function(){this.dragListener||(this.dragListener=this.onDrag.bind(this),document.addEventListener("mousemove",this.dragListener)),this.dragEndListener||(this.dragEndListener=this.onDragEnd.bind(this),document.addEventListener("mouseup",this.dragEndListener))},unbindDragListeners:function(){this.dragListener&&(document.removeEventListener("mousemove",this.dragListener),this.dragListener=null),this.dragEndListener&&(document.removeEventListener("mouseup",this.dragEndListener),this.dragEndListener=null)}},computed:{containerClass:function(){return["p-slider p-component",{"p-disabled":this.disabled,"p-slider-horizontal":"horizontal"===this.orientation,"p-slider-vertical":"vertical"===this.orientation}]},horizontal:function(){return"horizontal"===this.orientation},vertical:function(){return"vertical"===this.orientation},rangeStyle:function(){return this.range?this.horizontal?{left:this.rangeStartPosition+"%",width:this.rangeEndPosition-this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%",height:this.rangeEndPosition-this.rangeStartHandlePosition+"%"}:this.horizontal?{width:this.handlePosition+"%"}:{height:this.handlePosition+"%"}},handleStyle:function(){return this.horizontal?{left:this.handlePosition+"%"}:{bottom:this.handlePosition+"%"}},handlePosition:function(){return this.value<this.min?0:this.value>this.max?100:100*(this.value-this.min)/(this.max-this.min)},rangeStartPosition:function(){return this.value&&this.value[0]?100*(this.value[0]<this.min?0:this.value[0]-this.min)/(this.max-this.min):0},rangeEndPosition:function(){return this.value&&this.value[1]?100*(this.value[1]>this.max?100:this.value[1]-this.min)/(this.max-this.min):100},rangeStartHandleStyle:function(){return this.horizontal?{left:this.rangeStartPosition+"%"}:{bottom:this.rangeStartPosition+"%"}},rangeEndHandleStyle:function(){return this.horizontal?{left:this.rangeEndPosition+"%"}:{bottom:this.rangeEndPosition+"%"}}}};function l(n,e,t,i,a,s,r,l,o,h){"boolean"!=typeof r&&(o=l,l=r,r=!1);const d="function"==typeof t?t.options:t;let u;if(n&&n.render&&(d.render=n.render,d.staticRenderFns=n.staticRenderFns,d._compiled=!0,a&&(d.functional=!0)),i&&(d._scopeId=i),s?(u=function(n){(n=n||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(n=__VUE_SSR_CONTEXT__),e&&e.call(this,o(n)),n&&n._registeredComponents&&n._registeredComponents.add(s)},d._ssrRegister=u):e&&(u=r?function(n){e.call(this,h(n,this.$root.$options.shadowRoot))}:function(n){e.call(this,l(n))}),u)if(d.functional){const n=d.render;d.render=function(e,t){return u.call(t),n(e,t)}}else{const n=d.beforeCreate;d.beforeCreate=n?[].concat(n,u):[u]}return t}const o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function h(n){return(n,e)=>m(n,e)}let d;const u={};function m(n,e){const t=o?e.media||"default":n,i=u[t]||(u[t]={ids:new Set,styles:[]});if(!i.ids.has(n)){i.ids.add(n);let t=e.source;if(e.map&&(t+="\n/*# sourceURL="+e.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",e.media&&i.element.setAttribute("media",e.media),void 0===d&&(d=document.head||document.getElementsByTagName("head")[0]),d.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(t),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const n=i.ids.size-1,e=document.createTextNode(t),a=i.element.childNodes;a[n]&&i.element.removeChild(a[n]),a.length?i.element.insertBefore(e,a[n]):i.element.appendChild(e)}}}var c=r,v=function(){var n=this,e=n._self._c||n.$createElement;return e("div",{ref:"container",class:n.containerClass,on:{click:n.onBarClick}},[e("span",{staticClass:"p-slider-range",style:n.rangeStyle}),n._v(" "),n.range?n._e():e("span",{staticClass:"p-slider-handle",style:n.handleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":n.min,"aria-valuenow":n.value,"aria-valuemax":n.max,"aria-labelledby":n.ariaLabelledBy},on:{touchstart:function(e){return n.onDragStart(e)},touchmove:function(e){return n.onDrag(e)},touchend:function(e){return n.onDragEnd(e)},mousedown:function(e){return n.onMouseDown(e)},keydown:function(e){return n.onKeyDown(e)}}}),n._v(" "),n.range?e("span",{staticClass:"p-slider-handle",style:n.rangeStartHandleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":n.min,"aria-valuenow":n.value?n.value[0]:null,"aria-valuemax":n.max,"aria-labelledby":n.ariaLabelledBy},on:{touchstart:function(e){return n.onDragStart(e,0)},touchmove:function(e){return n.onDrag(e)},touchend:function(e){return n.onDragEnd(e)},mousedown:function(e){return n.onMouseDown(e,0)},keydown:function(e){return n.onKeyDown(e)}}}):n._e(),n._v(" "),n.range?e("span",{staticClass:"p-slider-handle",style:n.rangeEndHandleStyle,attrs:{tabindex:"0",role:"slider","aria-valuemin":n.min,"aria-valuenow":n.value?n.value[1]:null,"aria-valuemax":n.max,"aria-labelledby":n.ariaLabelledBy},on:{touchstart:function(e){return n.onDragStart(e,1)},touchmove:function(e){return n.onDrag(e)},touchend:function(e){return n.onDragEnd(e)},mousedown:function(e){return n.onMouseDown(e,1)},keydown:function(e){return n.onKeyDown(e,1)}}}):n._e()])};v._withStripped=!0;var p=l({render:v,staticRenderFns:[]},(function(n){n&&n("data-v-2c6d87b7_0",{source:"\n.p-slider {\n  position: relative;\n}\n.p-slider .p-slider-handle {\n  position: absolute;\n  cursor: -webkit-grab;\n  cursor: grab;\n  -ms-touch-action: none;\n      touch-action: none;\n  display: block;\n}\n.p-slider-range {\n  position: absolute;\n  display: block;\n}\n.p-slider-horizontal .p-slider-range {\n  top: 0;\n  left: 0;\n  height: 100%;\n}\n.p-slider-horizontal .p-slider-handle {\n  top: 50%;\n}\n.p-slider-vertical {\n  height: 100px;\n}\n.p-slider-vertical .p-slider-handle {\n  left: 50%;\n}\n.p-slider-vertical .p-slider-range {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n}\n",map:{version:3,sources:["/Users/nangongpo/Desktop/我的开源/primevue2/src/components/slider/Slider.vue"],names:[],mappings:";AA6YA;EACA,kBAAA;AACA;AAEA;EACA,kBAAA;EACA,oBAAA;EAAA,YAAA;EACA,sBAAA;MAAA,kBAAA;EACA,cAAA;AACA;AAEA;EACA,kBAAA;EACA,cAAA;AACA;AAEA;EACA,MAAA;EACA,OAAA;EACA,YAAA;AACA;AAEA;EACA,QAAA;AACA;AAEA;EACA,aAAA;AACA;AAEA;EACA,SAAA;AACA;AAEA;EACA,SAAA;EACA,OAAA;EACA,WAAA;AACA",file:"Slider.vue",sourcesContent:['<template>\n  <div :class="containerClass" @click="onBarClick" ref="container">\n    <span class="p-slider-range" :style="rangeStyle"></span>\n    <span\n      v-if="!range"\n      class="p-slider-handle"\n      :style="handleStyle"\n      @touchstart="onDragStart($event)"\n      @touchmove="onDrag($event)"\n      @touchend="onDragEnd($event)"\n      @mousedown="onMouseDown($event)"\n      @keydown="onKeyDown($event)"\n      tabindex="0"\n      role="slider"\n      :aria-valuemin="min"\n      :aria-valuenow="value"\n      :aria-valuemax="max"\n      :aria-labelledby="ariaLabelledBy"></span>\n    <span\n      v-if="range"\n      class="p-slider-handle"\n      :style="rangeStartHandleStyle"\n      @touchstart="onDragStart($event, 0)"\n      @touchmove="onDrag($event)"\n      @touchend="onDragEnd($event)"\n      @mousedown="onMouseDown($event, 0)"\n      @keydown="onKeyDown($event)"\n      tabindex="0"\n      role="slider"\n      :aria-valuemin="min"\n      :aria-valuenow="value ? value[0] : null"\n      :aria-valuemax="max"\n      :aria-labelledby="ariaLabelledBy"></span>\n    <span\n      v-if="range"\n      class="p-slider-handle"\n      :style="rangeEndHandleStyle"\n      @touchstart="onDragStart($event, 1)"\n      @touchmove="onDrag($event)"\n      @touchend="onDragEnd($event)"\n      @mousedown="onMouseDown($event, 1)"\n      @keydown="onKeyDown($event, 1)"\n      tabindex="0"\n      role="slider"\n      :aria-valuemin="min"\n      :aria-valuenow="value ? value[1] : null"\n      :aria-valuemax="max"\n      :aria-labelledby="ariaLabelledBy"></span>\n  </div>\n</template>\n\n<script>\nimport { DomHandler } from \'primevue2/utils\'\n\nexport default {\n  name: \'Slider\',\n  props: {\n    value: [Number, Array],\n    min: {\n      type: Number,\n      default: 0\n    },\n    max: {\n      type: Number,\n      default: 100\n    },\n    orientation: {\n      type: String,\n      default: \'horizontal\'\n    },\n    step: {\n      type: Number,\n      default: null\n    },\n    range: {\n      type: Boolean,\n      default: false\n    },\n    disabled: {\n      type: Boolean,\n      default: false\n    },\n    ariaLabelledBy: {\n      type: String,\n      default: null\n    }\n  },\n  dragging: false,\n  handleIndex: null,\n  initX: null,\n  initY: null,\n  barWidth: null,\n  barHeight: null,\n  dragListener: null,\n  dragEndListener: null,\n  beforeDestroy() {\n    this.unbindDragListeners()\n  },\n  methods: {\n    updateDomData() {\n      let rect = this.$refs.container.getBoundingClientRect()\n      this.initX = rect.left + DomHandler.getWindowScrollLeft()\n      this.initY = rect.top + DomHandler.getWindowScrollTop()\n      this.barWidth = this.$refs.container.offsetWidth\n      this.barHeight = this.$refs.container.offsetHeight\n    },\n    setValue(event) {\n      let handleValue\n      let pageX = event.touches ? event.touches[0].pageX : event.pageX\n      let pageY = event.touches ? event.touches[0].pageY : event.pageY\n\n      if (this.orientation === \'horizontal\')\n        handleValue = ((pageX - this.initX) * 100) / (this.barWidth)\n      else\n        handleValue = (((this.initY + this.barHeight) - pageY) * 100) / (this.barHeight)\n\n      let newValue = (this.max - this.min) * (handleValue / 100) + this.min\n\n      if (this.step) {\n        const oldValue = this.range ? this.value[this.handleIndex] : this.value\n        const diff = (newValue - oldValue)\n\n        if (diff < 0)\n          newValue = oldValue + Math.ceil(newValue / this.step - oldValue / this.step) * this.step\n        else if (diff > 0)\n          newValue = oldValue + Math.floor(newValue / this.step - oldValue / this.step) * this.step\n      }\n\n      else {\n        newValue = Math.floor(newValue)\n      }\n\n      this.updateModel(event, newValue)\n    },\n    updateModel(event, value) {\n      let newValue = parseFloat(value.toFixed(10))\n      let modelValue\n\n      if (this.range) {\n        modelValue = this.value ? [...this.value] : []\n\n        if (this.handleIndex == 0) {\n          let maxValue = this.value ? this.value[1] : this.max\n\n          if (newValue < this.min)\n            newValue = this.min\n          else if (newValue >= maxValue)\n            newValue = maxValue\n\n          modelValue[0] = newValue\n          modelValue[1] = modelValue[1] || this.max\n        }\n        else {\n          let minValue = this.value ? this.value[0] : this.min\n          if (newValue > this.max)\n            newValue = this.max\n          else if (newValue <= minValue)\n            newValue = minValue\n\n          modelValue[0] = modelValue[0] || this.min\n          modelValue[1] = newValue\n        }\n      }\n\n      else {\n        if (newValue < this.min)\n          newValue = this.min\n        else if (newValue > this.max)\n          newValue = this.max\n\n        modelValue = newValue\n      }\n\n      this.$emit(\'input\', modelValue)\n      this.$emit(\'change\', modelValue)\n    },\n    onDragStart(event, index) {\n      if (this.disabled) {\n        return\n      }\n\n      DomHandler.addClass(this.$el, \'p-slider-sliding\')\n\n      this.dragging = true\n      this.updateDomData()\n\n      if (this.range && this.value[0] === this.max) {\n        this.handleIndex = 0\n      }\n      else {\n        this.handleIndex = index\n      }\n\n      event.preventDefault()\n    },\n    onDrag(event) {\n      if (this.dragging) {\n        this.setValue(event)\n        event.preventDefault()\n      }\n    },\n    onDragEnd(event) {\n      if (this.dragging) {\n        this.dragging = false\n\n        DomHandler.removeClass(this.$el, \'p-slider-sliding\')\n        this.$emit(\'slideend\', { originalEvent: event, value: this.value })\n      }\n    },\n    onBarClick(event) {\n      if (this.disabled) {\n        return\n      }\n\n      if (!DomHandler.hasClass(event.target, \'p-slider-handle\')) {\n        this.updateDomData()\n        this.setValue(event)\n      }\n    },\n    onMouseDown(event, index) {\n      this.bindDragListeners()\n      this.onDragStart(event, index)\n    },\n    onKeyDown(event, index) {\n      this.handleIndex = index\n\n      switch (event.which) {\n      //down\n      case 40:\n        if (this.vertical) {\n          this.decrementValue(event, index)\n          event.preventDefault()\n        }\n        break\n\n        //up\n      case 38:\n        if (this.vertical) {\n          this.incrementValue(event, index)\n          event.preventDefault()\n        }\n        break\n\n        //left\n      case 37:\n        if (this.horizontal) {\n          this.decrementValue(event, index)\n          event.preventDefault()\n        }\n        break\n\n        //right\n      case 39:\n        if (this.horizontal) {\n          this.incrementValue(event, index)\n          event.preventDefault()\n        }\n        break\n\n      default:\n        break\n      }\n    },\n    decrementValue(event, index) {\n      let newValue\n\n      if (this.range) {\n        if (this.step)\n          newValue = this.value[index] - this.step\n        else\n          newValue = this.value[index] - 1\n      }\n      else {\n        if (this.step)\n          newValue = this.value - this.step\n        else\n          newValue = this.value - 1\n      }\n\n      this.updateModel(event, newValue)\n\n      event.preventDefault()\n    },\n    incrementValue(event, index) {\n      let newValue\n\n      if (this.range) {\n        if (this.step)\n          newValue = this.value[index] + this.step\n        else\n          newValue = this.value[index] + 1\n      }\n      else {\n        if (this.step)\n          newValue = this.value + this.step\n        else\n          newValue = this.value + 1\n      }\n\n      this.updateModel(event, newValue)\n\n      event.preventDefault()\n    },\n    bindDragListeners() {\n      if (!this.dragListener) {\n        this.dragListener = this.onDrag.bind(this)\n        document.addEventListener(\'mousemove\', this.dragListener)\n      }\n\n      if (!this.dragEndListener) {\n        this.dragEndListener = this.onDragEnd.bind(this)\n        document.addEventListener(\'mouseup\', this.dragEndListener)\n      }\n    },\n    unbindDragListeners() {\n      if (this.dragListener) {\n        document.removeEventListener(\'mousemove\', this.dragListener)\n        this.dragListener = null\n      }\n\n      if (this.dragEndListener) {\n        document.removeEventListener(\'mouseup\', this.dragEndListener)\n        this.dragEndListener = null\n      }\n    }\n  },\n  computed: {\n    containerClass() {\n      return [\'p-slider p-component\', {\n        \'p-disabled\': this.disabled,\n        \'p-slider-horizontal\': (this.orientation === \'horizontal\'),\n        \'p-slider-vertical\': (this.orientation === \'vertical\')\n      }]\n    },\n    horizontal() {\n      return this.orientation === \'horizontal\'\n    },\n    vertical() {\n      return this.orientation === \'vertical\'\n    },\n    rangeStyle() {\n      if (this.range) {\n        if (this.horizontal)\n          return { \'left\': this.rangeStartPosition + \'%\', width: (this.rangeEndPosition - this.rangeStartPosition + \'%\') }\n        else\n          return { \'bottom\': this.rangeStartPosition + \'%\', height: (this.rangeEndPosition - this.rangeStartHandlePosition + \'%\') }\n      }\n      else {\n        if (this.horizontal)\n          return { \'width\': this.handlePosition + \'%\' }\n        else\n          return { \'height\': this.handlePosition + \'%\' }\n      }\n    },\n    handleStyle() {\n      if (this.horizontal)\n        return { \'left\': this.handlePosition + \'%\' }\n      else\n        return { \'bottom\': this.handlePosition + \'%\' }\n    },\n    handlePosition() {\n      if (this.value < this.min)\n        return 0\n      else if (this.value > this.max)\n        return 100\n      else\n        return (this.value - this.min) * 100 / (this.max - this.min)\n    },\n    rangeStartPosition() {\n      if (this.value && this.value[0])\n        return (this.value[0] < this.min ? 0 : this.value[0] - this.min) * 100 / (this.max - this.min)\n      else\n        return 0\n    },\n    rangeEndPosition() {\n      if (this.value && this.value[1])\n        return (this.value[1] > this.max ? 100 : this.value[1] - this.min) * 100 / (this.max - this.min)\n      else\n        return 100\n    },\n    rangeStartHandleStyle() {\n      if (this.horizontal)\n        return { \'left\': this.rangeStartPosition + \'%\' }\n      else\n        return { \'bottom\': this.rangeStartPosition + \'%\' }\n    },\n    rangeEndHandleStyle() {\n      if (this.horizontal)\n        return { \'left\': this.rangeEndPosition + \'%\' }\n      else\n        return { \'bottom\': this.rangeEndPosition + \'%\' }\n    },\n  }\n}\n<\/script>\n\n<style>\n.p-slider {\n  position: relative;\n}\n\n.p-slider .p-slider-handle {\n  position: absolute;\n  cursor: grab;\n  touch-action: none;\n  display: block;\n}\n\n.p-slider-range {\n  position: absolute;\n  display: block;\n}\n\n.p-slider-horizontal .p-slider-range {\n  top: 0;\n  left: 0;\n  height: 100%;\n}\n\n.p-slider-horizontal .p-slider-handle {\n  top: 50%;\n}\n\n.p-slider-vertical {\n  height: 100px;\n}\n\n.p-slider-vertical .p-slider-handle {\n  left: 50%;\n}\n\n.p-slider-vertical .p-slider-range {\n  bottom: 0;\n  left: 0;\n  width: 100%;\n}\n</style>\n']},media:void 0})}),c,undefined,false,undefined,!1,h,void 0,void 0);export{p as default};
