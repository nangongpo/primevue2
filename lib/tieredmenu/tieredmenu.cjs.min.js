"use strict";var e=require("primevue2/utils"),n=require("primevue2/ripple");function t(e){return e&&"object"==typeof e&&"default"in e?e:{default:e}}function i(e,n,t,i,s,r,l,o,a,d){"boolean"!=typeof l&&(a=o,o=l,l=!1);const u="function"==typeof t?t.options:t;let c;if(e&&e.render&&(u.render=e.render,u.staticRenderFns=e.staticRenderFns,u._compiled=!0,s&&(u.functional=!0)),i&&(u._scopeId=i),r?(c=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,a(e)),e&&e._registeredComponents&&e._registeredComponents.add(r)},u._ssrRegister=c):n&&(c=l?function(e){n.call(this,d(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,o(e))}),c)if(u.functional){const e=u.render;u.render=function(n,t){return c.call(t),e(n,t)}}else{const e=u.beforeCreate;u.beforeCreate=e?[].concat(e,c):[c]}return t}var s={name:"TieredMenuSub",props:{model:{type:Array,default:null},root:{type:Boolean,default:!1},popup:{type:Boolean,default:!1},parentActive:{type:Boolean,default:!1},exact:{type:Boolean,default:!0}},documentClickListener:null,watch:{parentActive:function(e){e||(this.activeItem=null)}},data:function(){return{activeItem:null}},updated:function(){this.root&&this.activeItem&&this.bindDocumentClickListener()},beforeDestroy:function(){this.unbindDocumentClickListener()},methods:{onItemMouseEnter:function(e,n){this.disabled(n)?e.preventDefault():this.root?(this.activeItem||this.popup)&&(this.activeItem=n):this.activeItem=n},onItemClick:function(e,n){this.disabled(n)?e.preventDefault():(n.url||n.to||e.preventDefault(),n.command&&n.command({originalEvent:e,item:n}),n.items&&(this.activeItem=this.activeItem&&n===this.activeItem?null:n),n.items||this.onLeafClick())},onLeafClick:function(){this.activeItem=null,this.$emit("leaf-click")},onItemKeyDown:function(e,n){var t=e.currentTarget.parentElement;switch(e.which){case 40:var i=this.findNextItem(t);i&&i.children[0].focus(),e.preventDefault();break;case 38:var s=this.findPrevItem(t);s&&s.children[0].focus(),e.preventDefault();break;case 39:n.items&&(this.activeItem=n,setTimeout((function(){t.children[1].children[0].children[0].focus()}),50)),e.preventDefault()}this.$emit("keydown-item",{originalEvent:e,element:t})},onChildItemKeyDown:function(e){37===e.originalEvent.which&&(this.activeItem=null,e.element.parentElement.previousElementSibling.focus())},findNextItem:function(n){var t=n.nextElementSibling;return t?e.DomHandler.hasClass(t,"p-disabled")||!e.DomHandler.hasClass(t,"p-menuitem")?this.findNextItem(t):t:null},findPrevItem:function(n){var t=n.previousElementSibling;return t?e.DomHandler.hasClass(t,"p-disabled")||!e.DomHandler.hasClass(t,"p-menuitem")?this.findPrevItem(t):t:null},getItemClass:function(e){return["p-menuitem",e.class,{"p-menuitem-active":this.activeItem===e}]},linkClass:function(e,n){return["p-menuitem-link",{"p-disabled":this.disabled(e),"router-link-active":n&&n.isActive,"router-link-active-exact":this.exact&&n&&n.isExactActive}]},bindDocumentClickListener:function(){var e=this;this.documentClickListener||(this.documentClickListener=function(n){e.$el&&!e.$el.contains(n.target)&&(e.activeItem=null,e.unbindDocumentClickListener())},document.addEventListener("click",this.documentClickListener))},unbindDocumentClickListener:function(){this.documentClickListener&&(document.removeEventListener("click",this.documentClickListener),this.documentClickListener=null)},visible:function(e){return"function"==typeof e.visible?e.visible():!1!==e.visible},disabled:function(e){return"function"==typeof e.disabled?e.disabled():e.disabled},label:function(e){return"function"==typeof e.label?e.label():e.label}},computed:{containerClass:function(){return{"p-submenu-list":!this.root}}},directives:{ripple:t(n).default}},r=function(){var e=this,n=e._self._c||e.$createElement;return n("ul",{ref:"element",class:e.containerClass,attrs:{role:"'menubar' : 'menu'","aria-orientation":"horizontal"}},[e._l(e.model,(function(t,i){return[e.visible(t)&&!t.separator?n("li",{key:e.label(t)+i,class:e.getItemClass(t),style:t.style,attrs:{role:"none"},on:{mouseenter:function(n){return e.onItemMouseEnter(n,t)}}},[t.to&&!e.disabled(t)?n("router-link",{attrs:{to:t.to,custom:""},scopedSlots:e._u([{key:"default",fn:function(i){var s=i.navigate,r=i.href;return[n("a",{directives:[{name:"ripple",rawName:"v-ripple"}],class:e.linkClass(t,{isActive:i.isActive,isExactActive:i.isExactActive}),attrs:{href:r,role:"menuitem"},on:{click:function(n){return e.onItemClick(n,t,s)},keydown:function(n){return e.onItemKeyDown(n,t)}}},[n("span",{class:["p-menuitem-icon",t.icon]}),e._v(" "),n("span",{staticClass:"p-menuitem-text"},[e._v(e._s(e.label(t)))])])]}}],null,!0)}):n("a",{directives:[{name:"ripple",rawName:"v-ripple"}],class:e.linkClass(t),attrs:{href:t.url,target:t.target,"aria-haspopup":null!=t.items,"aria-expanded":t===e.activeItem,role:"menuitem",tabindex:e.disabled(t)?null:"0"},on:{click:function(n){return e.onItemClick(n,t)},keydown:function(n){return e.onItemKeyDown(n,t)}}},[n("span",{class:["p-menuitem-icon",t.icon]}),e._v(" "),n("span",{staticClass:"p-menuitem-text"},[e._v(e._s(e.label(t)))]),e._v(" "),t.items?n("span",{staticClass:"p-submenu-icon pi pi-angle-right"}):e._e()]),e._v(" "),e.visible(t)&&t.items?n("TieredMenuSub",{key:e.label(t)+"_sub_",attrs:{model:t.items,parentActive:t===e.activeItem,exact:e.exact},on:{"leaf-click":e.onLeafClick,"keydown-item":e.onChildItemKeyDown}}):e._e()],1):e._e(),e._v(" "),e.visible(t)&&t.separator?n("li",{key:"separator"+i,class:["p-menu-separator",t.class],style:t.style,attrs:{role:"separator"}}):e._e()]}))],2)};r._withStripped=!0;var l={name:"TieredMenu",props:{popup:{type:Boolean,default:!1},model:{type:Array,default:null},appendTo:{type:String,default:null},autoZIndex:{type:Boolean,default:!0},baseZIndex:{type:Number,default:0},exact:{type:Boolean,default:!0}},target:null,outsideClickListener:null,scrollHandler:null,resizeListener:null,data:function(){return{visible:!1}},beforeDestroy:function(){this.restoreAppend(),this.unbindResizeListener(),this.unbindOutsideClickListener(),this.scrollHandler&&(this.scrollHandler.destroy(),this.scrollHandler=null),this.target=null},methods:{itemClick:function(e){var n=e.item;n.command&&(n.command(e),e.originalEvent.preventDefault()),this.hide()},toggle:function(e){this.visible?this.hide():this.show(e)},show:function(e){this.visible=!0,this.target=e.currentTarget},hide:function(){this.visible=!1},onEnter:function(){this.appendContainer(),this.alignOverlay(),this.bindOutsideClickListener(),this.bindResizeListener(),this.bindScrollListener(),this.autoZIndex&&(this.$refs.container.style.zIndex=String(this.baseZIndex+e.DomHandler.generateZIndex()))},onLeave:function(){this.unbindOutsideClickListener(),this.unbindResizeListener(),this.unbindScrollListener()},alignOverlay:function(){e.DomHandler.absolutePosition(this.$refs.container,this.target)},bindOutsideClickListener:function(){var e=this;this.outsideClickListener||(this.outsideClickListener=function(n){e.visible&&e.$refs.container&&!e.$refs.container.contains(n.target)&&!e.isTargetClicked(n)&&e.hide()},document.addEventListener("click",this.outsideClickListener))},unbindOutsideClickListener:function(){this.outsideClickListener&&(document.removeEventListener("click",this.outsideClickListener),this.outsideClickListener=null)},bindScrollListener:function(){var n=this;this.scrollHandler||(this.scrollHandler=new e.ConnectedOverlayScrollHandler(this.target,(function(){n.visible&&n.hide()}))),this.scrollHandler.bindScrollListener()},unbindScrollListener:function(){this.scrollHandler&&this.scrollHandler.unbindScrollListener()},bindResizeListener:function(){var e=this;this.resizeListener||(this.resizeListener=function(){e.visible&&e.hide()},window.addEventListener("resize",this.resizeListener))},unbindResizeListener:function(){this.resizeListener&&(window.removeEventListener("resize",this.resizeListener),this.resizeListener=null)},isTargetClicked:function(){return this.target&&(this.target===event.target||this.target.contains(event.target))},appendContainer:function(){this.appendTo&&("body"===this.appendTo?document.body.appendChild(this.$refs.container):document.getElementById(this.appendTo).appendChild(this.$refs.container))},restoreAppend:function(){this.$refs.container&&this.appendTo&&("body"===this.appendTo?document.body.removeChild(this.$refs.container):document.getElementById(this.appendTo).removeChild(this.$refs.container))},onLeafClick:function(){this.popup&&this.hide()}},computed:{containerClass:function(){return["p-tieredmenu p-component",{"p-tieredmenu-overlay":this.popup}]}},components:{TieredMenuSub:i({render:r,staticRenderFns:[]},undefined,s,undefined,false,undefined,!1,void 0,void 0,void 0)}};const o="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function a(e){return(e,n)=>c(e,n)}let d;const u={};function c(e,n){const t=o?n.media||"default":e,i=u[t]||(u[t]={ids:new Set,styles:[]});if(!i.ids.has(e)){i.ids.add(e);let t=n.source;if(n.map&&(t+="\n/*# sourceURL="+n.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),i.element||(i.element=document.createElement("style"),i.element.type="text/css",n.media&&i.element.setAttribute("media",n.media),void 0===d&&(d=document.head||document.getElementsByTagName("head")[0]),d.appendChild(i.element)),"styleSheet"in i.element)i.styles.push(t),i.element.styleSheet.cssText=i.styles.filter(Boolean).join("\n");else{const e=i.ids.size-1,n=document.createTextNode(t),s=i.element.childNodes;s[e]&&i.element.removeChild(s[e]),s.length?i.element.insertBefore(n,s[e]):i.element.appendChild(n)}}}var p=l,m=function(){var e=this,n=e._self._c||e.$createElement;return n("transition",{attrs:{name:"p-connected-overlay"},on:{enter:e.onEnter,leave:e.onLeave}},[!e.popup||e.visible?n("div",{ref:"container",class:e.containerClass},[n("TieredMenuSub",{attrs:{model:e.model,root:!0,popup:e.popup,exact:e.exact},on:{"leaf-click":e.onLeafClick}})],1):e._e()])};m._withStripped=!0;module.exports=i({render:m,staticRenderFns:[]},(function(e){e&&e("data-v-2e4de171_0",{source:"\n.p-tieredmenu-overlay {\n  position: absolute;\n}\n.p-tieredmenu ul {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n.p-tieredmenu .p-submenu-list {\n  position: absolute;\n  min-width: 100%;\n  z-index: 1;\n  display: none;\n}\n.p-tieredmenu .p-menuitem-link {\n  cursor: pointer;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  text-decoration: none;\n  overflow: hidden;\n  position: relative;\n}\n.p-tieredmenu .p-menuitem-text {\n  line-height: 1;\n}\n.p-tieredmenu .p-menuitem {\n  position: relative;\n}\n.p-tieredmenu .p-menuitem-link .p-submenu-icon {\n  margin-left: auto;\n}\n.p-tieredmenu .p-menuitem-active > .p-submenu-list {\n  display: block;\n  left: 100%;\n  top: 0;\n}\n",map:{version:3,sources:["/Users/nangongpo/Desktop/开源学习/primevue2/src/components/tieredmenu/TieredMenu.vue"],names:[],mappings:";AA6LA;EACA,kBAAA;AACA;AAEA;EACA,SAAA;EACA,UAAA;EACA,gBAAA;AACA;AAEA;EACA,kBAAA;EACA,eAAA;EACA,UAAA;EACA,aAAA;AACA;AAEA;EACA,eAAA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,qBAAA;EACA,gBAAA;EACA,kBAAA;AACA;AAEA;EACA,cAAA;AACA;AAEA;EACA,kBAAA;AACA;AAEA;EACA,iBAAA;AACA;AAEA;EACA,cAAA;EACA,UAAA;EACA,MAAA;AACA",file:"TieredMenu.vue",sourcesContent:["<template>\n  <transition name=\"p-connected-overlay\" @enter=\"onEnter\" @leave=\"onLeave\">\n    <div ref=\"container\" :class=\"containerClass\" v-if=\"popup ? visible : true\">\n      <TieredMenuSub :model=\"model\" :root=\"true\" :popup=\"popup\" @leaf-click=\"onLeafClick\" :exact=\"exact\" />\n    </div>\n  </transition>\n</template>\n\n<script>\nimport { DomHandler, ConnectedOverlayScrollHandler } from 'primevue2/utils'\nimport TieredMenuSub from './TieredMenuSub.vue'\n\nexport default {\n  name: 'TieredMenu',\n  props: {\n    popup: {\n      type: Boolean,\n      default: false\n    },\n    model: {\n      type: Array,\n      default: null\n    },\n    appendTo: {\n      type: String,\n      default: null\n    },\n    autoZIndex: {\n      type: Boolean,\n      default: true\n    },\n    baseZIndex: {\n      type: Number,\n      default: 0\n    },\n    exact: {\n      type: Boolean,\n      default: true\n    }\n  },\n  target: null,\n  outsideClickListener: null,\n  scrollHandler: null,\n  resizeListener: null,\n  data() {\n    return {\n      visible: false\n    }\n  },\n  beforeDestroy() {\n    this.restoreAppend()\n    this.unbindResizeListener()\n    this.unbindOutsideClickListener()\n\n    if (this.scrollHandler) {\n      this.scrollHandler.destroy()\n      this.scrollHandler = null\n    }\n\n    this.target = null\n  },\n  methods: {\n    itemClick(event) {\n      const item = event.item\n      if (item.command) {\n        item.command(event)\n        event.originalEvent.preventDefault()\n      }\n      this.hide()\n    },\n    toggle(event) {\n      if (this.visible)\n        this.hide()\n      else\n        this.show(event)\n    },\n    show(event) {\n      this.visible = true\n      this.target = event.currentTarget\n    },\n    hide() {\n      this.visible = false\n    },\n    onEnter() {\n      this.appendContainer()\n      this.alignOverlay()\n      this.bindOutsideClickListener()\n      this.bindResizeListener()\n      this.bindScrollListener()\n\n      if (this.autoZIndex) {\n        this.$refs.container.style.zIndex = String(this.baseZIndex + DomHandler.generateZIndex())\n      }\n    },\n    onLeave() {\n      this.unbindOutsideClickListener()\n      this.unbindResizeListener()\n      this.unbindScrollListener()\n    },\n    alignOverlay() {\n      DomHandler.absolutePosition(this.$refs.container, this.target)\n    },\n    bindOutsideClickListener() {\n      if (!this.outsideClickListener) {\n        this.outsideClickListener = (event) => {\n          if (this.visible && this.$refs.container && !this.$refs.container.contains(event.target) && !this.isTargetClicked(event)) {\n            this.hide()\n          }\n        }\n        document.addEventListener('click', this.outsideClickListener)\n      }\n    },\n    unbindOutsideClickListener() {\n      if (this.outsideClickListener) {\n        document.removeEventListener('click', this.outsideClickListener)\n        this.outsideClickListener = null\n      }\n    },\n    bindScrollListener() {\n      if (!this.scrollHandler) {\n        this.scrollHandler = new ConnectedOverlayScrollHandler(this.target, () => {\n          if (this.visible) {\n            this.hide()\n          }\n        })\n      }\n\n      this.scrollHandler.bindScrollListener()\n    },\n    unbindScrollListener() {\n      if (this.scrollHandler) {\n        this.scrollHandler.unbindScrollListener()\n      }\n    },\n    bindResizeListener() {\n      if (!this.resizeListener) {\n        this.resizeListener = () => {\n          if (this.visible) {\n            this.hide()\n          }\n        }\n        window.addEventListener('resize', this.resizeListener)\n      }\n    },\n    unbindResizeListener() {\n      if (this.resizeListener) {\n        window.removeEventListener('resize', this.resizeListener)\n        this.resizeListener = null\n      }\n    },\n    isTargetClicked() {\n      return this.target && (this.target === event.target || this.target.contains(event.target))\n    },\n    appendContainer() {\n      if (this.appendTo) {\n        if (this.appendTo === 'body')\n          document.body.appendChild(this.$refs.container)\n        else\n          document.getElementById(this.appendTo).appendChild(this.$refs.container)\n      }\n    },\n    restoreAppend() {\n      if (this.$refs.container && this.appendTo) {\n        if (this.appendTo === 'body')\n          document.body.removeChild(this.$refs.container)\n        else\n          document.getElementById(this.appendTo).removeChild(this.$refs.container)\n      }\n    },\n    onLeafClick() {\n      if (this.popup) {\n        this.hide()\n      }\n    }\n  },\n  computed: {\n    containerClass() {\n      return ['p-tieredmenu p-component', {\n        'p-tieredmenu-overlay': this.popup\n      }]\n    }\n  },\n  components: {\n    'TieredMenuSub': TieredMenuSub\n  }\n}\n<\/script>\n\n<style>\n.p-tieredmenu-overlay {\n  position: absolute;\n}\n\n.p-tieredmenu ul {\n  margin: 0;\n  padding: 0;\n  list-style: none;\n}\n\n.p-tieredmenu .p-submenu-list {\n  position: absolute;\n  min-width: 100%;\n  z-index: 1;\n  display: none;\n}\n\n.p-tieredmenu .p-menuitem-link {\n  cursor: pointer;\n  display: flex;\n  align-items: center;\n  text-decoration: none;\n  overflow: hidden;\n  position: relative;\n}\n\n.p-tieredmenu .p-menuitem-text {\n  line-height: 1;\n}\n\n.p-tieredmenu .p-menuitem {\n  position: relative;\n}\n\n.p-tieredmenu .p-menuitem-link .p-submenu-icon {\n  margin-left: auto;\n}\n\n.p-tieredmenu .p-menuitem-active > .p-submenu-list {\n  display: block;\n  left: 100%;\n  top: 0;\n}\n</style>\n"]},media:void 0})}),p,undefined,false,undefined,!1,a,void 0,void 0);
