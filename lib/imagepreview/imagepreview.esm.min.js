import{DomHandler as e}from"primevue2/utils";var n={name:"ImagePreview",inheritAttrs:!1,props:{preview:{type:Boolean,default:!1},className:null,styles:null,imageStyle:null,imageClass:null},mask:null,data:function(){return{maskVisible:!1,previewVisible:!1,rotate:0,scale:1}},beforeDestroy:function(){this.restoreAppend()},methods:{onImageClick:function(){var e=this;this.preview&&(this.maskVisible=!0,setTimeout((function(){e.previewVisible=!0}),25))},onPreviewImageClick:function(){this.previewClick=!0},onMaskClick:function(){this.previewClick||(this.previewVisible=!1,this.rotate=0,this.scale=1),this.previewClick=!1,this.restoreAppend()},rotateRight:function(){this.rotate+=90,this.previewClick=!0},rotateLeft:function(){this.rotate-=90,this.previewClick=!0},zoomIn:function(){this.scale=this.scale+.1,this.previewClick=!0},zoomOut:function(){this.scale=this.scale-.1,this.previewClick=!0},onBeforeEnter:function(){this.$refs.mask.style.zIndex=String(e.generateZIndex())},onEnter:function(){this.appendContainer(),this.$emit("show")},onBeforeLeave:function(){e.addClass(this.$refs.mask,"p-component-overlay-leave")},onLeave:function(){this.$emit("hide")},onAfterLeave:function(){this.maskVisible=!1},appendContainer:function(){document.body.appendChild(this.$refs.mask),e.addClass(document.body,"p-overflow-hidden")},restoreAppend:function(){this.$refs.mask&&(document.body.removeChild(this.$refs.mask),e.removeClass(document.body,"p-overflow-hidden"))}},computed:{containerClass:function(){return["p-image p-component",this.className,{"p-image-preview-container":this.preview}]},maskClass:function(){return["p-image-mask p-component-overlay p-component-overlay-enter"]},rotateClass:function(){return"p-image-preview-rotate-"+this.rotate},imagePreviewStyle:function(){return{transform:"rotate("+this.rotate+"deg) scale("+this.scale+")"}},zoomDisabled:function(){return this.scale<=.5||this.scale>=1.5}}};function t(e,n,t,i,s,a,o,A,r,l){"boolean"!=typeof o&&(r=A,A=o,o=!1);const c="function"==typeof t?t.options:t;let p;if(e&&e.render&&(c.render=e.render,c.staticRenderFns=e.staticRenderFns,c._compiled=!0,s&&(c.functional=!0)),i&&(c._scopeId=i),a?(p=function(e){(e=e||this.$vnode&&this.$vnode.ssrContext||this.parent&&this.parent.$vnode&&this.parent.$vnode.ssrContext)||"undefined"==typeof __VUE_SSR_CONTEXT__||(e=__VUE_SSR_CONTEXT__),n&&n.call(this,r(e)),e&&e._registeredComponents&&e._registeredComponents.add(a)},c._ssrRegister=p):n&&(p=o?function(e){n.call(this,l(e,this.$root.$options.shadowRoot))}:function(e){n.call(this,A(e))}),p)if(c.functional){const e=c.render;c.render=function(n,t){return p.call(t),e(n,t)}}else{const e=c.beforeCreate;c.beforeCreate=e?[].concat(e,p):[p]}return t}const i="undefined"!=typeof navigator&&/msie [6-9]\\b/.test(navigator.userAgent.toLowerCase());function s(e){return(e,n)=>A(e,n)}let a;const o={};function A(e,n){const t=i?n.media||"default":e,s=o[t]||(o[t]={ids:new Set,styles:[]});if(!s.ids.has(e)){s.ids.add(e);let t=n.source;if(n.map&&(t+="\n/*# sourceURL="+n.map.sources[0]+" */",t+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(n.map))))+" */"),s.element||(s.element=document.createElement("style"),s.element.type="text/css",n.media&&s.element.setAttribute("media",n.media),void 0===a&&(a=document.head||document.getElementsByTagName("head")[0]),a.appendChild(s.element)),"styleSheet"in s.element)s.styles.push(t),s.element.styleSheet.cssText=s.styles.filter(Boolean).join("\n");else{const e=s.ids.size-1,n=document.createTextNode(t),i=s.element.childNodes;i[e]&&s.element.removeChild(i[e]),i.length?s.element.insertBefore(n,i[e]):s.element.appendChild(n)}}}var r=n,l=function(){var e=this,n=e._self._c||e.$createElement;return n("span",{ref:"container",class:e.containerClass,style:e.styles},[n("img",e._b({class:e.imageClass,style:e.imageStyle},"img",e.$attrs,!1)),e._v(" "),e.preview?n("div",{staticClass:"p-image-preview-indicator",on:{click:e.onImageClick}},[e._t("indicator",(function(){return[n("i",{staticClass:"p-image-preview-icon pi pi-eye"})]}))],2):e._e(),e._v(" "),e.maskVisible?n("div",{ref:"mask",class:e.maskClass,on:{click:e.onMaskClick}},[n("div",{staticClass:"p-image-toolbar"},[n("button",{staticClass:"p-image-action p-link",attrs:{type:"button"},on:{click:e.rotateRight}},[n("i",{staticClass:"pi pi-refresh"})]),e._v(" "),n("button",{staticClass:"p-image-action p-link",attrs:{type:"button"},on:{click:e.rotateLeft}},[n("i",{staticClass:"pi pi-undo"})]),e._v(" "),n("button",{staticClass:"p-image-action p-link",attrs:{type:"button",disabled:e.zoomDisabled},on:{click:e.zoomOut}},[n("i",{staticClass:"pi pi-search-minus"})]),e._v(" "),n("button",{staticClass:"p-image-action p-link",attrs:{type:"button",disabled:e.zoomDisabled},on:{click:e.zoomIn}},[n("i",{staticClass:"pi pi-search-plus"})]),e._v(" "),e._m(0)]),e._v(" "),n("transition",{attrs:{name:"p-image-preview"},on:{"before-enter":e.onBeforeEnter,enter:e.onEnter,leave:e.onLeave,"before-leave":e.onBeforeLeave,"after-leave":e.onAfterLeave}},[e.previewVisible?n("div",[n("img",{staticClass:"p-image-preview",style:e.imagePreviewStyle,attrs:{src:e.$attrs.src},on:{click:e.onPreviewImageClick}})]):e._e()])],1):e._e()])};l._withStripped=!0;var c=t({render:l,staticRenderFns:[function(){var e=this._self._c||this.$createElement;return e("button",{staticClass:"p-image-action p-link",attrs:{type:"button"}},[e("i",{staticClass:"pi pi-times"})])}]},(function(e){e&&e("data-v-3d07bcc5_0",{source:"\n.p-image-mask {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n}\n.p-image-preview-container {\n  position: relative;\n  display: inline-block;\n}\n.p-image-preview-indicator {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  opacity: 0;\n  -webkit-transition: opacity 0.3s;\n  transition: opacity 0.3s;\n}\n.p-image-preview-icon {\n  font-size: 1.5rem;\n}\n.p-image-preview-container:hover > .p-image-preview-indicator {\n  opacity: 1;\n  cursor: pointer;\n}\n.p-image-preview-container > img {\n  cursor: pointer;\n}\n.p-image-toolbar {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n}\n.p-image-action.p-link {\n  display: -webkit-box;\n  display: -webkit-flex;\n  display: -ms-flexbox;\n  display: flex;\n  -webkit-box-pack: center;\n  -webkit-justify-content: center;\n      -ms-flex-pack: center;\n          justify-content: center;\n  -webkit-box-align: center;\n  -webkit-align-items: center;\n      -ms-flex-align: center;\n          align-items: center;\n}\n.p-image-preview {\n  -webkit-transition: -webkit-transform 0.15s;\n  transition: -webkit-transform 0.15s;\n  transition: transform 0.15s;\n  transition: transform 0.15s, -webkit-transform 0.15s;\n  max-width: 100vw;\n  max-height: 100vh;\n}\n.p-image-preview-enter-active {\n  -webkit-transition: all 150ms cubic-bezier(0, 0, 0.2, 1);\n  transition: all 150ms cubic-bezier(0, 0, 0.2, 1);\n}\n.p-image-preview-leave-active {\n  -webkit-transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);\n  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n.p-image-preview-enter,\n.p-image-preview-leave-to {\n  opacity: 0;\n  -webkit-transform: scale(0.7);\n          transform: scale(0.7);\n}\n",map:{version:3,sources:["/Users/nangongpo/Desktop/我的开源/primevue2/src/components/imagepreview/ImagePreview.vue"],names:[],mappings:";AA2JA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,wBAAA;EAAA,+BAAA;MAAA,qBAAA;UAAA,uBAAA;AACA;AACA;EACA,kBAAA;EACA,qBAAA;AACA;AACA;EACA,kBAAA;EACA,OAAA;EACA,MAAA;EACA,WAAA;EACA,YAAA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;EACA,wBAAA;EAAA,+BAAA;MAAA,qBAAA;UAAA,uBAAA;EACA,UAAA;EACA,gCAAA;EAAA,wBAAA;AACA;AACA;EACA,iBAAA;AACA;AACA;EACA,UAAA;EACA,eAAA;AACA;AACA;EACA,eAAA;AACA;AACA;EACA,kBAAA;EACA,MAAA;EACA,QAAA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;AACA;AACA;EACA,oBAAA;EAAA,qBAAA;EAAA,oBAAA;EAAA,aAAA;EACA,wBAAA;EAAA,+BAAA;MAAA,qBAAA;UAAA,uBAAA;EACA,yBAAA;EAAA,2BAAA;MAAA,sBAAA;UAAA,mBAAA;AACA;AACA;EACA,2CAAA;EAAA,mCAAA;EAAA,2BAAA;EAAA,oDAAA;EACA,gBAAA;EACA,iBAAA;AACA;AACA;EACA,wDAAA;EAAA,gDAAA;AACA;AACA;EACA,0DAAA;EAAA,kDAAA;AACA;AACA;;EAEA,UAAA;EACA,6BAAA;UAAA,qBAAA;AACA",file:"ImagePreview.vue",sourcesContent:['<template>\n  <span ref="container" :class="containerClass" :style="styles">\n    <img v-bind="$attrs" :style="imageStyle" :class="imageClass" />\n    <div class="p-image-preview-indicator" v-if="preview" @click="onImageClick">\n      <slot name="indicator">\n        <i class="p-image-preview-icon pi pi-eye"></i>\n      </slot>\n    </div>\n    <div ref="mask" :class="maskClass" v-if="maskVisible" @click="onMaskClick">\n      <div class="p-image-toolbar">\n        <button class="p-image-action p-link" @click="rotateRight" type="button">\n          <i class="pi pi-refresh"></i>\n        </button>\n        <button class="p-image-action p-link" @click="rotateLeft" type="button">\n          <i class="pi pi-undo"></i>\n        </button>\n        <button class="p-image-action p-link" @click="zoomOut" type="button" :disabled="zoomDisabled">\n          <i class="pi pi-search-minus"></i>\n        </button>\n        <button class="p-image-action p-link" @click="zoomIn" type="button" :disabled="zoomDisabled">\n          <i class="pi pi-search-plus"></i>\n        </button>\n        <button class="p-image-action p-link" type="button">\n          <i class="pi pi-times"></i>\n        </button>\n      </div>\n      <transition\n        name="p-image-preview"\n        @before-enter="onBeforeEnter"\n        @enter="onEnter"\n        @leave="onLeave"\n        @before-leave="onBeforeLeave"\n        @after-leave="onAfterLeave">\n        <div v-if="previewVisible">\n          <img :src="$attrs.src" class="p-image-preview" :style="imagePreviewStyle" @click="onPreviewImageClick" />\n        </div>\n      </transition>\n    </div>\n  </span>\n</template>\n\n<script>\nimport { DomHandler } from \'primevue2/utils\'\nexport default {\n  name: \'ImagePreview\',\n  inheritAttrs: false,\n  props: {\n    preview: {\n      type: Boolean,\n      default: false\n    },\n    className: null,\n    styles: null,\n    imageStyle: null,\n    imageClass: null\n  },\n  mask: null,\n  data() {\n    return {\n      maskVisible: false,\n      previewVisible: false,\n      rotate: 0,\n      scale: 1\n    }\n  },\n  beforeDestroy() {\n    this.restoreAppend()\n  },\n  methods: {\n    onImageClick() {\n      if (this.preview) {\n        this.maskVisible = true\n        setTimeout(() => {\n          this.previewVisible = true\n        }, 25)\n      }\n    },\n    onPreviewImageClick() {\n      this.previewClick = true\n    },\n    onMaskClick() {\n      if (!this.previewClick) {\n        this.previewVisible = false\n        this.rotate = 0\n        this.scale = 1\n      }\n      this.previewClick = false\n      this.restoreAppend()\n    },\n    rotateRight() {\n      this.rotate += 90\n      this.previewClick = true\n    },\n    rotateLeft() {\n      this.rotate -= 90\n      this.previewClick = true\n    },\n    zoomIn() {\n      this.scale = this.scale + 0.1\n      this.previewClick = true\n    },\n    zoomOut() {\n      this.scale = this.scale - 0.1\n      this.previewClick = true\n    },\n    onBeforeEnter() {\n      this.$refs.mask.style.zIndex = String(DomHandler.generateZIndex())\n    },\n    onEnter() {\n      this.appendContainer()\n      this.$emit(\'show\')\n    },\n    onBeforeLeave() {\n      DomHandler.addClass(this.$refs.mask, \'p-component-overlay-leave\')\n    },\n    onLeave() {\n      this.$emit(\'hide\')\n    },\n    onAfterLeave() {\n      this.maskVisible = false\n    },\n    appendContainer() {\n      document.body.appendChild(this.$refs.mask)\n      DomHandler.addClass(document.body, \'p-overflow-hidden\')\n    },\n    restoreAppend() {\n      if (this.$refs.mask) {\n        document.body.removeChild(this.$refs.mask)\n        DomHandler.removeClass(document.body, \'p-overflow-hidden\')\n      }\n    }\n  },\n  computed: {\n    containerClass() {\n      return [\'p-image p-component\', this.className, {\n        \'p-image-preview-container\': this.preview\n      }]\n    },\n    maskClass() {\n      return [\'p-image-mask p-component-overlay p-component-overlay-enter\']\n    },\n    rotateClass() {\n      return \'p-image-preview-rotate-\' + this.rotate\n    },\n    imagePreviewStyle() {\n      return { transform: \'rotate(\' + this.rotate + \'deg) scale(\' + this.scale + \')\' }\n    },\n    zoomDisabled() {\n      return this.scale <= 0.5 || this.scale >= 1.5\n    }\n  }\n}\n<\/script>\n\n<style>\n.p-image-mask {\n  display: flex;\n  align-items: center;\n  justify-content: center;\n}\n.p-image-preview-container {\n  position: relative;\n  display: inline-block;\n}\n.p-image-preview-indicator {\n  position: absolute;\n  left: 0;\n  top: 0;\n  width: 100%;\n  height: 100%;\n  display: flex;\n  align-items: center;\n  justify-content: center;\n  opacity: 0;\n  transition: opacity 0.3s;\n}\n.p-image-preview-icon {\n  font-size: 1.5rem;\n}\n.p-image-preview-container:hover > .p-image-preview-indicator {\n  opacity: 1;\n  cursor: pointer;\n}\n.p-image-preview-container > img {\n  cursor: pointer;\n}\n.p-image-toolbar {\n  position: absolute;\n  top: 0;\n  right: 0;\n  display: flex;\n}\n.p-image-action.p-link {\n  display: flex;\n  justify-content: center;\n  align-items: center;\n}\n.p-image-preview {\n  transition: transform 0.15s;\n  max-width: 100vw;\n  max-height: 100vh;\n}\n.p-image-preview-enter-active {\n  transition: all 150ms cubic-bezier(0, 0, 0.2, 1);\n}\n.p-image-preview-leave-active {\n  transition: all 150ms cubic-bezier(0.4, 0, 0.2, 1);\n}\n.p-image-preview-enter,\n.p-image-preview-leave-to {\n  opacity: 0;\n  transform: scale(0.7);\n}\n</style>\n']},media:void 0})}),r,undefined,false,undefined,!1,s,void 0,void 0);export{c as default};
