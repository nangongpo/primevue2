{"version":3,"file":"Lazy-BTHyQgKn.js","sources":["../../src/doc/datatable/Lazy.vue","../../src/views/datatable/Lazy.vue"],"sourcesContent":["<template>\n  <div class=\"content-section documentation\">\n    <TabView>\n      <TabPanel header=\"Source\">\n        <DocSectionCode :code=\"baseCode\" />\n        <DocSectionCode :code=\"baseCode2\" importCode />\n      </TabPanel>\n    </TabView>\n  </div>\n</template>\n\n<script>\nexport default {\n  data() {\n    return {\n      baseCode: {\n        basic: `\n<DataTable :value=\"customers\" :lazy=\"true\" :paginator=\"true\" :rows=\"10\" :filters.sync=\"filters\" ref=\"dt\" dataKey=\"id\"\n    :totalRecords=\"totalRecords\" :loading=\"loading\" @page=\"onPage($event)\" @sort=\"onSort($event)\" @filter=\"onFilter($event)\" filterDisplay=\"row\"\n    :globalFilterFields=\"['name','country.name', 'company', 'representative.name']\" responsiveLayout=\"scroll\"\n    :selection.sync=\"selectedCustomers\" :selectAll=\"selectAll\" @select-all-change=\"onSelectAllChange\" @row-select=\"onRowSelect\" @row-unselect=\"onRowUnselect\" >\n    <Column selectionMode=\"multiple\" headerStyle=\"width: 3em\"></Column>\n    <Column field=\"name\" header=\"Name\" filterMatchMode=\"startsWith\" ref=\"name\" :sortable=\"true\">\n        <template #filter=\"{filterModel,filterCallback}\">\n            <InputText type=\"text\" v-model=\"filterModel.value\" @keydown.enter=\"filterCallback()\" class=\"p-column-filter\" placeholder=\"Search by name\"/>\n        </template>\n    </Column>\n    <Column field=\"country.name\" header=\"Country\" filterField=\"country.name\" filterMatchMode=\"contains\" ref=\"country.name\" :sortable=\"true\">\n        <template #filter=\"{filterModel,filterCallback}\">\n            <InputText type=\"text\" v-model=\"filterModel.value\" @keydown.enter=\"filterCallback()\" class=\"p-column-filter\" placeholder=\"Search by country\"/>\n        </template>\n    </Column>\n    <Column field=\"company\" header=\"Company\" filterMatchMode=\"contains\" ref=\"company\" :sortable=\"true\">\n        <template #filter=\"{filterModel,filterCallback}\">\n            <InputText type=\"text\" v-model=\"filterModel.value\" @keydown.enter=\"filterCallback()\" class=\"p-column-filter\" placeholder=\"Search by company\"/>\n        </template>\n    </Column>\n    <Column field=\"representative.name\" header=\"Representative\" filterField=\"representative.name\" ref=\"representative.name\" :sortable=\"true\">\n        <template #filter=\"{filterModel,filterCallback}\">\n            <InputText type=\"text\" v-model=\"filterModel.value\" @keydown.enter=\"filterCallback()\" class=\"p-column-filter\" placeholder=\"Search by representative\"/>\n        </template>\n    </Column>\n</DataTable>\n        `\n      },\n      baseCode2: {\n        basic: `\nimport CustomerService from '../../service/CustomerService';\n\nexport default {\n    data() {\n        return {\n            loading: false,\n            totalRecords: 0,\n            customers: null,\n            selectedCustomers: null,\n            selectAll: false,\n            filters: {\n                'name': {value: '', matchMode: 'contains'},\n                'country.name': {value: '', matchMode: 'contains'},\n                'company': {value: '', matchMode: 'contains'},\n                'representative.name': {value: '', matchMode: 'contains'},\n            },\n            lazyParams: {},\n            columns: [\n                {field: 'name', header: 'Name'},\n                {field: 'country.name', header: 'Country'},\n                {field: 'company', header: 'Company'},\n                {field: 'representative.name', header: 'Representative'}\n            ]\n        }\n    },\n    customerService: null,\n    created() {\n        this.customerService = new CustomerService();\n    },\n    mounted() {\n        this.loading = true;\n\n        this.lazyParams = {\n            first: 0,\n            rows: this.$refs.dt.rows,\n            sortField: null,\n            sortOrder: null,\n            filters: this.filters\n        };\n\n        this.loadLazyData();\n    },\n    methods: {\n        loadLazyData() {\n            this.loading = true;\n\n            setTimeout(() => {\n                this.customerService.getCustomers(\n                    {lazyEvent: JSON.stringify( this.lazyParams )})\n                        .then(data => {\n                            this.customers = data.customers;\n                            this.totalRecords = data.totalRecords;\n                            this.loading = false;\n                    }\n                );\n            }, Math.random() * 1000 + 250);\n        },\n        onPage(event) {\n            this.lazyParams = event;\n            this.loadLazyData();\n        },\n        onSort(event) {\n            this.lazyParams = event;\n            this.loadLazyData();\n        },\n        onFilter() {\n            this.lazyParams.filters = this.filters;\n            this.loadLazyData();\n        },\n        onSelectAllChange(event) {\n            const selectAll = event.checked;\n\n            if (selectAll) {\n                this.customerService.getCustomers().then(data => {\n                    this.selectAll = true;\n                    this.selectedCustomers = data.customers;\n                });\n            }\n            else {\n                this.selectAll = false;\n                this.selectedCustomers = [];\n            }\n        },\n        onRowSelect() {\n            this.selectAll = this.selectedCustomers.length === this.totalRecords\n        },\n        onRowUnselect() {\n            this.selectAll = false;\n        }\n    }\n}\n        `\n      },\n    }\n  }\n}\n</script>\n\n<style>\n</style>\n","<template>\n  <div>\n    <div class=\"content-section introduction\">\n      <div class=\"feature-intro\">\n        <h1>DataTable <span>Lazy</span></h1>\n        <p>\n          Lazy mode is handy to deal with large datasets, instead of loading the entire data, small chunks of data is\n          loaded by invoking corresponding callbacks everytime paging, sorting and filtering happens. Sample belows\n          imitates lazy paging by using an in memory list. It is also important to assign the logical number of rows to\n          totalRecords by doing a projection query for paginator configuration so that paginator displays the UI\n          assuming there are actually records of totalRecords size although in reality they aren't as in lazy mode, only\n          the records that are displayed on the current page exist. Also, the implementation of\n          <b>checkbox selection</b> in lazy tables is left entirely to the user. Since the DataTable does not know what\n          will happen to the data on the next page or whether there are instant data changes, the selection array can be\n          implemented in several ways. One of them is as in the example below.\n        </p>\n      </div>\n    </div>\n\n    <div class=\"content-section implementation\">\n      <div class=\"card\">\n        <DataTable\n          :value=\"customers\"\n          :lazy=\"true\"\n          :paginator=\"true\"\n          :rows=\"10\"\n          :filters.sync=\"filters\"\n          ref=\"dt\"\n          dataKey=\"id\"\n          :totalRecords=\"totalRecords\"\n          :loading=\"loading\"\n          @page=\"onPage($event)\"\n          @sort=\"onSort($event)\"\n          @filter=\"onFilter($event)\"\n          filterDisplay=\"row\"\n          :globalFilterFields=\"['name', 'country.name', 'company', 'representative.name']\"\n          responsiveLayout=\"scroll\"\n          :selection.sync=\"selectedCustomers\"\n          :selectAll=\"selectAll\"\n          @select-all-change=\"onSelectAllChange\"\n          @row-select=\"onRowSelect\"\n          @row-unselect=\"onRowUnselect\">\n          <Column selectionMode=\"multiple\" headerStyle=\"width: 3em\"></Column>\n          <Column field=\"name\" header=\"Name\" filterMatchMode=\"startsWith\" ref=\"name\" :sortable=\"true\">\n            <template #filter=\"{ filterModel, filterCallback }\">\n              <InputText\n                type=\"text\"\n                v-model=\"filterModel.value\"\n                @keydown.enter=\"filterCallback()\"\n                class=\"p-column-filter\"\n                placeholder=\"Search by name\" />\n            </template>\n          </Column>\n          <Column\n            field=\"country.name\"\n            header=\"Country\"\n            filterField=\"country.name\"\n            filterMatchMode=\"contains\"\n            ref=\"country.name\"\n            :sortable=\"true\">\n            <template #filter=\"{ filterModel, filterCallback }\">\n              <InputText\n                type=\"text\"\n                v-model=\"filterModel.value\"\n                @keydown.enter=\"filterCallback()\"\n                class=\"p-column-filter\"\n                placeholder=\"Search by country\" />\n            </template>\n          </Column>\n          <Column field=\"company\" header=\"Company\" filterMatchMode=\"contains\" ref=\"company\" :sortable=\"true\">\n            <template #filter=\"{ filterModel, filterCallback }\">\n              <InputText\n                type=\"text\"\n                v-model=\"filterModel.value\"\n                @keydown.enter=\"filterCallback()\"\n                class=\"p-column-filter\"\n                placeholder=\"Search by company\" />\n            </template>\n          </Column>\n          <Column\n            field=\"representative.name\"\n            header=\"Representative\"\n            filterField=\"representative.name\"\n            ref=\"representative.name\"\n            :sortable=\"true\">\n            <template #filter=\"{ filterModel, filterCallback }\">\n              <InputText\n                type=\"text\"\n                v-model=\"filterModel.value\"\n                @keydown.enter=\"filterCallback()\"\n                class=\"p-column-filter\"\n                placeholder=\"Search by representative\" />\n            </template>\n          </Column>\n        </DataTable>\n      </div>\n    </div>\n\n    <DataTableLazyDoc />\n  </div>\n</template>\n\n<script>\nimport DataTableLazyDoc from '@/doc/datatable/Lazy.vue'\nimport CustomerService from '../../service/CustomerService'\n\nexport default {\n  components: { DataTableLazyDoc },\n  data() {\n    return {\n      loading: false,\n      totalRecords: 0,\n      customers: null,\n      selectedCustomers: null,\n      selectAll: false,\n      filters: {\n        'name': { value: '', matchMode: 'contains' },\n        'country.name': { value: '', matchMode: 'contains' },\n        'company': { value: '', matchMode: 'contains' },\n        'representative.name': { value: '', matchMode: 'contains' },\n      },\n      lazyParams: {},\n      columns: [\n        { field: 'name', header: 'Name' },\n        { field: 'country.name', header: 'Country' },\n        { field: 'company', header: 'Company' },\n        { field: 'representative.name', header: 'Representative' }\n      ]\n    }\n  },\n  customerService: null,\n  created() {\n    this.customerService = new CustomerService()\n  },\n  mounted() {\n    this.loading = true\n\n    this.lazyParams = {\n      first: 0,\n      rows: this.$refs.dt.rows,\n      sortField: null,\n      sortOrder: null,\n      filters: this.filters\n    }\n\n    this.loadLazyData()\n  },\n  methods: {\n    loadLazyData() {\n      this.loading = true\n\n      setTimeout(() => {\n        // todo getCustomers请求失效，待替换\n        this.customerService.getCustomers(\n          { lazyEvent: JSON.stringify(this.lazyParams) })\n          .then(data => {\n            this.customers = data.customers\n            this.totalRecords = data.totalRecords\n            this.loading = false\n          }\n          )\n      }, Math.random() * 1000 + 250)\n    },\n    onPage(event) {\n      this.lazyParams = event\n      this.loadLazyData()\n    },\n    onSort(event) {\n      this.lazyParams = event\n      this.loadLazyData()\n    },\n    onFilter() {\n      this.lazyParams.filters = this.filters\n      this.loadLazyData()\n    },\n    onSelectAllChange(event) {\n      const selectAll = event.checked\n\n      if (selectAll) {\n        this.customerService.getCustomers().then(data => {\n          this.selectAll = true\n          this.selectedCustomers = data.customers\n        })\n      }\n      else {\n        this.selectAll = false\n        this.selectedCustomers = []\n      }\n    },\n    onRowSelect() {\n      this.selectAll = this.selectedCustomers.length === this.totalRecords\n    },\n    onRowUnselect() {\n      this.selectAll = false\n    }\n  }\n}\n</script>\n"],"names":["_sfc_main","DataTableLazyDoc","CustomerService","data","event"],"mappings":"oPAYA,MAAAA,EAAA,CACA,MAAA,CACA,MAAA,CACA,SAAA,CACA,MAAA,4lEA4BA,EACA,UAAA,CACA,MAAA,uzFA6FA,CACA,CACA,CACA,qUCpCAA,EAAA,CACA,WAAA,CAAA,iBAAAC,CAAA,EACA,MAAA,CACA,MAAA,CACA,QAAA,GACA,aAAA,EACA,UAAA,KACA,kBAAA,KACA,UAAA,GACA,QAAA,CACA,KAAA,CAAA,MAAA,GAAA,UAAA,UAAA,EACA,eAAA,CAAA,MAAA,GAAA,UAAA,UAAA,EACA,QAAA,CAAA,MAAA,GAAA,UAAA,UAAA,EACA,sBAAA,CAAA,MAAA,GAAA,UAAA,UAAA,CACA,EACA,WAAA,CAAA,EACA,QAAA,CACA,CAAA,MAAA,OAAA,OAAA,MAAA,EACA,CAAA,MAAA,eAAA,OAAA,SAAA,EACA,CAAA,MAAA,UAAA,OAAA,SAAA,EACA,CAAA,MAAA,sBAAA,OAAA,gBAAA,CACA,CACA,CACA,EACA,gBAAA,KACA,SAAA,CACA,KAAA,gBAAA,IAAAC,CACA,EACA,SAAA,CACA,KAAA,QAAA,GAEA,KAAA,WAAA,CACA,MAAA,EACA,KAAA,KAAA,MAAA,GAAA,KACA,UAAA,KACA,UAAA,KACA,QAAA,KAAA,OACA,EAEA,KAAA,aAAA,CACA,EACA,QAAA,CACA,cAAA,CACA,KAAA,QAAA,GAEA,WAAA,IAAA,CAEA,KAAA,gBAAA,aACA,CAAA,UAAA,KAAA,UAAA,KAAA,UAAA,CAAA,CAAA,EACA,KAAAC,GAAA,CACA,KAAA,UAAAA,EAAA,UACA,KAAA,aAAAA,EAAA,aACA,KAAA,QAAA,EACA,CACA,CACA,EAAA,KAAA,SAAA,IAAA,GAAA,CACA,EACA,OAAAC,EAAA,CACA,KAAA,WAAAA,EACA,KAAA,aAAA,CACA,EACA,OAAAA,EAAA,CACA,KAAA,WAAAA,EACA,KAAA,aAAA,CACA,EACA,UAAA,CACA,KAAA,WAAA,QAAA,KAAA,QACA,KAAA,aAAA,CACA,EACA,kBAAAA,EAAA,CACAA,EAAA,QAGA,KAAA,gBAAA,eAAA,KAAAD,GAAA,CACA,KAAA,UAAA,GACA,KAAA,kBAAAA,EAAA,SACA,CAAA,GAGA,KAAA,UAAA,GACA,KAAA,kBAAA,CAAA,EAEA,EACA,aAAA,CACA,KAAA,UAAA,KAAA,kBAAA,SAAA,KAAA,YACA,EACA,eAAA,CACA,KAAA,UAAA,EACA,CACA,CACA"}