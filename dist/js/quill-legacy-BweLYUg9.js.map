{"version":3,"file":"quill-legacy-BweLYUg9.js","sources":["../../node_modules/quill/blots/break.js","../../node_modules/quill/blots/text.js","../../node_modules/quill/blots/inline.js","../../node_modules/quill/blots/block.js","../../node_modules/quill/blots/cursor.js","../../node_modules/quill/node_modules/eventemitter3/index.js","../../node_modules/quill/core/instances.js","../../node_modules/quill/core/logger.js","../../node_modules/quill/core/emitter.js","../../node_modules/quill/core/selection.js","../../node_modules/quill/core/editor.js","../../node_modules/quill/core/module.js","../../node_modules/quill/blots/embed.js","../../node_modules/quill/core/composition.js","../../node_modules/quill/core/theme.js","../../node_modules/quill/core/utils/scrollRectIntoView.js","../../node_modules/quill/core/utils/createRegistryWithFormats.js","../../node_modules/quill/core/quill.js","../../node_modules/quill/blots/container.js","../../node_modules/quill/blots/scroll.js","../../node_modules/quill/formats/align.js","../../node_modules/quill/formats/color.js","../../node_modules/quill/formats/background.js","../../node_modules/quill/formats/code.js","../../node_modules/quill/formats/direction.js","../../node_modules/quill/formats/font.js","../../node_modules/quill/formats/size.js","../../node_modules/quill/modules/keyboard.js","../../node_modules/quill/modules/normalizeExternalHTML/normalizers/googleDocs.js","../../node_modules/quill/modules/normalizeExternalHTML/normalizers/msWord.js","../../node_modules/quill/modules/normalizeExternalHTML/index.js","../../node_modules/quill/modules/clipboard.js","../../node_modules/quill/modules/history.js","../../node_modules/quill/modules/uploader.js","../../node_modules/quill/modules/input.js","../../node_modules/quill/modules/uiNode.js","../../node_modules/quill/core.js","../../node_modules/quill/formats/indent.js","../../node_modules/quill/formats/blockquote.js","../../node_modules/quill/formats/header.js","../../node_modules/quill/formats/list.js","../../node_modules/quill/formats/bold.js","../../node_modules/quill/formats/italic.js","../../node_modules/quill/formats/link.js","../../node_modules/quill/formats/script.js","../../node_modules/quill/formats/strike.js","../../node_modules/quill/formats/underline.js","../../node_modules/quill/formats/formula.js","../../node_modules/quill/formats/image.js","../../node_modules/quill/formats/video.js","../../node_modules/quill/modules/syntax.js","../../node_modules/quill/formats/table.js","../../node_modules/quill/modules/table.js","../../node_modules/quill/modules/toolbar.js","../../node_modules/quill/ui/icons.js","../../node_modules/quill/ui/picker.js","../../node_modules/quill/ui/color-picker.js","../../node_modules/quill/ui/icon-picker.js","../../node_modules/quill/ui/tooltip.js","../../node_modules/quill/themes/base.js","../../node_modules/quill/themes/bubble.js","../../node_modules/quill/themes/snow.js","../../node_modules/quill/quill.js"],"sourcesContent":["import { EmbedBlot } from 'parchment';\nclass Break extends EmbedBlot {\n  static value() {\n    return undefined;\n  }\n  optimize() {\n    if (this.prev || this.next) {\n      this.remove();\n    }\n  }\n  length() {\n    return 0;\n  }\n  value() {\n    return '';\n  }\n}\nBreak.blotName = 'break';\nBreak.tagName = 'BR';\nexport default Break;\n//# sourceMappingURL=break.js.map","import { TextBlot } from 'parchment';\nclass Text extends TextBlot {}\nfunction escapeText(text) {\n  return text.replace(/[&<>\"']/g, s => {\n    // https://lodash.com/docs#escape\n    const entityMap = {\n      '&': '&amp;',\n      '<': '&lt;',\n      '>': '&gt;',\n      '\"': '&quot;',\n      \"'\": '&#39;'\n    };\n    return entityMap[s];\n  });\n}\nexport { Text as default, escapeText };\n//# sourceMappingURL=text.js.map","import { EmbedBlot, InlineBlot, Scope } from 'parchment';\nimport Break from './break.js';\nimport Text from './text.js';\nclass Inline extends InlineBlot {\n  static allowedChildren = [Inline, Break, EmbedBlot, Text];\n  // Lower index means deeper in the DOM tree, since not found (-1) is for embeds\n  static order = ['cursor', 'inline',\n  // Must be lower\n  'link',\n  // Chrome wants <a> to be lower\n  'underline', 'strike', 'italic', 'bold', 'script', 'code' // Must be higher\n  ];\n  static compare(self, other) {\n    const selfIndex = Inline.order.indexOf(self);\n    const otherIndex = Inline.order.indexOf(other);\n    if (selfIndex >= 0 || otherIndex >= 0) {\n      return selfIndex - otherIndex;\n    }\n    if (self === other) {\n      return 0;\n    }\n    if (self < other) {\n      return -1;\n    }\n    return 1;\n  }\n  formatAt(index, length, name, value) {\n    if (Inline.compare(this.statics.blotName, name) < 0 && this.scroll.query(name, Scope.BLOT)) {\n      const blot = this.isolate(index, length);\n      if (value) {\n        blot.wrap(name, value);\n      }\n    } else {\n      super.formatAt(index, length, name, value);\n    }\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent instanceof Inline && Inline.compare(this.statics.blotName, this.parent.statics.blotName) > 0) {\n      const parent = this.parent.isolate(this.offset(), this.length());\n      // @ts-expect-error TODO: make isolate generic\n      this.moveChildren(parent);\n      parent.wrap(this);\n    }\n  }\n}\nexport default Inline;\n//# sourceMappingURL=inline.js.map","import { AttributorStore, BlockBlot, EmbedBlot, LeafBlot, Scope } from 'parchment';\nimport Delta from 'quill-delta';\nimport Break from './break.js';\nimport Inline from './inline.js';\nimport TextBlot from './text.js';\nconst NEWLINE_LENGTH = 1;\nclass Block extends BlockBlot {\n  cache = {};\n  delta() {\n    if (this.cache.delta == null) {\n      this.cache.delta = blockDelta(this);\n    }\n    return this.cache.delta;\n  }\n  deleteAt(index, length) {\n    super.deleteAt(index, length);\n    this.cache = {};\n  }\n  formatAt(index, length, name, value) {\n    if (length <= 0) return;\n    if (this.scroll.query(name, Scope.BLOCK)) {\n      if (index + length === this.length()) {\n        this.format(name, value);\n      }\n    } else {\n      super.formatAt(index, Math.min(length, this.length() - index - 1), name, value);\n    }\n    this.cache = {};\n  }\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      this.cache = {};\n      return;\n    }\n    if (value.length === 0) return;\n    const lines = value.split('\\n');\n    const text = lines.shift();\n    if (text.length > 0) {\n      if (index < this.length() - 1 || this.children.tail == null) {\n        super.insertAt(Math.min(index, this.length() - 1), text);\n      } else {\n        this.children.tail.insertAt(this.children.tail.length(), text);\n      }\n      this.cache = {};\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let block = this;\n    lines.reduce((lineIndex, line) => {\n      // @ts-expect-error Fix me later\n      block = block.split(lineIndex, true);\n      block.insertAt(0, line);\n      return line.length;\n    }, index + text.length);\n  }\n  insertBefore(blot, ref) {\n    const {\n      head\n    } = this.children;\n    super.insertBefore(blot, ref);\n    if (head instanceof Break) {\n      head.remove();\n    }\n    this.cache = {};\n  }\n  length() {\n    if (this.cache.length == null) {\n      this.cache.length = super.length() + NEWLINE_LENGTH;\n    }\n    return this.cache.length;\n  }\n  moveChildren(target, ref) {\n    super.moveChildren(target, ref);\n    this.cache = {};\n  }\n  optimize(context) {\n    super.optimize(context);\n    this.cache = {};\n  }\n  path(index) {\n    return super.path(index, true);\n  }\n  removeChild(child) {\n    super.removeChild(child);\n    this.cache = {};\n  }\n  split(index) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (force && (index === 0 || index >= this.length() - NEWLINE_LENGTH)) {\n      const clone = this.clone();\n      if (index === 0) {\n        this.parent.insertBefore(clone, this);\n        return this;\n      }\n      this.parent.insertBefore(clone, this.next);\n      return clone;\n    }\n    const next = super.split(index, force);\n    this.cache = {};\n    return next;\n  }\n}\nBlock.blotName = 'block';\nBlock.tagName = 'P';\nBlock.defaultChild = Break;\nBlock.allowedChildren = [Break, Inline, EmbedBlot, TextBlot];\nclass BlockEmbed extends EmbedBlot {\n  attach() {\n    super.attach();\n    this.attributes = new AttributorStore(this.domNode);\n  }\n  delta() {\n    return new Delta().insert(this.value(), {\n      ...this.formats(),\n      ...this.attributes.values()\n    });\n  }\n  format(name, value) {\n    const attribute = this.scroll.query(name, Scope.BLOCK_ATTRIBUTE);\n    if (attribute != null) {\n      // @ts-expect-error TODO: Scroll#query() should return Attributor when scope is attribute\n      this.attributes.attribute(attribute, value);\n    }\n  }\n  formatAt(index, length, name, value) {\n    this.format(name, value);\n  }\n  insertAt(index, value, def) {\n    if (def != null) {\n      super.insertAt(index, value, def);\n      return;\n    }\n    const lines = value.split('\\n');\n    const text = lines.pop();\n    const blocks = lines.map(line => {\n      const block = this.scroll.create(Block.blotName);\n      block.insertAt(0, line);\n      return block;\n    });\n    const ref = this.split(index);\n    blocks.forEach(block => {\n      this.parent.insertBefore(block, ref);\n    });\n    if (text) {\n      this.parent.insertBefore(this.scroll.create('text', text), ref);\n    }\n  }\n}\nBlockEmbed.scope = Scope.BLOCK_BLOT;\n// It is important for cursor behavior BlockEmbeds use tags that are block level elements\n\nfunction blockDelta(blot) {\n  let filter = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;\n  return blot.descendants(LeafBlot).reduce((delta, leaf) => {\n    if (leaf.length() === 0) {\n      return delta;\n    }\n    return delta.insert(leaf.value(), bubbleFormats(leaf, {}, filter));\n  }, new Delta()).insert('\\n', bubbleFormats(blot));\n}\nfunction bubbleFormats(blot) {\n  let formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n  let filter = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : true;\n  if (blot == null) return formats;\n  if ('formats' in blot && typeof blot.formats === 'function') {\n    formats = {\n      ...formats,\n      ...blot.formats()\n    };\n    if (filter) {\n      // exclude syntax highlighting from deltas and getFormat()\n      delete formats['code-token'];\n    }\n  }\n  if (blot.parent == null || blot.parent.statics.blotName === 'scroll' || blot.parent.statics.scope !== blot.statics.scope) {\n    return formats;\n  }\n  return bubbleFormats(blot.parent, formats, filter);\n}\nexport { blockDelta, bubbleFormats, BlockEmbed, Block as default };\n//# sourceMappingURL=block.js.map","import { EmbedBlot, Scope } from 'parchment';\nimport TextBlot from './text.js';\nclass Cursor extends EmbedBlot {\n  static blotName = 'cursor';\n  static className = 'ql-cursor';\n  static tagName = 'span';\n  static CONTENTS = '\\uFEFF'; // Zero width no break space\n\n  static value() {\n    return undefined;\n  }\n  constructor(scroll, domNode, selection) {\n    super(scroll, domNode);\n    this.selection = selection;\n    this.textNode = document.createTextNode(Cursor.CONTENTS);\n    this.domNode.appendChild(this.textNode);\n    this.savedLength = 0;\n  }\n  detach() {\n    // super.detach() will also clear domNode.__blot\n    if (this.parent != null) this.parent.removeChild(this);\n  }\n  format(name, value) {\n    if (this.savedLength !== 0) {\n      super.format(name, value);\n      return;\n    }\n    // TODO: Fix this next time the file is edited.\n    // eslint-disable-next-line @typescript-eslint/no-this-alias\n    let target = this;\n    let index = 0;\n    while (target != null && target.statics.scope !== Scope.BLOCK_BLOT) {\n      index += target.offset(target.parent);\n      target = target.parent;\n    }\n    if (target != null) {\n      this.savedLength = Cursor.CONTENTS.length;\n      // @ts-expect-error TODO: allow empty context in Parchment\n      target.optimize();\n      target.formatAt(index, Cursor.CONTENTS.length, name, value);\n      this.savedLength = 0;\n    }\n  }\n  index(node, offset) {\n    if (node === this.textNode) return 0;\n    return super.index(node, offset);\n  }\n  length() {\n    return this.savedLength;\n  }\n  position() {\n    return [this.textNode, this.textNode.data.length];\n  }\n  remove() {\n    super.remove();\n    // @ts-expect-error Fix me later\n    this.parent = null;\n  }\n  restore() {\n    if (this.selection.composing || this.parent == null) return null;\n    const range = this.selection.getNativeRange();\n    // Browser may push down styles/nodes inside the cursor blot.\n    // https://dvcs.w3.org/hg/editing/raw-file/tip/editing.html#push-down-values\n    while (this.domNode.lastChild != null && this.domNode.lastChild !== this.textNode) {\n      // @ts-expect-error Fix me later\n      this.domNode.parentNode.insertBefore(this.domNode.lastChild, this.domNode);\n    }\n    const prevTextBlot = this.prev instanceof TextBlot ? this.prev : null;\n    const prevTextLength = prevTextBlot ? prevTextBlot.length() : 0;\n    const nextTextBlot = this.next instanceof TextBlot ? this.next : null;\n    // @ts-expect-error TODO: make TextBlot.text public\n    const nextText = nextTextBlot ? nextTextBlot.text : '';\n    const {\n      textNode\n    } = this;\n    // take text from inside this blot and reset it\n    const newText = textNode.data.split(Cursor.CONTENTS).join('');\n    textNode.data = Cursor.CONTENTS;\n\n    // proactively merge TextBlots around cursor so that optimization\n    // doesn't lose the cursor.  the reason we are here in cursor.restore\n    // could be that the user clicked in prevTextBlot or nextTextBlot, or\n    // the user typed something.\n    let mergedTextBlot;\n    if (prevTextBlot) {\n      mergedTextBlot = prevTextBlot;\n      if (newText || nextTextBlot) {\n        prevTextBlot.insertAt(prevTextBlot.length(), newText + nextText);\n        if (nextTextBlot) {\n          nextTextBlot.remove();\n        }\n      }\n    } else if (nextTextBlot) {\n      mergedTextBlot = nextTextBlot;\n      nextTextBlot.insertAt(0, newText);\n    } else {\n      const newTextNode = document.createTextNode(newText);\n      mergedTextBlot = this.scroll.create(newTextNode);\n      this.parent.insertBefore(mergedTextBlot, this);\n    }\n    this.remove();\n    if (range) {\n      // calculate selection to restore\n      const remapOffset = (node, offset) => {\n        if (prevTextBlot && node === prevTextBlot.domNode) {\n          return offset;\n        }\n        if (node === textNode) {\n          return prevTextLength + offset - 1;\n        }\n        if (nextTextBlot && node === nextTextBlot.domNode) {\n          return prevTextLength + newText.length + offset;\n        }\n        return null;\n      };\n      const start = remapOffset(range.start.node, range.start.offset);\n      const end = remapOffset(range.end.node, range.end.offset);\n      if (start !== null && end !== null) {\n        return {\n          startNode: mergedTextBlot.domNode,\n          startOffset: start,\n          endNode: mergedTextBlot.domNode,\n          endOffset: end\n        };\n      }\n    }\n    return null;\n  }\n  update(mutations, context) {\n    if (mutations.some(mutation => {\n      return mutation.type === 'characterData' && mutation.target === this.textNode;\n    })) {\n      const range = this.restore();\n      if (range) context.range = range;\n    }\n  }\n\n  // Avoid .ql-cursor being a descendant of `<a/>`.\n  // The reason is Safari pushes down `<a/>` on text insertion.\n  // That will cause DOM nodes not sync with the model.\n  //\n  // For example ({I} is the caret), given the markup:\n  //    <a><span class=\"ql-cursor\">\\uFEFF{I}</span></a>\n  // When typing a char \"x\", `<a/>` will be pushed down inside the `<span>` first:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF{I}</a></span>\n  // And then \"x\" will be inserted after `<a/>`:\n  //    <span class=\"ql-cursor\"><a>\\uFEFF</a>d{I}</span>\n  optimize(context) {\n    // @ts-expect-error Fix me later\n    super.optimize(context);\n    let {\n      parent\n    } = this;\n    while (parent) {\n      if (parent.domNode.tagName === 'A') {\n        this.savedLength = Cursor.CONTENTS.length;\n        // @ts-expect-error TODO: make isolate generic\n        parent.isolate(this.offset(parent), this.length()).unwrap();\n        this.savedLength = 0;\n        break;\n      }\n      parent = parent.parent;\n    }\n  }\n  value() {\n    return '';\n  }\n}\nexport default Cursor;\n//# sourceMappingURL=cursor.js.map","'use strict';\n\nvar has = Object.prototype.hasOwnProperty\n  , prefix = '~';\n\n/**\n * Constructor to create a storage for our `EE` objects.\n * An `Events` instance is a plain object whose properties are event names.\n *\n * @constructor\n * @private\n */\nfunction Events() {}\n\n//\n// We try to not inherit from `Object.prototype`. In some engines creating an\n// instance in this way is faster than calling `Object.create(null)` directly.\n// If `Object.create(null)` is not supported we prefix the event names with a\n// character to make sure that the built-in object properties are not\n// overridden or used as an attack vector.\n//\nif (Object.create) {\n  Events.prototype = Object.create(null);\n\n  //\n  // This hack is needed because the `__proto__` property is still inherited in\n  // some old browsers like Android 4, iPhone 5.1, Opera 11 and Safari 5.\n  //\n  if (!new Events().__proto__) prefix = false;\n}\n\n/**\n * Representation of a single event listener.\n *\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} [once=false] Specify if the listener is a one-time listener.\n * @constructor\n * @private\n */\nfunction EE(fn, context, once) {\n  this.fn = fn;\n  this.context = context;\n  this.once = once || false;\n}\n\n/**\n * Add a listener for a given event.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} context The context to invoke the listener with.\n * @param {Boolean} once Specify if the listener is a one-time listener.\n * @returns {EventEmitter}\n * @private\n */\nfunction addListener(emitter, event, fn, context, once) {\n  if (typeof fn !== 'function') {\n    throw new TypeError('The listener must be a function');\n  }\n\n  var listener = new EE(fn, context || emitter, once)\n    , evt = prefix ? prefix + event : event;\n\n  if (!emitter._events[evt]) emitter._events[evt] = listener, emitter._eventsCount++;\n  else if (!emitter._events[evt].fn) emitter._events[evt].push(listener);\n  else emitter._events[evt] = [emitter._events[evt], listener];\n\n  return emitter;\n}\n\n/**\n * Clear event by name.\n *\n * @param {EventEmitter} emitter Reference to the `EventEmitter` instance.\n * @param {(String|Symbol)} evt The Event name.\n * @private\n */\nfunction clearEvent(emitter, evt) {\n  if (--emitter._eventsCount === 0) emitter._events = new Events();\n  else delete emitter._events[evt];\n}\n\n/**\n * Minimal `EventEmitter` interface that is molded against the Node.js\n * `EventEmitter` interface.\n *\n * @constructor\n * @public\n */\nfunction EventEmitter() {\n  this._events = new Events();\n  this._eventsCount = 0;\n}\n\n/**\n * Return an array listing the events for which the emitter has registered\n * listeners.\n *\n * @returns {Array}\n * @public\n */\nEventEmitter.prototype.eventNames = function eventNames() {\n  var names = []\n    , events\n    , name;\n\n  if (this._eventsCount === 0) return names;\n\n  for (name in (events = this._events)) {\n    if (has.call(events, name)) names.push(prefix ? name.slice(1) : name);\n  }\n\n  if (Object.getOwnPropertySymbols) {\n    return names.concat(Object.getOwnPropertySymbols(events));\n  }\n\n  return names;\n};\n\n/**\n * Return the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Array} The registered listeners.\n * @public\n */\nEventEmitter.prototype.listeners = function listeners(event) {\n  var evt = prefix ? prefix + event : event\n    , handlers = this._events[evt];\n\n  if (!handlers) return [];\n  if (handlers.fn) return [handlers.fn];\n\n  for (var i = 0, l = handlers.length, ee = new Array(l); i < l; i++) {\n    ee[i] = handlers[i].fn;\n  }\n\n  return ee;\n};\n\n/**\n * Return the number of listeners listening to a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Number} The number of listeners.\n * @public\n */\nEventEmitter.prototype.listenerCount = function listenerCount(event) {\n  var evt = prefix ? prefix + event : event\n    , listeners = this._events[evt];\n\n  if (!listeners) return 0;\n  if (listeners.fn) return 1;\n  return listeners.length;\n};\n\n/**\n * Calls each of the listeners registered for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @returns {Boolean} `true` if the event had listeners, else `false`.\n * @public\n */\nEventEmitter.prototype.emit = function emit(event, a1, a2, a3, a4, a5) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return false;\n\n  var listeners = this._events[evt]\n    , len = arguments.length\n    , args\n    , i;\n\n  if (listeners.fn) {\n    if (listeners.once) this.removeListener(event, listeners.fn, undefined, true);\n\n    switch (len) {\n      case 1: return listeners.fn.call(listeners.context), true;\n      case 2: return listeners.fn.call(listeners.context, a1), true;\n      case 3: return listeners.fn.call(listeners.context, a1, a2), true;\n      case 4: return listeners.fn.call(listeners.context, a1, a2, a3), true;\n      case 5: return listeners.fn.call(listeners.context, a1, a2, a3, a4), true;\n      case 6: return listeners.fn.call(listeners.context, a1, a2, a3, a4, a5), true;\n    }\n\n    for (i = 1, args = new Array(len -1); i < len; i++) {\n      args[i - 1] = arguments[i];\n    }\n\n    listeners.fn.apply(listeners.context, args);\n  } else {\n    var length = listeners.length\n      , j;\n\n    for (i = 0; i < length; i++) {\n      if (listeners[i].once) this.removeListener(event, listeners[i].fn, undefined, true);\n\n      switch (len) {\n        case 1: listeners[i].fn.call(listeners[i].context); break;\n        case 2: listeners[i].fn.call(listeners[i].context, a1); break;\n        case 3: listeners[i].fn.call(listeners[i].context, a1, a2); break;\n        case 4: listeners[i].fn.call(listeners[i].context, a1, a2, a3); break;\n        default:\n          if (!args) for (j = 1, args = new Array(len -1); j < len; j++) {\n            args[j - 1] = arguments[j];\n          }\n\n          listeners[i].fn.apply(listeners[i].context, args);\n      }\n    }\n  }\n\n  return true;\n};\n\n/**\n * Add a listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.on = function on(event, fn, context) {\n  return addListener(this, event, fn, context, false);\n};\n\n/**\n * Add a one-time listener for a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn The listener function.\n * @param {*} [context=this] The context to invoke the listener with.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.once = function once(event, fn, context) {\n  return addListener(this, event, fn, context, true);\n};\n\n/**\n * Remove the listeners of a given event.\n *\n * @param {(String|Symbol)} event The event name.\n * @param {Function} fn Only remove the listeners that match this function.\n * @param {*} context Only remove the listeners that have this context.\n * @param {Boolean} once Only remove one-time listeners.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeListener = function removeListener(event, fn, context, once) {\n  var evt = prefix ? prefix + event : event;\n\n  if (!this._events[evt]) return this;\n  if (!fn) {\n    clearEvent(this, evt);\n    return this;\n  }\n\n  var listeners = this._events[evt];\n\n  if (listeners.fn) {\n    if (\n      listeners.fn === fn &&\n      (!once || listeners.once) &&\n      (!context || listeners.context === context)\n    ) {\n      clearEvent(this, evt);\n    }\n  } else {\n    for (var i = 0, events = [], length = listeners.length; i < length; i++) {\n      if (\n        listeners[i].fn !== fn ||\n        (once && !listeners[i].once) ||\n        (context && listeners[i].context !== context)\n      ) {\n        events.push(listeners[i]);\n      }\n    }\n\n    //\n    // Reset the array, or remove it completely if we have no more listeners.\n    //\n    if (events.length) this._events[evt] = events.length === 1 ? events[0] : events;\n    else clearEvent(this, evt);\n  }\n\n  return this;\n};\n\n/**\n * Remove all listeners, or those of the specified event.\n *\n * @param {(String|Symbol)} [event] The event name.\n * @returns {EventEmitter} `this`.\n * @public\n */\nEventEmitter.prototype.removeAllListeners = function removeAllListeners(event) {\n  var evt;\n\n  if (event) {\n    evt = prefix ? prefix + event : event;\n    if (this._events[evt]) clearEvent(this, evt);\n  } else {\n    this._events = new Events();\n    this._eventsCount = 0;\n  }\n\n  return this;\n};\n\n//\n// Alias methods names because people roll like that.\n//\nEventEmitter.prototype.off = EventEmitter.prototype.removeListener;\nEventEmitter.prototype.addListener = EventEmitter.prototype.on;\n\n//\n// Expose the prefix.\n//\nEventEmitter.prefixed = prefix;\n\n//\n// Allow `EventEmitter` to be imported as module namespace.\n//\nEventEmitter.EventEmitter = EventEmitter;\n\n//\n// Expose the module.\n//\nif ('undefined' !== typeof module) {\n  module.exports = EventEmitter;\n}\n","export default new WeakMap();\n//# sourceMappingURL=instances.js.map","const levels = ['error', 'warn', 'log', 'info'];\nlet level = 'warn';\nfunction debug(method) {\n  if (level) {\n    if (levels.indexOf(method) <= levels.indexOf(level)) {\n      for (var _len = arguments.length, args = new Array(_len > 1 ? _len - 1 : 0), _key = 1; _key < _len; _key++) {\n        args[_key - 1] = arguments[_key];\n      }\n      console[method](...args); // eslint-disable-line no-console\n    }\n  }\n}\nfunction namespace(ns) {\n  return levels.reduce((logger, method) => {\n    logger[method] = debug.bind(console, method, ns);\n    return logger;\n  }, {});\n}\nnamespace.level = newLevel => {\n  level = newLevel;\n};\ndebug.level = namespace.level;\nexport default namespace;\n//# sourceMappingURL=logger.js.map","import { EventEmitter } from 'eventemitter3';\nimport instances from './instances.js';\nimport logger from './logger.js';\nconst debug = logger('quill:events');\nconst EVENTS = ['selectionchange', 'mousedown', 'mouseup', 'click'];\nEVENTS.forEach(eventName => {\n  document.addEventListener(eventName, function () {\n    for (var _len = arguments.length, args = new Array(_len), _key = 0; _key < _len; _key++) {\n      args[_key] = arguments[_key];\n    }\n    Array.from(document.querySelectorAll('.ql-container')).forEach(node => {\n      const quill = instances.get(node);\n      if (quill && quill.emitter) {\n        quill.emitter.handleDOM(...args);\n      }\n    });\n  });\n});\nclass Emitter extends EventEmitter {\n  static events = {\n    EDITOR_CHANGE: 'editor-change',\n    SCROLL_BEFORE_UPDATE: 'scroll-before-update',\n    SCROLL_BLOT_MOUNT: 'scroll-blot-mount',\n    SCROLL_BLOT_UNMOUNT: 'scroll-blot-unmount',\n    SCROLL_OPTIMIZE: 'scroll-optimize',\n    SCROLL_UPDATE: 'scroll-update',\n    SCROLL_EMBED_UPDATE: 'scroll-embed-update',\n    SELECTION_CHANGE: 'selection-change',\n    TEXT_CHANGE: 'text-change',\n    COMPOSITION_BEFORE_START: 'composition-before-start',\n    COMPOSITION_START: 'composition-start',\n    COMPOSITION_BEFORE_END: 'composition-before-end',\n    COMPOSITION_END: 'composition-end'\n  };\n  static sources = {\n    API: 'api',\n    SILENT: 'silent',\n    USER: 'user'\n  };\n  constructor() {\n    super();\n    this.domListeners = {};\n    this.on('error', debug.error);\n  }\n  emit() {\n    for (var _len2 = arguments.length, args = new Array(_len2), _key2 = 0; _key2 < _len2; _key2++) {\n      args[_key2] = arguments[_key2];\n    }\n    debug.log.call(debug, ...args);\n    // @ts-expect-error\n    return super.emit(...args);\n  }\n  handleDOM(event) {\n    for (var _len3 = arguments.length, args = new Array(_len3 > 1 ? _len3 - 1 : 0), _key3 = 1; _key3 < _len3; _key3++) {\n      args[_key3 - 1] = arguments[_key3];\n    }\n    (this.domListeners[event.type] || []).forEach(_ref => {\n      let {\n        node,\n        handler\n      } = _ref;\n      if (event.target === node || node.contains(event.target)) {\n        handler(event, ...args);\n      }\n    });\n  }\n  listenDOM(eventName, node, handler) {\n    if (!this.domListeners[eventName]) {\n      this.domListeners[eventName] = [];\n    }\n    this.domListeners[eventName].push({\n      node,\n      handler\n    });\n  }\n}\nexport default Emitter;\n//# sourceMappingURL=emitter.js.map","import { LeafBlot, Scope } from 'parchment';\nimport { cloneDeep, isEqual } from 'lodash-es';\nimport Emitter from './emitter.js';\nimport logger from './logger.js';\nconst debug = logger('quill:selection');\nexport class Range {\n  constructor(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    this.index = index;\n    this.length = length;\n  }\n}\nclass Selection {\n  constructor(scroll, emitter) {\n    this.emitter = emitter;\n    this.scroll = scroll;\n    this.composing = false;\n    this.mouseDown = false;\n    this.root = this.scroll.domNode;\n    // @ts-expect-error\n    this.cursor = this.scroll.create('cursor', this);\n    // savedRange is last non-null range\n    this.savedRange = new Range(0, 0);\n    this.lastRange = this.savedRange;\n    this.lastNative = null;\n    this.handleComposition();\n    this.handleDragging();\n    this.emitter.listenDOM('selectionchange', document, () => {\n      if (!this.mouseDown && !this.composing) {\n        setTimeout(this.update.bind(this, Emitter.sources.USER), 1);\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_BEFORE_UPDATE, () => {\n      if (!this.hasFocus()) return;\n      const native = this.getNativeRange();\n      if (native == null) return;\n      if (native.start.node === this.cursor.textNode) return; // cursor.restore() will handle\n      this.emitter.once(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n        try {\n          if (this.root.contains(native.start.node) && this.root.contains(native.end.node)) {\n            this.setNativeRange(native.start.node, native.start.offset, native.end.node, native.end.offset);\n          }\n          const triggeredByTyping = mutations.some(mutation => mutation.type === 'characterData' || mutation.type === 'childList' || mutation.type === 'attributes' && mutation.target === this.root);\n          this.update(triggeredByTyping ? Emitter.sources.SILENT : source);\n        } catch (ignored) {\n          // ignore\n        }\n      });\n    });\n    this.emitter.on(Emitter.events.SCROLL_OPTIMIZE, (mutations, context) => {\n      if (context.range) {\n        const {\n          startNode,\n          startOffset,\n          endNode,\n          endOffset\n        } = context.range;\n        this.setNativeRange(startNode, startOffset, endNode, endOffset);\n        this.update(Emitter.sources.SILENT);\n      }\n    });\n    this.update(Emitter.sources.SILENT);\n  }\n  handleComposition() {\n    this.emitter.on(Emitter.events.COMPOSITION_BEFORE_START, () => {\n      this.composing = true;\n    });\n    this.emitter.on(Emitter.events.COMPOSITION_END, () => {\n      this.composing = false;\n      if (this.cursor.parent) {\n        const range = this.cursor.restore();\n        if (!range) return;\n        setTimeout(() => {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }, 1);\n      }\n    });\n  }\n  handleDragging() {\n    this.emitter.listenDOM('mousedown', document.body, () => {\n      this.mouseDown = true;\n    });\n    this.emitter.listenDOM('mouseup', document.body, () => {\n      this.mouseDown = false;\n      this.update(Emitter.sources.USER);\n    });\n  }\n  focus() {\n    if (this.hasFocus()) return;\n    this.root.focus({\n      preventScroll: true\n    });\n    this.setRange(this.savedRange);\n  }\n  format(format, value) {\n    this.scroll.update();\n    const nativeRange = this.getNativeRange();\n    if (nativeRange == null || !nativeRange.native.collapsed || this.scroll.query(format, Scope.BLOCK)) return;\n    if (nativeRange.start.node !== this.cursor.textNode) {\n      const blot = this.scroll.find(nativeRange.start.node, false);\n      if (blot == null) return;\n      // TODO Give blot ability to not split\n      if (blot instanceof LeafBlot) {\n        const after = blot.split(nativeRange.start.offset);\n        blot.parent.insertBefore(this.cursor, after);\n      } else {\n        // @ts-expect-error TODO: nativeRange.start.node doesn't seem to match function signature\n        blot.insertBefore(this.cursor, nativeRange.start.node); // Should never happen\n      }\n      this.cursor.attach();\n    }\n    this.cursor.format(format, value);\n    this.scroll.optimize();\n    this.setNativeRange(this.cursor.textNode, this.cursor.textNode.data.length);\n    this.update();\n  }\n  getBounds(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    const scrollLength = this.scroll.length();\n    index = Math.min(index, scrollLength - 1);\n    length = Math.min(index + length, scrollLength - 1) - index;\n    let node;\n    let [leaf, offset] = this.scroll.leaf(index);\n    if (leaf == null) return null;\n    if (length > 0 && offset === leaf.length()) {\n      const [next] = this.scroll.leaf(index + 1);\n      if (next) {\n        const [line] = this.scroll.line(index);\n        const [nextLine] = this.scroll.line(index + 1);\n        if (line === nextLine) {\n          leaf = next;\n          offset = 0;\n        }\n      }\n    }\n    [node, offset] = leaf.position(offset, true);\n    const range = document.createRange();\n    if (length > 0) {\n      range.setStart(node, offset);\n      [leaf, offset] = this.scroll.leaf(index + length);\n      if (leaf == null) return null;\n      [node, offset] = leaf.position(offset, true);\n      range.setEnd(node, offset);\n      return range.getBoundingClientRect();\n    }\n    let side = 'left';\n    let rect;\n    if (node instanceof Text) {\n      // Return null if the text node is empty because it is\n      // not able to get a useful client rect:\n      // https://github.com/w3c/csswg-drafts/issues/2514.\n      // Empty text nodes are most likely caused by TextBlot#optimize()\n      // not getting called when editor content changes.\n      if (!node.data.length) {\n        return null;\n      }\n      if (offset < node.data.length) {\n        range.setStart(node, offset);\n        range.setEnd(node, offset + 1);\n      } else {\n        range.setStart(node, offset - 1);\n        range.setEnd(node, offset);\n        side = 'right';\n      }\n      rect = range.getBoundingClientRect();\n    } else {\n      if (!(leaf.domNode instanceof Element)) return null;\n      rect = leaf.domNode.getBoundingClientRect();\n      if (offset > 0) side = 'right';\n    }\n    return {\n      bottom: rect.top + rect.height,\n      height: rect.height,\n      left: rect[side],\n      right: rect[side],\n      top: rect.top,\n      width: 0\n    };\n  }\n  getNativeRange() {\n    const selection = document.getSelection();\n    if (selection == null || selection.rangeCount <= 0) return null;\n    const nativeRange = selection.getRangeAt(0);\n    if (nativeRange == null) return null;\n    const range = this.normalizeNative(nativeRange);\n    debug.info('getNativeRange', range);\n    return range;\n  }\n  getRange() {\n    const root = this.scroll.domNode;\n    if ('isConnected' in root && !root.isConnected) {\n      // document.getSelection() forces layout on Blink, so we trend to\n      // not calling it.\n      return [null, null];\n    }\n    const normalized = this.getNativeRange();\n    if (normalized == null) return [null, null];\n    const range = this.normalizedToRange(normalized);\n    return [range, normalized];\n  }\n  hasFocus() {\n    return document.activeElement === this.root || document.activeElement != null && contains(this.root, document.activeElement);\n  }\n  normalizedToRange(range) {\n    const positions = [[range.start.node, range.start.offset]];\n    if (!range.native.collapsed) {\n      positions.push([range.end.node, range.end.offset]);\n    }\n    const indexes = positions.map(position => {\n      const [node, offset] = position;\n      const blot = this.scroll.find(node, true);\n      // @ts-expect-error Fix me later\n      const index = blot.offset(this.scroll);\n      if (offset === 0) {\n        return index;\n      }\n      if (blot instanceof LeafBlot) {\n        return index + blot.index(node, offset);\n      }\n      // @ts-expect-error Fix me later\n      return index + blot.length();\n    });\n    const end = Math.min(Math.max(...indexes), this.scroll.length() - 1);\n    const start = Math.min(end, ...indexes);\n    return new Range(start, end - start);\n  }\n  normalizeNative(nativeRange) {\n    if (!contains(this.root, nativeRange.startContainer) || !nativeRange.collapsed && !contains(this.root, nativeRange.endContainer)) {\n      return null;\n    }\n    const range = {\n      start: {\n        node: nativeRange.startContainer,\n        offset: nativeRange.startOffset\n      },\n      end: {\n        node: nativeRange.endContainer,\n        offset: nativeRange.endOffset\n      },\n      native: nativeRange\n    };\n    [range.start, range.end].forEach(position => {\n      let {\n        node,\n        offset\n      } = position;\n      while (!(node instanceof Text) && node.childNodes.length > 0) {\n        if (node.childNodes.length > offset) {\n          node = node.childNodes[offset];\n          offset = 0;\n        } else if (node.childNodes.length === offset) {\n          // @ts-expect-error Fix me later\n          node = node.lastChild;\n          if (node instanceof Text) {\n            offset = node.data.length;\n          } else if (node.childNodes.length > 0) {\n            // Container case\n            offset = node.childNodes.length;\n          } else {\n            // Embed case\n            offset = node.childNodes.length + 1;\n          }\n        } else {\n          break;\n        }\n      }\n      position.node = node;\n      position.offset = offset;\n    });\n    return range;\n  }\n  rangeToNative(range) {\n    const scrollLength = this.scroll.length();\n    const getPosition = (index, inclusive) => {\n      index = Math.min(scrollLength - 1, index);\n      const [leaf, leafOffset] = this.scroll.leaf(index);\n      return leaf ? leaf.position(leafOffset, inclusive) : [null, -1];\n    };\n    return [...getPosition(range.index, false), ...getPosition(range.index + range.length, true)];\n  }\n  setNativeRange(startNode, startOffset) {\n    let endNode = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : startNode;\n    let endOffset = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : startOffset;\n    let force = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : false;\n    debug.info('setNativeRange', startNode, startOffset, endNode, endOffset);\n    if (startNode != null && (this.root.parentNode == null || startNode.parentNode == null ||\n    // @ts-expect-error Fix me later\n    endNode.parentNode == null)) {\n      return;\n    }\n    const selection = document.getSelection();\n    if (selection == null) return;\n    if (startNode != null) {\n      if (!this.hasFocus()) this.root.focus({\n        preventScroll: true\n      });\n      const {\n        native\n      } = this.getNativeRange() || {};\n      if (native == null || force || startNode !== native.startContainer || startOffset !== native.startOffset || endNode !== native.endContainer || endOffset !== native.endOffset) {\n        if (startNode instanceof Element && startNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          startOffset = Array.from(startNode.parentNode.childNodes).indexOf(startNode);\n          startNode = startNode.parentNode;\n        }\n        if (endNode instanceof Element && endNode.tagName === 'BR') {\n          // @ts-expect-error Fix me later\n          endOffset = Array.from(endNode.parentNode.childNodes).indexOf(endNode);\n          endNode = endNode.parentNode;\n        }\n        const range = document.createRange();\n        // @ts-expect-error Fix me later\n        range.setStart(startNode, startOffset);\n        // @ts-expect-error Fix me later\n        range.setEnd(endNode, endOffset);\n        selection.removeAllRanges();\n        selection.addRange(range);\n      }\n    } else {\n      selection.removeAllRanges();\n      this.root.blur();\n    }\n  }\n  setRange(range) {\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Emitter.sources.API;\n    if (typeof force === 'string') {\n      source = force;\n      force = false;\n    }\n    debug.info('setRange', range);\n    if (range != null) {\n      const args = this.rangeToNative(range);\n      this.setNativeRange(...args, force);\n    } else {\n      this.setNativeRange(null);\n    }\n    this.update(source);\n  }\n  update() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Emitter.sources.USER;\n    const oldRange = this.lastRange;\n    const [lastRange, nativeRange] = this.getRange();\n    this.lastRange = lastRange;\n    this.lastNative = nativeRange;\n    if (this.lastRange != null) {\n      this.savedRange = this.lastRange;\n    }\n    if (!isEqual(oldRange, this.lastRange)) {\n      if (!this.composing && nativeRange != null && nativeRange.native.collapsed && nativeRange.start.node !== this.cursor.textNode) {\n        const range = this.cursor.restore();\n        if (range) {\n          this.setNativeRange(range.startNode, range.startOffset, range.endNode, range.endOffset);\n        }\n      }\n      const args = [Emitter.events.SELECTION_CHANGE, cloneDeep(this.lastRange), cloneDeep(oldRange), source];\n      this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n      if (source !== Emitter.sources.SILENT) {\n        this.emitter.emit(...args);\n      }\n    }\n  }\n}\nfunction contains(parent, descendant) {\n  try {\n    // Firefox inserts inaccessible nodes around video elements\n    descendant.parentNode; // eslint-disable-line @typescript-eslint/no-unused-expressions\n  } catch (e) {\n    return false;\n  }\n  return parent.contains(descendant);\n}\nexport default Selection;\n//# sourceMappingURL=selection.js.map","import { cloneDeep, isEqual, merge } from 'lodash-es';\nimport { LeafBlot, EmbedBlot, Scope, ParentBlot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Block, { BlockEmbed, bubbleFormats } from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport { Range } from './selection.js';\nconst ASCII = /^[ -~]*$/;\nclass Editor {\n  constructor(scroll) {\n    this.scroll = scroll;\n    this.delta = this.getDelta();\n  }\n  applyDelta(delta) {\n    this.scroll.update();\n    let scrollLength = this.scroll.length();\n    this.scroll.batchStart();\n    const normalizedDelta = normalizeDelta(delta);\n    const deleteDelta = new Delta();\n    const normalizedOps = splitOpLines(normalizedDelta.ops.slice());\n    normalizedOps.reduce((index, op) => {\n      const length = Op.length(op);\n      let attributes = op.attributes || {};\n      let isImplicitNewlinePrepended = false;\n      let isImplicitNewlineAppended = false;\n      if (op.insert != null) {\n        deleteDelta.retain(length);\n        if (typeof op.insert === 'string') {\n          const text = op.insert;\n          isImplicitNewlineAppended = !text.endsWith('\\n') && (scrollLength <= index || !!this.scroll.descendant(BlockEmbed, index)[0]);\n          this.scroll.insertAt(index, text);\n          const [line, offset] = this.scroll.line(index);\n          let formats = merge({}, bubbleFormats(line));\n          if (line instanceof Block) {\n            const [leaf] = line.descendant(LeafBlot, offset);\n            if (leaf) {\n              formats = merge(formats, bubbleFormats(leaf));\n            }\n          }\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        } else if (typeof op.insert === 'object') {\n          const key = Object.keys(op.insert)[0]; // There should only be one key\n          if (key == null) return index;\n          const isInlineEmbed = this.scroll.query(key, Scope.INLINE) != null;\n          if (isInlineEmbed) {\n            if (scrollLength <= index || !!this.scroll.descendant(BlockEmbed, index)[0]) {\n              isImplicitNewlineAppended = true;\n            }\n          } else if (index > 0) {\n            const [leaf, offset] = this.scroll.descendant(LeafBlot, index - 1);\n            if (leaf instanceof TextBlot) {\n              const text = leaf.value();\n              if (text[offset] !== '\\n') {\n                isImplicitNewlinePrepended = true;\n              }\n            } else if (leaf instanceof EmbedBlot && leaf.statics.scope === Scope.INLINE_BLOT) {\n              isImplicitNewlinePrepended = true;\n            }\n          }\n          this.scroll.insertAt(index, key, op.insert[key]);\n          if (isInlineEmbed) {\n            const [leaf] = this.scroll.descendant(LeafBlot, index);\n            if (leaf) {\n              const formats = merge({}, bubbleFormats(leaf));\n              attributes = AttributeMap.diff(formats, attributes) || {};\n            }\n          }\n        }\n        scrollLength += length;\n      } else {\n        deleteDelta.push(op);\n        if (op.retain !== null && typeof op.retain === 'object') {\n          const key = Object.keys(op.retain)[0];\n          if (key == null) return index;\n          this.scroll.updateEmbedAt(index, key, op.retain[key]);\n        }\n      }\n      Object.keys(attributes).forEach(name => {\n        this.scroll.formatAt(index, length, name, attributes[name]);\n      });\n      const prependedLength = isImplicitNewlinePrepended ? 1 : 0;\n      const addedLength = isImplicitNewlineAppended ? 1 : 0;\n      scrollLength += prependedLength + addedLength;\n      deleteDelta.retain(prependedLength);\n      deleteDelta.delete(addedLength);\n      return index + length + prependedLength + addedLength;\n    }, 0);\n    deleteDelta.reduce((index, op) => {\n      if (typeof op.delete === 'number') {\n        this.scroll.deleteAt(index, op.delete);\n        return index;\n      }\n      return index + Op.length(op);\n    }, 0);\n    this.scroll.batchEnd();\n    this.scroll.optimize();\n    return this.update(normalizedDelta);\n  }\n  deleteText(index, length) {\n    this.scroll.deleteAt(index, length);\n    return this.update(new Delta().retain(index).delete(length));\n  }\n  formatLine(index, length) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    this.scroll.update();\n    Object.keys(formats).forEach(format => {\n      this.scroll.lines(index, Math.max(length, 1)).forEach(line => {\n        line.format(format, formats[format]);\n      });\n    });\n    this.scroll.optimize();\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n  formatText(index, length) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, length, format, formats[format]);\n    });\n    const delta = new Delta().retain(index).retain(length, cloneDeep(formats));\n    return this.update(delta);\n  }\n  getContents(index, length) {\n    return this.delta.slice(index, index + length);\n  }\n  getDelta() {\n    return this.scroll.lines().reduce((delta, line) => {\n      return delta.concat(line.delta());\n    }, new Delta());\n  }\n  getFormat(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let lines = [];\n    let leaves = [];\n    if (length === 0) {\n      this.scroll.path(index).forEach(path => {\n        const [blot] = path;\n        if (blot instanceof Block) {\n          lines.push(blot);\n        } else if (blot instanceof LeafBlot) {\n          leaves.push(blot);\n        }\n      });\n    } else {\n      lines = this.scroll.lines(index, length);\n      leaves = this.scroll.descendants(LeafBlot, index, length);\n    }\n    const [lineFormats, leafFormats] = [lines, leaves].map(blots => {\n      const blot = blots.shift();\n      if (blot == null) return {};\n      let formats = bubbleFormats(blot);\n      while (Object.keys(formats).length > 0) {\n        const blot = blots.shift();\n        if (blot == null) return formats;\n        formats = combineFormats(bubbleFormats(blot), formats);\n      }\n      return formats;\n    });\n    return {\n      ...lineFormats,\n      ...leafFormats\n    };\n  }\n  getHTML(index, length) {\n    const [line, lineOffset] = this.scroll.line(index);\n    if (line) {\n      const lineLength = line.length();\n      const isWithinLine = line.length() >= lineOffset + length;\n      if (isWithinLine && !(lineOffset === 0 && length === lineLength)) {\n        return convertHTML(line, lineOffset, length, true);\n      }\n      return convertHTML(this.scroll, index, length, true);\n    }\n    return '';\n  }\n  getText(index, length) {\n    return this.getContents(index, length).filter(op => typeof op.insert === 'string').map(op => op.insert).join('');\n  }\n  insertContents(index, contents) {\n    const normalizedDelta = normalizeDelta(contents);\n    const change = new Delta().retain(index).concat(normalizedDelta);\n    this.scroll.insertContents(index, normalizedDelta);\n    return this.update(change);\n  }\n  insertEmbed(index, embed, value) {\n    this.scroll.insertAt(index, embed, value);\n    return this.update(new Delta().retain(index).insert({\n      [embed]: value\n    }));\n  }\n  insertText(index, text) {\n    let formats = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    text = text.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n    this.scroll.insertAt(index, text);\n    Object.keys(formats).forEach(format => {\n      this.scroll.formatAt(index, text.length, format, formats[format]);\n    });\n    return this.update(new Delta().retain(index).insert(text, cloneDeep(formats)));\n  }\n  isBlank() {\n    if (this.scroll.children.length === 0) return true;\n    if (this.scroll.children.length > 1) return false;\n    const blot = this.scroll.children.head;\n    if (blot?.statics.blotName !== Block.blotName) return false;\n    const block = blot;\n    if (block.children.length > 1) return false;\n    return block.children.head instanceof Break;\n  }\n  removeFormat(index, length) {\n    const text = this.getText(index, length);\n    const [line, offset] = this.scroll.line(index + length);\n    let suffixLength = 0;\n    let suffix = new Delta();\n    if (line != null) {\n      suffixLength = line.length() - offset;\n      suffix = line.delta().slice(offset, offset + suffixLength - 1).insert('\\n');\n    }\n    const contents = this.getContents(index, length + suffixLength);\n    const diff = contents.diff(new Delta().insert(text).concat(suffix));\n    const delta = new Delta().retain(index).concat(diff);\n    return this.applyDelta(delta);\n  }\n  update(change) {\n    let mutations = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];\n    let selectionInfo = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : undefined;\n    const oldDelta = this.delta;\n    if (mutations.length === 1 && mutations[0].type === 'characterData' &&\n    // @ts-expect-error Fix me later\n    mutations[0].target.data.match(ASCII) && this.scroll.find(mutations[0].target)) {\n      // Optimization for character changes\n      const textBlot = this.scroll.find(mutations[0].target);\n      const formats = bubbleFormats(textBlot);\n      const index = textBlot.offset(this.scroll);\n      // @ts-expect-error Fix me later\n      const oldValue = mutations[0].oldValue.replace(CursorBlot.CONTENTS, '');\n      const oldText = new Delta().insert(oldValue);\n      // @ts-expect-error\n      const newText = new Delta().insert(textBlot.value());\n      const relativeSelectionInfo = selectionInfo && {\n        oldRange: shiftRange(selectionInfo.oldRange, -index),\n        newRange: shiftRange(selectionInfo.newRange, -index)\n      };\n      const diffDelta = new Delta().retain(index).concat(oldText.diff(newText, relativeSelectionInfo));\n      change = diffDelta.reduce((delta, op) => {\n        if (op.insert) {\n          return delta.insert(op.insert, formats);\n        }\n        return delta.push(op);\n      }, new Delta());\n      this.delta = oldDelta.compose(change);\n    } else {\n      this.delta = this.getDelta();\n      if (!change || !isEqual(oldDelta.compose(change), this.delta)) {\n        change = oldDelta.diff(this.delta, selectionInfo);\n      }\n    }\n    return change;\n  }\n}\nfunction convertListHTML(items, lastIndent, types) {\n  if (items.length === 0) {\n    const [endTag] = getListType(types.pop());\n    if (lastIndent <= 0) {\n      return `</li></${endTag}>`;\n    }\n    return `</li></${endTag}>${convertListHTML([], lastIndent - 1, types)}`;\n  }\n  const [{\n    child,\n    offset,\n    length,\n    indent,\n    type\n  }, ...rest] = items;\n  const [tag, attribute] = getListType(type);\n  if (indent > lastIndent) {\n    types.push(type);\n    if (indent === lastIndent + 1) {\n      return `<${tag}><li${attribute}>${convertHTML(child, offset, length)}${convertListHTML(rest, indent, types)}`;\n    }\n    return `<${tag}><li>${convertListHTML(items, lastIndent + 1, types)}`;\n  }\n  const previousType = types[types.length - 1];\n  if (indent === lastIndent && type === previousType) {\n    return `</li><li${attribute}>${convertHTML(child, offset, length)}${convertListHTML(rest, indent, types)}`;\n  }\n  const [endTag] = getListType(types.pop());\n  return `</li></${endTag}>${convertListHTML(items, lastIndent - 1, types)}`;\n}\nfunction convertHTML(blot, index, length) {\n  let isRoot = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : false;\n  if ('html' in blot && typeof blot.html === 'function') {\n    return blot.html(index, length);\n  }\n  if (blot instanceof TextBlot) {\n    return escapeText(blot.value().slice(index, index + length));\n  }\n  if (blot instanceof ParentBlot) {\n    // TODO fix API\n    if (blot.statics.blotName === 'list-container') {\n      const items = [];\n      blot.children.forEachAt(index, length, (child, offset, childLength) => {\n        const formats = 'formats' in child && typeof child.formats === 'function' ? child.formats() : {};\n        items.push({\n          child,\n          offset,\n          length: childLength,\n          indent: formats.indent || 0,\n          type: formats.list\n        });\n      });\n      return convertListHTML(items, -1, []);\n    }\n    const parts = [];\n    blot.children.forEachAt(index, length, (child, offset, childLength) => {\n      parts.push(convertHTML(child, offset, childLength));\n    });\n    if (isRoot || blot.statics.blotName === 'list') {\n      return parts.join('');\n    }\n    const {\n      outerHTML,\n      innerHTML\n    } = blot.domNode;\n    const [start, end] = outerHTML.split(`>${innerHTML}<`);\n    // TODO cleanup\n    if (start === '<table') {\n      return `<table style=\"border: 1px solid #000;\">${parts.join('')}<${end}`;\n    }\n    return `${start}>${parts.join('')}<${end}`;\n  }\n  return blot.domNode instanceof Element ? blot.domNode.outerHTML : '';\n}\nfunction combineFormats(formats, combined) {\n  return Object.keys(combined).reduce((merged, name) => {\n    if (formats[name] == null) return merged;\n    const combinedValue = combined[name];\n    if (combinedValue === formats[name]) {\n      merged[name] = combinedValue;\n    } else if (Array.isArray(combinedValue)) {\n      if (combinedValue.indexOf(formats[name]) < 0) {\n        merged[name] = combinedValue.concat([formats[name]]);\n      } else {\n        // If style already exists, don't add to an array, but don't lose other styles\n        merged[name] = combinedValue;\n      }\n    } else {\n      merged[name] = [combinedValue, formats[name]];\n    }\n    return merged;\n  }, {});\n}\nfunction getListType(type) {\n  const tag = type === 'ordered' ? 'ol' : 'ul';\n  switch (type) {\n    case 'checked':\n      return [tag, ' data-list=\"checked\"'];\n    case 'unchecked':\n      return [tag, ' data-list=\"unchecked\"'];\n    default:\n      return [tag, ''];\n  }\n}\nfunction normalizeDelta(delta) {\n  return delta.reduce((normalizedDelta, op) => {\n    if (typeof op.insert === 'string') {\n      const text = op.insert.replace(/\\r\\n/g, '\\n').replace(/\\r/g, '\\n');\n      return normalizedDelta.insert(text, op.attributes);\n    }\n    return normalizedDelta.push(op);\n  }, new Delta());\n}\nfunction shiftRange(_ref, amount) {\n  let {\n    index,\n    length\n  } = _ref;\n  return new Range(index + amount, length);\n}\nfunction splitOpLines(ops) {\n  const split = [];\n  ops.forEach(op => {\n    if (typeof op.insert === 'string') {\n      const lines = op.insert.split('\\n');\n      lines.forEach((line, index) => {\n        if (index) split.push({\n          insert: '\\n',\n          attributes: op.attributes\n        });\n        if (line) split.push({\n          insert: line,\n          attributes: op.attributes\n        });\n      });\n    } else {\n      split.push(op);\n    }\n  });\n  return split;\n}\nexport default Editor;\n//# sourceMappingURL=editor.js.map","class Module {\n  static DEFAULTS = {};\n  constructor(quill) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.quill = quill;\n    this.options = options;\n  }\n}\nexport default Module;\n//# sourceMappingURL=module.js.map","import { EmbedBlot } from 'parchment';\nimport TextBlot from './text.js';\nconst GUARD_TEXT = '\\uFEFF';\nclass Embed extends EmbedBlot {\n  constructor(scroll, node) {\n    super(scroll, node);\n    this.contentNode = document.createElement('span');\n    this.contentNode.setAttribute('contenteditable', 'false');\n    Array.from(this.domNode.childNodes).forEach(childNode => {\n      this.contentNode.appendChild(childNode);\n    });\n    this.leftGuard = document.createTextNode(GUARD_TEXT);\n    this.rightGuard = document.createTextNode(GUARD_TEXT);\n    this.domNode.appendChild(this.leftGuard);\n    this.domNode.appendChild(this.contentNode);\n    this.domNode.appendChild(this.rightGuard);\n  }\n  index(node, offset) {\n    if (node === this.leftGuard) return 0;\n    if (node === this.rightGuard) return 1;\n    return super.index(node, offset);\n  }\n  restore(node) {\n    let range = null;\n    let textNode;\n    const text = node.data.split(GUARD_TEXT).join('');\n    if (node === this.leftGuard) {\n      if (this.prev instanceof TextBlot) {\n        const prevLength = this.prev.length();\n        this.prev.insertAt(prevLength, text);\n        range = {\n          startNode: this.prev.domNode,\n          startOffset: prevLength + text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    } else if (node === this.rightGuard) {\n      if (this.next instanceof TextBlot) {\n        this.next.insertAt(0, text);\n        range = {\n          startNode: this.next.domNode,\n          startOffset: text.length\n        };\n      } else {\n        textNode = document.createTextNode(text);\n        this.parent.insertBefore(this.scroll.create(textNode), this.next);\n        range = {\n          startNode: textNode,\n          startOffset: text.length\n        };\n      }\n    }\n    node.data = GUARD_TEXT;\n    return range;\n  }\n  update(mutations, context) {\n    mutations.forEach(mutation => {\n      if (mutation.type === 'characterData' && (mutation.target === this.leftGuard || mutation.target === this.rightGuard)) {\n        const range = this.restore(mutation.target);\n        if (range) context.range = range;\n      }\n    });\n  }\n}\nexport default Embed;\n//# sourceMappingURL=embed.js.map","import Embed from '../blots/embed.js';\nimport Emitter from './emitter.js';\nclass Composition {\n  isComposing = false;\n  constructor(scroll, emitter) {\n    this.scroll = scroll;\n    this.emitter = emitter;\n    this.setupListeners();\n  }\n  setupListeners() {\n    this.scroll.domNode.addEventListener('compositionstart', event => {\n      if (!this.isComposing) {\n        this.handleCompositionStart(event);\n      }\n    });\n    this.scroll.domNode.addEventListener('compositionend', event => {\n      if (this.isComposing) {\n        // Webkit makes DOM changes after compositionend, so we use microtask to\n        // ensure the order.\n        // https://bugs.webkit.org/show_bug.cgi?id=31902\n        queueMicrotask(() => {\n          this.handleCompositionEnd(event);\n        });\n      }\n    });\n  }\n  handleCompositionStart(event) {\n    const blot = event.target instanceof Node ? this.scroll.find(event.target, true) : null;\n    if (blot && !(blot instanceof Embed)) {\n      this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_START, event);\n      this.scroll.batchStart();\n      this.emitter.emit(Emitter.events.COMPOSITION_START, event);\n      this.isComposing = true;\n    }\n  }\n  handleCompositionEnd(event) {\n    this.emitter.emit(Emitter.events.COMPOSITION_BEFORE_END, event);\n    this.scroll.batchEnd();\n    this.emitter.emit(Emitter.events.COMPOSITION_END, event);\n    this.isComposing = false;\n  }\n}\nexport default Composition;\n//# sourceMappingURL=composition.js.map","class Theme {\n  static DEFAULTS = {\n    modules: {}\n  };\n  static themes = {\n    default: Theme\n  };\n  modules = {};\n  constructor(quill, options) {\n    this.quill = quill;\n    this.options = options;\n  }\n  init() {\n    Object.keys(this.options.modules).forEach(name => {\n      if (this.modules[name] == null) {\n        this.addModule(name);\n      }\n    });\n  }\n  addModule(name) {\n    // @ts-expect-error\n    const ModuleClass = this.quill.constructor.import(`modules/${name}`);\n    this.modules[name] = new ModuleClass(this.quill, this.options.modules[name] || {});\n    return this.modules[name];\n  }\n}\nexport default Theme;\n//# sourceMappingURL=theme.js.map","const getParentElement = element => element.parentElement || element.getRootNode().host || null;\nconst getElementRect = element => {\n  const rect = element.getBoundingClientRect();\n  const scaleX = 'offsetWidth' in element && Math.abs(rect.width) / element.offsetWidth || 1;\n  const scaleY = 'offsetHeight' in element && Math.abs(rect.height) / element.offsetHeight || 1;\n  return {\n    top: rect.top,\n    right: rect.left + element.clientWidth * scaleX,\n    bottom: rect.top + element.clientHeight * scaleY,\n    left: rect.left\n  };\n};\nconst paddingValueToInt = value => {\n  const number = parseInt(value, 10);\n  return Number.isNaN(number) ? 0 : number;\n};\n\n// Follow the steps described in https://www.w3.org/TR/cssom-view-1/#element-scrolling-members,\n// assuming that the scroll option is set to 'nearest'.\nconst getScrollDistance = (targetStart, targetEnd, scrollStart, scrollEnd, scrollPaddingStart, scrollPaddingEnd) => {\n  if (targetStart < scrollStart && targetEnd > scrollEnd) {\n    return 0;\n  }\n  if (targetStart < scrollStart) {\n    return -(scrollStart - targetStart + scrollPaddingStart);\n  }\n  if (targetEnd > scrollEnd) {\n    return targetEnd - targetStart > scrollEnd - scrollStart ? targetStart + scrollPaddingStart - scrollStart : targetEnd - scrollEnd + scrollPaddingEnd;\n  }\n  return 0;\n};\nconst scrollRectIntoView = (root, targetRect) => {\n  const document = root.ownerDocument;\n  let rect = targetRect;\n  let current = root;\n  while (current) {\n    const isDocumentBody = current === document.body;\n    const bounding = isDocumentBody ? {\n      top: 0,\n      right: window.visualViewport?.width ?? document.documentElement.clientWidth,\n      bottom: window.visualViewport?.height ?? document.documentElement.clientHeight,\n      left: 0\n    } : getElementRect(current);\n    const style = getComputedStyle(current);\n    const scrollDistanceX = getScrollDistance(rect.left, rect.right, bounding.left, bounding.right, paddingValueToInt(style.scrollPaddingLeft), paddingValueToInt(style.scrollPaddingRight));\n    const scrollDistanceY = getScrollDistance(rect.top, rect.bottom, bounding.top, bounding.bottom, paddingValueToInt(style.scrollPaddingTop), paddingValueToInt(style.scrollPaddingBottom));\n    if (scrollDistanceX || scrollDistanceY) {\n      if (isDocumentBody) {\n        document.defaultView?.scrollBy(scrollDistanceX, scrollDistanceY);\n      } else {\n        const {\n          scrollLeft,\n          scrollTop\n        } = current;\n        if (scrollDistanceY) {\n          current.scrollTop += scrollDistanceY;\n        }\n        if (scrollDistanceX) {\n          current.scrollLeft += scrollDistanceX;\n        }\n        const scrolledLeft = current.scrollLeft - scrollLeft;\n        const scrolledTop = current.scrollTop - scrollTop;\n        rect = {\n          left: rect.left - scrolledLeft,\n          top: rect.top - scrolledTop,\n          right: rect.right - scrolledLeft,\n          bottom: rect.bottom - scrolledTop\n        };\n      }\n    }\n    current = isDocumentBody || style.position === 'fixed' ? null : getParentElement(current);\n  }\n};\nexport default scrollRectIntoView;\n//# sourceMappingURL=scrollRectIntoView.js.map","import { Registry } from 'parchment';\nconst MAX_REGISTER_ITERATIONS = 100;\nconst CORE_FORMATS = ['block', 'break', 'cursor', 'inline', 'scroll', 'text'];\nconst createRegistryWithFormats = (formats, sourceRegistry, debug) => {\n  const registry = new Registry();\n  CORE_FORMATS.forEach(name => {\n    const coreBlot = sourceRegistry.query(name);\n    if (coreBlot) registry.register(coreBlot);\n  });\n  formats.forEach(name => {\n    let format = sourceRegistry.query(name);\n    if (!format) {\n      debug.error(`Cannot register \"${name}\" specified in \"formats\" config. Are you sure it was registered?`);\n    }\n    let iterations = 0;\n    while (format) {\n      registry.register(format);\n      format = 'blotName' in format ? format.requiredContainer ?? null : null;\n      iterations += 1;\n      if (iterations > MAX_REGISTER_ITERATIONS) {\n        debug.error(`Cycle detected in registering blot requiredContainer: \"${name}\"`);\n        break;\n      }\n    }\n  });\n  return registry;\n};\nexport default createRegistryWithFormats;\n//# sourceMappingURL=createRegistryWithFormats.js.map","import { merge } from 'lodash-es';\nimport * as Parchment from 'parchment';\nimport Delta from 'quill-delta';\nimport Editor from './editor.js';\nimport Emitter from './emitter.js';\nimport instances from './instances.js';\nimport logger from './logger.js';\nimport Module from './module.js';\nimport Selection, { Range } from './selection.js';\nimport Composition from './composition.js';\nimport Theme from './theme.js';\nimport scrollRectIntoView from './utils/scrollRectIntoView.js';\nimport createRegistryWithFormats from './utils/createRegistryWithFormats.js';\nconst debug = logger('quill');\nconst globalRegistry = new Parchment.Registry();\nParchment.ParentBlot.uiClass = 'ql-ui';\n\n/**\n * Options for initializing a Quill instance\n */\n\n/**\n * Similar to QuillOptions, but with all properties expanded to their default values,\n * and all selectors resolved to HTMLElements.\n */\n\nclass Quill {\n  static DEFAULTS = {\n    bounds: null,\n    modules: {\n      clipboard: true,\n      keyboard: true,\n      history: true,\n      uploader: true\n    },\n    placeholder: '',\n    readOnly: false,\n    registry: globalRegistry,\n    theme: 'default'\n  };\n  static events = Emitter.events;\n  static sources = Emitter.sources;\n  static version = typeof \"2.0.0\" === 'undefined' ? 'dev' : \"2.0.0\";\n  static imports = {\n    delta: Delta,\n    parchment: Parchment,\n    'core/module': Module,\n    'core/theme': Theme\n  };\n  static debug(limit) {\n    if (limit === true) {\n      limit = 'log';\n    }\n    logger.level(limit);\n  }\n  static find(node) {\n    let bubble = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    return instances.get(node) || globalRegistry.find(node, bubble);\n  }\n  static import(name) {\n    if (this.imports[name] == null) {\n      debug.error(`Cannot import ${name}. Are you sure it was registered?`);\n    }\n    return this.imports[name];\n  }\n  static register(path, target) {\n    let overwrite = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    if (typeof path !== 'string') {\n      const name = 'attrName' in path ? path.attrName : path.blotName;\n      if (typeof name === 'string') {\n        // register(Blot | Attributor, overwrite)\n        // @ts-expect-error\n        this.register(`formats/${name}`, path, target);\n      } else {\n        Object.keys(path).forEach(key => {\n          // @ts-expect-error\n          this.register(key, path[key], target);\n        });\n      }\n    } else {\n      if (this.imports[path] != null && !overwrite) {\n        debug.warn(`Overwriting ${path} with`, target);\n      }\n      this.imports[path] = target;\n      if ((path.startsWith('blots/') || path.startsWith('formats/')) && target && typeof target !== 'boolean' &&\n      // @ts-expect-error\n      target.blotName !== 'abstract') {\n        globalRegistry.register(target);\n      }\n      // @ts-expect-error\n      if (typeof target.register === 'function') {\n        // @ts-expect-error\n        target.register(globalRegistry);\n      }\n    }\n  }\n  constructor(container) {\n    let options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    this.options = expandConfig(container, options);\n    this.container = this.options.container;\n    if (this.container == null) {\n      debug.error('Invalid Quill container', container);\n      return;\n    }\n    if (this.options.debug) {\n      Quill.debug(this.options.debug);\n    }\n    const html = this.container.innerHTML.trim();\n    this.container.classList.add('ql-container');\n    this.container.innerHTML = '';\n    instances.set(this.container, this);\n    this.root = this.addContainer('ql-editor');\n    this.root.classList.add('ql-blank');\n    this.emitter = new Emitter();\n    const scrollBlotName = Parchment.ScrollBlot.blotName;\n    const ScrollBlot = this.options.registry.query(scrollBlotName);\n    if (!ScrollBlot || !('blotName' in ScrollBlot)) {\n      throw new Error(`Cannot initialize Quill without \"${scrollBlotName}\" blot`);\n    }\n    this.scroll = new ScrollBlot(this.options.registry, this.root, {\n      emitter: this.emitter\n    });\n    this.editor = new Editor(this.scroll);\n    this.selection = new Selection(this.scroll, this.emitter);\n    this.composition = new Composition(this.scroll, this.emitter);\n    this.theme = new this.options.theme(this, this.options); // eslint-disable-line new-cap\n    this.keyboard = this.theme.addModule('keyboard');\n    this.clipboard = this.theme.addModule('clipboard');\n    this.history = this.theme.addModule('history');\n    this.uploader = this.theme.addModule('uploader');\n    this.theme.addModule('input');\n    this.theme.addModule('uiNode');\n    this.theme.init();\n    this.emitter.on(Emitter.events.EDITOR_CHANGE, type => {\n      if (type === Emitter.events.TEXT_CHANGE) {\n        this.root.classList.toggle('ql-blank', this.editor.isBlank());\n      }\n    });\n    this.emitter.on(Emitter.events.SCROLL_UPDATE, (source, mutations) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo = oldRange && newRange ? {\n        oldRange,\n        newRange\n      } : undefined;\n      modify.call(this, () => this.editor.update(null, mutations, selectionInfo), source);\n    });\n    this.emitter.on(Emitter.events.SCROLL_EMBED_UPDATE, (blot, delta) => {\n      const oldRange = this.selection.lastRange;\n      const [newRange] = this.selection.getRange();\n      const selectionInfo = oldRange && newRange ? {\n        oldRange,\n        newRange\n      } : undefined;\n      modify.call(this, () => {\n        const change = new Delta().retain(blot.offset(this)).retain({\n          [blot.statics.blotName]: delta\n        });\n        return this.editor.update(change, [], selectionInfo);\n      }, Quill.sources.USER);\n    });\n    if (html) {\n      const contents = this.clipboard.convert({\n        html: `${html}<p><br></p>`,\n        text: '\\n'\n      });\n      this.setContents(contents);\n    }\n    this.history.clear();\n    if (this.options.placeholder) {\n      this.root.setAttribute('data-placeholder', this.options.placeholder);\n    }\n    if (this.options.readOnly) {\n      this.disable();\n    }\n    this.allowReadOnlyEdits = false;\n  }\n  addContainer(container) {\n    let refNode = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    if (typeof container === 'string') {\n      const className = container;\n      container = document.createElement('div');\n      container.classList.add(className);\n    }\n    this.container.insertBefore(container, refNode);\n    return container;\n  }\n  blur() {\n    this.selection.setRange(null);\n  }\n  deleteText(index, length, source) {\n    // @ts-expect-error\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.deleteText(index, length);\n    }, source, index, -1 * length);\n  }\n  disable() {\n    this.enable(false);\n  }\n  editReadOnly(modifier) {\n    this.allowReadOnlyEdits = true;\n    const value = modifier();\n    this.allowReadOnlyEdits = false;\n    return value;\n  }\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.scroll.enable(enabled);\n    this.container.classList.toggle('ql-disabled', !enabled);\n  }\n  focus() {\n    let options = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n    this.selection.focus();\n    if (!options.preventScroll) {\n      this.scrollSelectionIntoView();\n    }\n  }\n  format(name, value) {\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Emitter.sources.API;\n    return modify.call(this, () => {\n      const range = this.getSelection(true);\n      let change = new Delta();\n      if (range == null) return change;\n      if (this.scroll.query(name, Parchment.Scope.BLOCK)) {\n        change = this.editor.formatLine(range.index, range.length, {\n          [name]: value\n        });\n      } else if (range.length === 0) {\n        this.selection.format(name, value);\n        return change;\n      } else {\n        change = this.editor.formatText(range.index, range.length, {\n          [name]: value\n        });\n      }\n      this.setSelection(range, Emitter.sources.SILENT);\n      return change;\n    }, source);\n  }\n  formatLine(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(index, length,\n    // @ts-expect-error\n    name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatLine(index, length, formats);\n    }, source, index, 0);\n  }\n  formatText(index, length, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    [index, length, formats, source] = overload(\n    // @ts-expect-error\n    index, length, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.formatText(index, length, formats);\n    }, source, index, 0);\n  }\n  getBounds(index) {\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    let bounds = null;\n    if (typeof index === 'number') {\n      bounds = this.selection.getBounds(index, length);\n    } else {\n      bounds = this.selection.getBounds(index.index, index.length);\n    }\n    if (!bounds) return null;\n    const containerBounds = this.container.getBoundingClientRect();\n    return {\n      bottom: bounds.bottom - containerBounds.top,\n      height: bounds.height,\n      left: bounds.left - containerBounds.left,\n      right: bounds.right - containerBounds.left,\n      top: bounds.top - containerBounds.top,\n      width: bounds.width\n    };\n  }\n  getContents() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : this.getLength() - index;\n    [index, length] = overload(index, length);\n    return this.editor.getContents(index, length);\n  }\n  getFormat() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.getSelection(true);\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 0;\n    if (typeof index === 'number') {\n      return this.editor.getFormat(index, length);\n    }\n    return this.editor.getFormat(index.index, index.length);\n  }\n  getIndex(blot) {\n    return blot.offset(this.scroll);\n  }\n  getLength() {\n    return this.scroll.length();\n  }\n  getLeaf(index) {\n    return this.scroll.leaf(index);\n  }\n  getLine(index) {\n    return this.scroll.line(index);\n  }\n  getLines() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n    if (typeof index !== 'number') {\n      return this.scroll.lines(index.index, index.length);\n    }\n    return this.scroll.lines(index, length);\n  }\n  getModule(name) {\n    return this.theme.modules[name];\n  }\n  getSelection() {\n    let focus = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;\n    if (focus) this.focus();\n    this.update(); // Make sure we access getRange with editor in consistent state\n    return this.selection.getRange()[0];\n  }\n  getSemanticHTML() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getHTML(index, length);\n  }\n  getText() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 ? arguments[1] : undefined;\n    if (typeof index === 'number') {\n      length = length ?? this.getLength() - index;\n    }\n    // @ts-expect-error\n    [index, length] = overload(index, length);\n    return this.editor.getText(index, length);\n  }\n  hasFocus() {\n    return this.selection.hasFocus();\n  }\n  insertEmbed(index, embed, value) {\n    let source = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : Quill.sources.API;\n    return modify.call(this, () => {\n      return this.editor.insertEmbed(index, embed, value);\n    }, source, index);\n  }\n  insertText(index, text, name, value, source) {\n    let formats;\n    // eslint-disable-next-line prefer-const\n    // @ts-expect-error\n    [index,, formats, source] = overload(index, 0, name, value, source);\n    return modify.call(this, () => {\n      return this.editor.insertText(index, text, formats);\n    }, source, index, text.length);\n  }\n  isEnabled() {\n    return this.scroll.isEnabled();\n  }\n  off() {\n    return this.emitter.off(...arguments);\n  }\n  on() {\n    return this.emitter.on(...arguments);\n  }\n  once() {\n    return this.emitter.once(...arguments);\n  }\n  removeFormat(index, length, source) {\n    [index, length,, source] = overload(index, length, source);\n    return modify.call(this, () => {\n      return this.editor.removeFormat(index, length);\n    }, source, index);\n  }\n  scrollRectIntoView(rect) {\n    scrollRectIntoView(this.root, rect);\n  }\n\n  /**\n   * @deprecated Use Quill#scrollSelectionIntoView() instead.\n   */\n  scrollIntoView() {\n    console.warn('Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead.');\n    this.scrollSelectionIntoView();\n  }\n\n  /**\n   * Scroll the current selection into the visible area.\n   * If the selection is already visible, no scrolling will occur.\n   */\n  scrollSelectionIntoView() {\n    const range = this.selection.lastRange;\n    const bounds = range && this.selection.getBounds(range.index, range.length);\n    if (bounds) {\n      this.scrollRectIntoView(bounds);\n    }\n  }\n  setContents(delta) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      const length = this.getLength();\n      // Quill will set empty editor to \\n\n      const delete1 = this.editor.deleteText(0, length);\n      const applied = this.editor.insertContents(0, delta);\n      // Remove extra \\n from empty editor initialization\n      const delete2 = this.editor.deleteText(this.getLength() - 1, 1);\n      return delete1.compose(applied).compose(delete2);\n    }, source);\n  }\n  setSelection(index, length, source) {\n    if (index == null) {\n      // @ts-expect-error https://github.com/microsoft/TypeScript/issues/22609\n      this.selection.setRange(null, length || Quill.sources.API);\n    } else {\n      // @ts-expect-error\n      [index, length,, source] = overload(index, length, source);\n      this.selection.setRange(new Range(Math.max(0, index), length), source);\n      if (source !== Emitter.sources.SILENT) {\n        this.scrollSelectionIntoView();\n      }\n    }\n  }\n  setText(text) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    const delta = new Delta().insert(text);\n    return this.setContents(delta, source);\n  }\n  update() {\n    let source = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : Emitter.sources.USER;\n    const change = this.scroll.update(source); // Will update selection before selection.update() does if text changes\n    this.selection.update(source);\n    // TODO this is usually undefined\n    return change;\n  }\n  updateContents(delta) {\n    let source = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Emitter.sources.API;\n    return modify.call(this, () => {\n      delta = new Delta(delta);\n      return this.editor.applyDelta(delta);\n    }, source, true);\n  }\n}\nfunction resolveSelector(selector) {\n  return typeof selector === 'string' ? document.querySelector(selector) : selector;\n}\nfunction expandModuleConfig(config) {\n  return Object.entries(config ?? {}).reduce((expanded, _ref) => {\n    let [key, value] = _ref;\n    return {\n      ...expanded,\n      [key]: value === true ? {} : value\n    };\n  }, {});\n}\nfunction omitUndefinedValuesFromOptions(obj) {\n  return Object.fromEntries(Object.entries(obj).filter(entry => entry[1] !== undefined));\n}\nfunction expandConfig(containerOrSelector, options) {\n  const container = resolveSelector(containerOrSelector);\n  if (!container) {\n    throw new Error('Invalid Quill container');\n  }\n  const shouldUseDefaultTheme = !options.theme || options.theme === Quill.DEFAULTS.theme;\n  const theme = shouldUseDefaultTheme ? Theme : Quill.import(`themes/${options.theme}`);\n  if (!theme) {\n    throw new Error(`Invalid theme ${options.theme}. Did you register it?`);\n  }\n  const {\n    modules: quillModuleDefaults,\n    ...quillDefaults\n  } = Quill.DEFAULTS;\n  const {\n    modules: themeModuleDefaults,\n    ...themeDefaults\n  } = theme.DEFAULTS;\n  const modules = merge({}, expandModuleConfig(quillModuleDefaults), expandModuleConfig(themeModuleDefaults), expandModuleConfig(options.modules));\n  // Special case toolbar shorthand\n  if (modules != null && modules.toolbar && modules.toolbar.constructor !== Object) {\n    modules.toolbar = {\n      container: modules.toolbar\n    };\n  }\n  const config = {\n    ...quillDefaults,\n    ...omitUndefinedValuesFromOptions(themeDefaults),\n    ...omitUndefinedValuesFromOptions(options)\n  };\n  let registry = options.registry;\n  if (registry) {\n    if (options.formats) {\n      debug.warn('Ignoring \"formats\" option because \"registry\" is specified');\n    }\n  } else {\n    registry = options.formats ? createRegistryWithFormats(options.formats, config.registry, debug) : config.registry;\n  }\n  return {\n    ...config,\n    registry,\n    container,\n    theme,\n    modules: Object.entries(modules).reduce((modulesWithDefaults, _ref2) => {\n      let [name, value] = _ref2;\n      if (!value) return modulesWithDefaults;\n      const moduleClass = Quill.import(`modules/${name}`);\n      if (moduleClass == null) {\n        debug.error(`Cannot load ${name} module. Are you sure you registered it?`);\n        return modulesWithDefaults;\n      }\n      return {\n        ...modulesWithDefaults,\n        // @ts-expect-error\n        [name]: merge({}, moduleClass.DEFAULTS || {}, value)\n      };\n    }, {}),\n    bounds: resolveSelector(config.bounds)\n  };\n}\n\n// Handle selection preservation and TEXT_CHANGE emission\n// common to modification APIs\nfunction modify(modifier, source, index, shift) {\n  if (!this.isEnabled() && source === Emitter.sources.USER && !this.allowReadOnlyEdits) {\n    return new Delta();\n  }\n  let range = index == null ? null : this.getSelection();\n  const oldDelta = this.editor.delta;\n  const change = modifier();\n  if (range != null) {\n    if (index === true) {\n      index = range.index; // eslint-disable-line prefer-destructuring\n    }\n    if (shift == null) {\n      range = shiftRange(range, change, source);\n    } else if (shift !== 0) {\n      // @ts-expect-error index should always be number\n      range = shiftRange(range, index, shift, source);\n    }\n    this.setSelection(range, Emitter.sources.SILENT);\n  }\n  if (change.length() > 0) {\n    const args = [Emitter.events.TEXT_CHANGE, change, oldDelta, source];\n    this.emitter.emit(Emitter.events.EDITOR_CHANGE, ...args);\n    if (source !== Emitter.sources.SILENT) {\n      this.emitter.emit(...args);\n    }\n  }\n  return change;\n}\nfunction overload(index, length, name, value, source) {\n  let formats = {};\n  // @ts-expect-error\n  if (typeof index.index === 'number' && typeof index.length === 'number') {\n    // Allow for throwaway end (used by insertText/insertEmbed)\n    if (typeof length !== 'number') {\n      // @ts-expect-error\n      source = value;\n      value = name;\n      name = length;\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    } else {\n      // @ts-expect-error\n      length = index.length; // eslint-disable-line prefer-destructuring\n      // @ts-expect-error\n      index = index.index; // eslint-disable-line prefer-destructuring\n    }\n  } else if (typeof length !== 'number') {\n    // @ts-expect-error\n    source = value;\n    value = name;\n    name = length;\n    length = 0;\n  }\n  // Handle format being object, two format name/value strings or excluded\n  if (typeof name === 'object') {\n    // @ts-expect-error Fix me later\n    formats = name;\n    // @ts-expect-error\n    source = value;\n  } else if (typeof name === 'string') {\n    if (value != null) {\n      formats[name] = value;\n    } else {\n      // @ts-expect-error\n      source = name;\n    }\n  }\n  // Handle optional source\n  source = source || Emitter.sources.API;\n  // @ts-expect-error\n  return [index, length, formats, source];\n}\nfunction shiftRange(range, index, lengthOrSource, source) {\n  const length = typeof lengthOrSource === 'number' ? lengthOrSource : 0;\n  if (range == null) return null;\n  let start;\n  let end;\n  // @ts-expect-error -- TODO: add a better type guard around `index`\n  if (index && typeof index.transformPosition === 'function') {\n    [start, end] = [range.index, range.index + range.length].map(pos =>\n    // @ts-expect-error -- TODO: add a better type guard around `index`\n    index.transformPosition(pos, source !== Emitter.sources.USER));\n  } else {\n    [start, end] = [range.index, range.index + range.length].map(pos => {\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      if (pos < index || pos === index && source === Emitter.sources.USER) return pos;\n      if (length >= 0) {\n        return pos + length;\n      }\n      // @ts-expect-error -- TODO: add a better type guard around `index`\n      return Math.max(index, pos + length);\n    });\n  }\n  return new Range(start, end - start);\n}\nexport { Parchment, Range };\nexport { globalRegistry, expandConfig, overload, Quill as default };\n//# sourceMappingURL=quill.js.map","import { ContainerBlot } from 'parchment';\nclass Container extends ContainerBlot {}\nexport default Container;\n//# sourceMappingURL=container.js.map","import { ContainerBlot, LeafBlot, Scope, ScrollBlot } from 'parchment';\nimport Delta, { AttributeMap, Op } from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport Block, { BlockEmbed, bubbleFormats } from './block.js';\nimport Break from './break.js';\nimport Container from './container.js';\nfunction isLine(blot) {\n  return blot instanceof Block || blot instanceof BlockEmbed;\n}\nfunction isUpdatable(blot) {\n  return typeof blot.updateContent === 'function';\n}\nclass Scroll extends ScrollBlot {\n  static blotName = 'scroll';\n  static className = 'ql-editor';\n  static tagName = 'DIV';\n  static defaultChild = Block;\n  static allowedChildren = [Block, BlockEmbed, Container];\n  constructor(registry, domNode, _ref) {\n    let {\n      emitter\n    } = _ref;\n    super(registry, domNode);\n    this.emitter = emitter;\n    this.batch = false;\n    this.optimize();\n    this.enable();\n    this.domNode.addEventListener('dragstart', e => this.handleDragStart(e));\n  }\n  batchStart() {\n    if (!Array.isArray(this.batch)) {\n      this.batch = [];\n    }\n  }\n  batchEnd() {\n    if (!this.batch) return;\n    const mutations = this.batch;\n    this.batch = false;\n    this.update(mutations);\n  }\n  emitMount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_MOUNT, blot);\n  }\n  emitUnmount(blot) {\n    this.emitter.emit(Emitter.events.SCROLL_BLOT_UNMOUNT, blot);\n  }\n  emitEmbedUpdate(blot, change) {\n    this.emitter.emit(Emitter.events.SCROLL_EMBED_UPDATE, blot, change);\n  }\n  deleteAt(index, length) {\n    const [first, offset] = this.line(index);\n    const [last] = this.line(index + length);\n    super.deleteAt(index, length);\n    if (last != null && first !== last && offset > 0) {\n      if (first instanceof BlockEmbed || last instanceof BlockEmbed) {\n        this.optimize();\n        return;\n      }\n      const ref = last.children.head instanceof Break ? null : last.children.head;\n      // @ts-expect-error\n      first.moveChildren(last, ref);\n      // @ts-expect-error\n      first.remove();\n    }\n    this.optimize();\n  }\n  enable() {\n    let enabled = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : true;\n    this.domNode.setAttribute('contenteditable', enabled ? 'true' : 'false');\n  }\n  formatAt(index, length, format, value) {\n    super.formatAt(index, length, format, value);\n    this.optimize();\n  }\n  insertAt(index, value, def) {\n    if (index >= this.length()) {\n      if (def == null || this.scroll.query(value, Scope.BLOCK) == null) {\n        const blot = this.scroll.create(this.statics.defaultChild.blotName);\n        this.appendChild(blot);\n        if (def == null && value.endsWith('\\n')) {\n          blot.insertAt(0, value.slice(0, -1), def);\n        } else {\n          blot.insertAt(0, value, def);\n        }\n      } else {\n        const embed = this.scroll.create(value, def);\n        this.appendChild(embed);\n      }\n    } else {\n      super.insertAt(index, value, def);\n    }\n    this.optimize();\n  }\n  insertBefore(blot, ref) {\n    if (blot.statics.scope === Scope.INLINE_BLOT) {\n      const wrapper = this.scroll.create(this.statics.defaultChild.blotName);\n      wrapper.appendChild(blot);\n      super.insertBefore(wrapper, ref);\n    } else {\n      super.insertBefore(blot, ref);\n    }\n  }\n  insertContents(index, delta) {\n    const renderBlocks = this.deltaToRenderBlocks(delta.concat(new Delta().insert('\\n')));\n    const last = renderBlocks.pop();\n    if (last == null) return;\n    this.batchStart();\n    const first = renderBlocks.shift();\n    if (first) {\n      const shouldInsertNewlineChar = first.type === 'block' && (first.delta.length() === 0 || !this.descendant(BlockEmbed, index)[0] && index < this.length());\n      const delta = first.type === 'block' ? first.delta : new Delta().insert({\n        [first.key]: first.value\n      });\n      insertInlineContents(this, index, delta);\n      const newlineCharLength = first.type === 'block' ? 1 : 0;\n      const lineEndIndex = index + delta.length() + newlineCharLength;\n      if (shouldInsertNewlineChar) {\n        this.insertAt(lineEndIndex - 1, '\\n');\n      }\n      const formats = bubbleFormats(this.line(index)[0]);\n      const attributes = AttributeMap.diff(formats, first.attributes) || {};\n      Object.keys(attributes).forEach(name => {\n        this.formatAt(lineEndIndex - 1, 1, name, attributes[name]);\n      });\n      index = lineEndIndex;\n    }\n    let [refBlot, refBlotOffset] = this.children.find(index);\n    if (renderBlocks.length) {\n      if (refBlot) {\n        refBlot = refBlot.split(refBlotOffset);\n        refBlotOffset = 0;\n      }\n      renderBlocks.forEach(renderBlock => {\n        if (renderBlock.type === 'block') {\n          const block = this.createBlock(renderBlock.attributes, refBlot || undefined);\n          insertInlineContents(block, 0, renderBlock.delta);\n        } else {\n          const blockEmbed = this.create(renderBlock.key, renderBlock.value);\n          this.insertBefore(blockEmbed, refBlot || undefined);\n          Object.keys(renderBlock.attributes).forEach(name => {\n            blockEmbed.format(name, renderBlock.attributes[name]);\n          });\n        }\n      });\n    }\n    if (last.type === 'block' && last.delta.length()) {\n      const offset = refBlot ? refBlot.offset(refBlot.scroll) + refBlotOffset : this.length();\n      insertInlineContents(this, offset, last.delta);\n    }\n    this.batchEnd();\n    this.optimize();\n  }\n  isEnabled() {\n    return this.domNode.getAttribute('contenteditable') === 'true';\n  }\n  leaf(index) {\n    const last = this.path(index).pop();\n    if (!last) {\n      return [null, -1];\n    }\n    const [blot, offset] = last;\n    return blot instanceof LeafBlot ? [blot, offset] : [null, -1];\n  }\n  line(index) {\n    if (index === this.length()) {\n      return this.line(index - 1);\n    }\n    // @ts-expect-error TODO: make descendant() generic\n    return this.descendant(isLine, index);\n  }\n  lines() {\n    let index = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 0;\n    let length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : Number.MAX_VALUE;\n    const getLines = (blot, blotIndex, blotLength) => {\n      let lines = [];\n      let lengthLeft = blotLength;\n      blot.children.forEachAt(blotIndex, blotLength, (child, childIndex, childLength) => {\n        if (isLine(child)) {\n          lines.push(child);\n        } else if (child instanceof ContainerBlot) {\n          lines = lines.concat(getLines(child, childIndex, lengthLeft));\n        }\n        lengthLeft -= childLength;\n      });\n      return lines;\n    };\n    return getLines(this, index, length);\n  }\n  optimize() {\n    let mutations = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : [];\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (this.batch) return;\n    super.optimize(mutations, context);\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_OPTIMIZE, mutations, context);\n    }\n  }\n  path(index) {\n    return super.path(index).slice(1); // Exclude self\n  }\n  remove() {\n    // Never remove self\n  }\n  update(mutations) {\n    if (this.batch) {\n      if (Array.isArray(mutations)) {\n        this.batch = this.batch.concat(mutations);\n      }\n      return;\n    }\n    let source = Emitter.sources.USER;\n    if (typeof mutations === 'string') {\n      source = mutations;\n    }\n    if (!Array.isArray(mutations)) {\n      mutations = this.observer.takeRecords();\n    }\n    mutations = mutations.filter(_ref2 => {\n      let {\n        target\n      } = _ref2;\n      const blot = this.find(target, true);\n      return blot && !isUpdatable(blot);\n    });\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_BEFORE_UPDATE, source, mutations);\n    }\n    super.update(mutations.concat([])); // pass copy\n    if (mutations.length > 0) {\n      this.emitter.emit(Emitter.events.SCROLL_UPDATE, source, mutations);\n    }\n  }\n  updateEmbedAt(index, key, change) {\n    // Currently it only supports top-level embeds (BlockEmbed).\n    // We can update `ParentBlot` in parchment to support inline embeds.\n    const [blot] = this.descendant(b => b instanceof BlockEmbed, index);\n    if (blot && blot.statics.blotName === key && isUpdatable(blot)) {\n      blot.updateContent(change);\n    }\n  }\n  handleDragStart(event) {\n    event.preventDefault();\n  }\n  deltaToRenderBlocks(delta) {\n    const renderBlocks = [];\n    let currentBlockDelta = new Delta();\n    delta.forEach(op => {\n      const insert = op?.insert;\n      if (!insert) return;\n      if (typeof insert === 'string') {\n        const splitted = insert.split('\\n');\n        splitted.slice(0, -1).forEach(text => {\n          currentBlockDelta.insert(text, op.attributes);\n          renderBlocks.push({\n            type: 'block',\n            delta: currentBlockDelta,\n            attributes: op.attributes ?? {}\n          });\n          currentBlockDelta = new Delta();\n        });\n        const last = splitted[splitted.length - 1];\n        if (last) {\n          currentBlockDelta.insert(last, op.attributes);\n        }\n      } else {\n        const key = Object.keys(insert)[0];\n        if (!key) return;\n        if (this.query(key, Scope.INLINE)) {\n          currentBlockDelta.push(op);\n        } else {\n          if (currentBlockDelta.length()) {\n            renderBlocks.push({\n              type: 'block',\n              delta: currentBlockDelta,\n              attributes: {}\n            });\n          }\n          currentBlockDelta = new Delta();\n          renderBlocks.push({\n            type: 'blockEmbed',\n            key,\n            value: insert[key],\n            attributes: op.attributes ?? {}\n          });\n        }\n      }\n    });\n    if (currentBlockDelta.length()) {\n      renderBlocks.push({\n        type: 'block',\n        delta: currentBlockDelta,\n        attributes: {}\n      });\n    }\n    return renderBlocks;\n  }\n  createBlock(attributes, refBlot) {\n    let blotName;\n    const formats = {};\n    Object.entries(attributes).forEach(_ref3 => {\n      let [key, value] = _ref3;\n      const isBlockBlot = this.query(key, Scope.BLOCK & Scope.BLOT) != null;\n      if (isBlockBlot) {\n        blotName = key;\n      } else {\n        formats[key] = value;\n      }\n    });\n    const block = this.create(blotName || this.statics.defaultChild.blotName, blotName ? attributes[blotName] : undefined);\n    this.insertBefore(block, refBlot || undefined);\n    const length = block.length();\n    Object.entries(formats).forEach(_ref4 => {\n      let [key, value] = _ref4;\n      block.formatAt(0, length, key, value);\n    });\n    return block;\n  }\n}\nfunction insertInlineContents(parent, index, inlineContents) {\n  inlineContents.reduce((index, op) => {\n    const length = Op.length(op);\n    let attributes = op.attributes || {};\n    if (op.insert != null) {\n      if (typeof op.insert === 'string') {\n        const text = op.insert;\n        parent.insertAt(index, text);\n        const [leaf] = parent.descendant(LeafBlot, index);\n        const formats = bubbleFormats(leaf);\n        attributes = AttributeMap.diff(formats, attributes) || {};\n      } else if (typeof op.insert === 'object') {\n        const key = Object.keys(op.insert)[0]; // There should only be one key\n        if (key == null) return index;\n        parent.insertAt(index, key, op.insert[key]);\n        const isInlineEmbed = parent.scroll.query(key, Scope.INLINE) != null;\n        if (isInlineEmbed) {\n          const [leaf] = parent.descendant(LeafBlot, index);\n          const formats = bubbleFormats(leaf);\n          attributes = AttributeMap.diff(formats, attributes) || {};\n        }\n      }\n    }\n    Object.keys(attributes).forEach(key => {\n      parent.formatAt(index, length, key, attributes[key]);\n    });\n    return index + length;\n  }, index);\n}\nexport default Scroll;\n//# sourceMappingURL=scroll.js.map","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['right', 'center', 'justify']\n};\nconst AlignAttribute = new Attributor('align', 'align', config);\nconst AlignClass = new ClassAttributor('align', 'ql-align', config);\nconst AlignStyle = new StyleAttributor('align', 'text-align', config);\nexport { AlignAttribute, AlignClass, AlignStyle };\n//# sourceMappingURL=align.js.map","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nclass ColorAttributor extends StyleAttributor {\n  value(domNode) {\n    let value = super.value(domNode);\n    if (!value.startsWith('rgb(')) return value;\n    value = value.replace(/^[^\\d]+/, '').replace(/[^\\d]+$/, '');\n    const hex = value.split(',').map(component => `00${parseInt(component, 10).toString(16)}`.slice(-2)).join('');\n    return `#${hex}`;\n  }\n}\nconst ColorClass = new ClassAttributor('color', 'ql-color', {\n  scope: Scope.INLINE\n});\nconst ColorStyle = new ColorAttributor('color', 'color', {\n  scope: Scope.INLINE\n});\nexport { ColorAttributor, ColorClass, ColorStyle };\n//# sourceMappingURL=color.js.map","import { ClassAttributor, Scope } from 'parchment';\nimport { ColorAttributor } from './color.js';\nconst BackgroundClass = new ClassAttributor('background', 'ql-bg', {\n  scope: Scope.INLINE\n});\nconst BackgroundStyle = new ColorAttributor('background', 'background-color', {\n  scope: Scope.INLINE\n});\nexport { BackgroundClass, BackgroundStyle };\n//# sourceMappingURL=background.js.map","import Block from '../blots/block.js';\nimport Break from '../blots/break.js';\nimport Cursor from '../blots/cursor.js';\nimport Inline from '../blots/inline.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\nclass CodeBlockContainer extends Container {\n  static create(value) {\n    const domNode = super.create(value);\n    domNode.setAttribute('spellcheck', 'false');\n    return domNode;\n  }\n  code(index, length) {\n    return this.children\n    // @ts-expect-error\n    .map(child => child.length() <= 1 ? '' : child.domNode.innerText).join('\\n').slice(index, index + length);\n  }\n  html(index, length) {\n    // `\\n`s are needed in order to support empty lines at the beginning and the end.\n    // https://html.spec.whatwg.org/multipage/syntax.html#element-restrictions\n    return `<pre>\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n}\nclass CodeBlock extends Block {\n  static TAB = '  ';\n  static register() {\n    Quill.register(CodeBlockContainer);\n  }\n}\nclass Code extends Inline {}\nCode.blotName = 'code';\nCode.tagName = 'CODE';\nCodeBlock.blotName = 'code-block';\nCodeBlock.className = 'ql-code-block';\nCodeBlock.tagName = 'DIV';\nCodeBlockContainer.blotName = 'code-block-container';\nCodeBlockContainer.className = 'ql-code-block-container';\nCodeBlockContainer.tagName = 'DIV';\nCodeBlockContainer.allowedChildren = [CodeBlock];\nCodeBlock.allowedChildren = [TextBlot, Break, Cursor];\nCodeBlock.requiredContainer = CodeBlockContainer;\nexport { Code, CodeBlockContainer, CodeBlock as default };\n//# sourceMappingURL=code.js.map","import { Attributor, ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.BLOCK,\n  whitelist: ['rtl']\n};\nconst DirectionAttribute = new Attributor('direction', 'dir', config);\nconst DirectionClass = new ClassAttributor('direction', 'ql-direction', config);\nconst DirectionStyle = new StyleAttributor('direction', 'direction', config);\nexport { DirectionAttribute, DirectionClass, DirectionStyle };\n//# sourceMappingURL=direction.js.map","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst config = {\n  scope: Scope.INLINE,\n  whitelist: ['serif', 'monospace']\n};\nconst FontClass = new ClassAttributor('font', 'ql-font', config);\nclass FontStyleAttributor extends StyleAttributor {\n  value(node) {\n    return super.value(node).replace(/[\"']/g, '');\n  }\n}\nconst FontStyle = new FontStyleAttributor('font', 'font-family', config);\nexport { FontStyle, FontClass };\n//# sourceMappingURL=font.js.map","import { ClassAttributor, Scope, StyleAttributor } from 'parchment';\nconst SizeClass = new ClassAttributor('size', 'ql-size', {\n  scope: Scope.INLINE,\n  whitelist: ['small', 'large', 'huge']\n});\nconst SizeStyle = new StyleAttributor('size', 'font-size', {\n  scope: Scope.INLINE,\n  whitelist: ['10px', '18px', '32px']\n});\nexport { SizeClass, SizeStyle };\n//# sourceMappingURL=size.js.map","import { cloneDeep, isEqual } from 'lodash-es';\nimport Delta, { AttributeMap } from 'quill-delta';\nimport { EmbedBlot, Scope, TextBlot } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nconst debug = logger('quill:keyboard');\nconst SHORTKEY = /Mac/i.test(navigator.platform) ? 'metaKey' : 'ctrlKey';\nclass Keyboard extends Module {\n  static match(evt, binding) {\n    if (['altKey', 'ctrlKey', 'metaKey', 'shiftKey'].some(key => {\n      return !!binding[key] !== evt[key] && binding[key] !== null;\n    })) {\n      return false;\n    }\n    return binding.key === evt.key || binding.key === evt.which;\n  }\n  constructor(quill, options) {\n    super(quill, options);\n    this.bindings = {};\n    // @ts-expect-error Fix me later\n    Object.keys(this.options.bindings).forEach(name => {\n      // @ts-expect-error Fix me later\n      if (this.options.bindings[name]) {\n        // @ts-expect-error Fix me later\n        this.addBinding(this.options.bindings[name]);\n      }\n    });\n    this.addBinding({\n      key: 'Enter',\n      shiftKey: null\n    }, this.handleEnter);\n    this.addBinding({\n      key: 'Enter',\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null\n    }, () => {});\n    if (/Firefox/i.test(navigator.userAgent)) {\n      // Need to handle delete and backspace for Firefox in the general case #1171\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true\n      }, this.handleDelete);\n    } else {\n      this.addBinding({\n        key: 'Backspace'\n      }, {\n        collapsed: true,\n        prefix: /^.?$/\n      }, this.handleBackspace);\n      this.addBinding({\n        key: 'Delete'\n      }, {\n        collapsed: true,\n        suffix: /^.?$/\n      }, this.handleDelete);\n    }\n    this.addBinding({\n      key: 'Backspace'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Delete'\n    }, {\n      collapsed: false\n    }, this.handleDeleteRange);\n    this.addBinding({\n      key: 'Backspace',\n      altKey: null,\n      ctrlKey: null,\n      metaKey: null,\n      shiftKey: null\n    }, {\n      collapsed: true,\n      offset: 0\n    }, this.handleBackspace);\n    this.listen();\n  }\n  addBinding(keyBinding) {\n    let context = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    let handler = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};\n    const binding = normalize(keyBinding);\n    if (binding == null) {\n      debug.warn('Attempted to add invalid keyboard binding', binding);\n      return;\n    }\n    if (typeof context === 'function') {\n      context = {\n        handler: context\n      };\n    }\n    if (typeof handler === 'function') {\n      handler = {\n        handler\n      };\n    }\n    const keys = Array.isArray(binding.key) ? binding.key : [binding.key];\n    keys.forEach(key => {\n      const singleBinding = {\n        ...binding,\n        key,\n        ...context,\n        ...handler\n      };\n      this.bindings[singleBinding.key] = this.bindings[singleBinding.key] || [];\n      this.bindings[singleBinding.key].push(singleBinding);\n    });\n  }\n  listen() {\n    this.quill.root.addEventListener('keydown', evt => {\n      if (evt.defaultPrevented || evt.isComposing) return;\n      const bindings = (this.bindings[evt.key] || []).concat(this.bindings[evt.which] || []);\n      const matches = bindings.filter(binding => Keyboard.match(evt, binding));\n      if (matches.length === 0) return;\n      // @ts-expect-error\n      const blot = Quill.find(evt.target, true);\n      if (blot && blot.scroll !== this.quill.scroll) return;\n      const range = this.quill.getSelection();\n      if (range == null || !this.quill.hasFocus()) return;\n      const [line, offset] = this.quill.getLine(range.index);\n      const [leafStart, offsetStart] = this.quill.getLeaf(range.index);\n      const [leafEnd, offsetEnd] = range.length === 0 ? [leafStart, offsetStart] : this.quill.getLeaf(range.index + range.length);\n      const prefixText = leafStart instanceof TextBlot ? leafStart.value().slice(0, offsetStart) : '';\n      const suffixText = leafEnd instanceof TextBlot ? leafEnd.value().slice(offsetEnd) : '';\n      const curContext = {\n        collapsed: range.length === 0,\n        // @ts-expect-error Fix me later\n        empty: range.length === 0 && line.length() <= 1,\n        format: this.quill.getFormat(range),\n        line,\n        offset,\n        prefix: prefixText,\n        suffix: suffixText,\n        event: evt\n      };\n      const prevented = matches.some(binding => {\n        if (binding.collapsed != null && binding.collapsed !== curContext.collapsed) {\n          return false;\n        }\n        if (binding.empty != null && binding.empty !== curContext.empty) {\n          return false;\n        }\n        if (binding.offset != null && binding.offset !== curContext.offset) {\n          return false;\n        }\n        if (Array.isArray(binding.format)) {\n          // any format is present\n          if (binding.format.every(name => curContext.format[name] == null)) {\n            return false;\n          }\n        } else if (typeof binding.format === 'object') {\n          // all formats must match\n          if (!Object.keys(binding.format).every(name => {\n            // @ts-expect-error Fix me later\n            if (binding.format[name] === true) return curContext.format[name] != null;\n            // @ts-expect-error Fix me later\n            if (binding.format[name] === false) return curContext.format[name] == null;\n            // @ts-expect-error Fix me later\n            return isEqual(binding.format[name], curContext.format[name]);\n          })) {\n            return false;\n          }\n        }\n        if (binding.prefix != null && !binding.prefix.test(curContext.prefix)) {\n          return false;\n        }\n        if (binding.suffix != null && !binding.suffix.test(curContext.suffix)) {\n          return false;\n        }\n        // @ts-expect-error Fix me later\n        return binding.handler.call(this, range, curContext, binding) !== true;\n      });\n      if (prevented) {\n        evt.preventDefault();\n      }\n    });\n  }\n  handleBackspace(range, context) {\n    // Check for astral symbols\n    const length = /[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]$/.test(context.prefix) ? 2 : 1;\n    if (range.index === 0 || this.quill.getLength() <= 1) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index - length).delete(length);\n    if (context.offset === 0) {\n      // Always deleting newline here, length always 1\n      const [prev] = this.quill.getLine(range.index - 1);\n      if (prev) {\n        const isPrevLineEmpty = prev.statics.blotName === 'block' && prev.length() <= 1;\n        if (!isPrevLineEmpty) {\n          // @ts-expect-error Fix me later\n          const curFormats = line.formats();\n          const prevFormats = this.quill.getFormat(range.index - 1, 1);\n          formats = AttributeMap.diff(curFormats, prevFormats) || {};\n          if (Object.keys(formats).length > 0) {\n            // line.length() - 1 targets \\n in line, another -1 for newline being deleted\n            const formatDelta = new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index + line.length() - 2).retain(1, formats);\n            delta = delta.compose(formatDelta);\n          }\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n  handleDelete(range, context) {\n    // Check for astral symbols\n    const length = /^[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/.test(context.suffix) ? 2 : 1;\n    if (range.index >= this.quill.getLength() - length) return;\n    let formats = {};\n    const [line] = this.quill.getLine(range.index);\n    let delta = new Delta().retain(range.index).delete(length);\n    // @ts-expect-error Fix me later\n    if (context.offset >= line.length() - 1) {\n      const [next] = this.quill.getLine(range.index + 1);\n      if (next) {\n        // @ts-expect-error Fix me later\n        const curFormats = line.formats();\n        const nextFormats = this.quill.getFormat(range.index, 1);\n        formats = AttributeMap.diff(curFormats, nextFormats) || {};\n        if (Object.keys(formats).length > 0) {\n          delta = delta.retain(next.length() - 1).retain(1, formats);\n        }\n      }\n    }\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.focus();\n  }\n  handleDeleteRange(range) {\n    deleteRange({\n      range,\n      quill: this.quill\n    });\n    this.quill.focus();\n  }\n  handleEnter(range, context) {\n    const lineFormats = Object.keys(context.format).reduce((formats, format) => {\n      if (this.quill.scroll.query(format, Scope.BLOCK) && !Array.isArray(context.format[format])) {\n        formats[format] = context.format[format];\n      }\n      return formats;\n    }, {});\n    const delta = new Delta().retain(range.index).delete(range.length).insert('\\n', lineFormats);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n    this.quill.focus();\n  }\n}\nconst defaultOptions = {\n  bindings: {\n    bold: makeFormatHandler('bold'),\n    italic: makeFormatHandler('italic'),\n    underline: makeFormatHandler('underline'),\n    indent: {\n      // highlight tab or tab at beginning of list, indent or blockquote\n      key: 'Tab',\n      format: ['blockquote', 'indent', 'list'],\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '+1', Quill.sources.USER);\n        return false;\n      }\n    },\n    outdent: {\n      key: 'Tab',\n      shiftKey: true,\n      format: ['blockquote', 'indent', 'list'],\n      // highlight tab or tab at beginning of list, indent or blockquote\n      handler(range, context) {\n        if (context.collapsed && context.offset !== 0) return true;\n        this.quill.format('indent', '-1', Quill.sources.USER);\n        return false;\n      }\n    },\n    'outdent backspace': {\n      key: 'Backspace',\n      collapsed: true,\n      shiftKey: null,\n      metaKey: null,\n      ctrlKey: null,\n      altKey: null,\n      format: ['indent', 'list'],\n      offset: 0,\n      handler(range, context) {\n        if (context.format.indent != null) {\n          this.quill.format('indent', '-1', Quill.sources.USER);\n        } else if (context.format.list != null) {\n          this.quill.format('list', false, Quill.sources.USER);\n        }\n      }\n    },\n    'indent code-block': makeCodeBlockHandler(true),\n    'outdent code-block': makeCodeBlockHandler(false),\n    'remove tab': {\n      key: 'Tab',\n      shiftKey: true,\n      collapsed: true,\n      prefix: /\\t$/,\n      handler(range) {\n        this.quill.deleteText(range.index - 1, 1, Quill.sources.USER);\n      }\n    },\n    tab: {\n      key: 'Tab',\n      handler(range, context) {\n        if (context.format.table) return true;\n        this.quill.history.cutoff();\n        const delta = new Delta().retain(range.index).delete(range.length).insert('\\t');\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        return false;\n      }\n    },\n    'blockquote empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['blockquote'],\n      empty: true,\n      handler() {\n        this.quill.format('blockquote', false, Quill.sources.USER);\n      }\n    },\n    'list empty enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['list'],\n      empty: true,\n      handler(range, context) {\n        const formats = {\n          list: false\n        };\n        if (context.format.indent) {\n          formats.indent = false;\n        }\n        this.quill.formatLine(range.index, range.length, formats, Quill.sources.USER);\n      }\n    },\n    'checklist enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: {\n        list: 'checked'\n      },\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const formats = {\n          // @ts-expect-error Fix me later\n          ...line.formats(),\n          list: 'checked'\n        };\n        const delta = new Delta().retain(range.index).insert('\\n', formats)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - offset - 1).retain(1, {\n          list: 'unchecked'\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      }\n    },\n    'header enter': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['header'],\n      suffix: /^$/,\n      handler(range, context) {\n        const [line, offset] = this.quill.getLine(range.index);\n        const delta = new Delta().retain(range.index).insert('\\n', context.format)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - offset - 1).retain(1, {\n          header: null\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.setSelection(range.index + 1, Quill.sources.SILENT);\n        this.quill.scrollSelectionIntoView();\n      }\n    },\n    'table backspace': {\n      key: 'Backspace',\n      format: ['table'],\n      collapsed: true,\n      offset: 0,\n      handler() {}\n    },\n    'table delete': {\n      key: 'Delete',\n      format: ['table'],\n      collapsed: true,\n      suffix: /^$/,\n      handler() {}\n    },\n    'table enter': {\n      key: 'Enter',\n      shiftKey: null,\n      format: ['table'],\n      handler(range) {\n        const module = this.quill.getModule('table');\n        if (module) {\n          // @ts-expect-error\n          const [table, row, cell, offset] = module.getTable(range);\n          const shift = tableSide(table, row, cell, offset);\n          if (shift == null) return;\n          let index = table.offset();\n          if (shift < 0) {\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index + 1, range.length, Quill.sources.SILENT);\n          } else if (shift > 0) {\n            index += table.length();\n            const delta = new Delta().retain(index).insert('\\n');\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(index, Quill.sources.USER);\n          }\n        }\n      }\n    },\n    'table tab': {\n      key: 'Tab',\n      shiftKey: null,\n      format: ['table'],\n      handler(range, context) {\n        const {\n          event,\n          line: cell\n        } = context;\n        const offset = cell.offset(this.quill.scroll);\n        if (event.shiftKey) {\n          this.quill.setSelection(offset - 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(offset + cell.length(), Quill.sources.USER);\n        }\n      }\n    },\n    'list autofill': {\n      key: ' ',\n      shiftKey: null,\n      collapsed: true,\n      format: {\n        'code-block': false,\n        blockquote: false,\n        table: false\n      },\n      prefix: /^\\s*?(\\d+\\.|-|\\*|\\[ ?\\]|\\[x\\])$/,\n      handler(range, context) {\n        if (this.quill.scroll.query('list') == null) return true;\n        const {\n          length\n        } = context.prefix;\n        const [line, offset] = this.quill.getLine(range.index);\n        if (offset > length) return true;\n        let value;\n        switch (context.prefix.trim()) {\n          case '[]':\n          case '[ ]':\n            value = 'unchecked';\n            break;\n          case '[x]':\n            value = 'checked';\n            break;\n          case '-':\n          case '*':\n            value = 'bullet';\n            break;\n          default:\n            value = 'ordered';\n        }\n        this.quill.insertText(range.index, ' ', Quill.sources.USER);\n        this.quill.history.cutoff();\n        const delta = new Delta().retain(range.index - offset).delete(length + 1)\n        // @ts-expect-error Fix me later\n        .retain(line.length() - 2 - offset).retain(1, {\n          list: value\n        });\n        this.quill.updateContents(delta, Quill.sources.USER);\n        this.quill.history.cutoff();\n        this.quill.setSelection(range.index - length, Quill.sources.SILENT);\n        return false;\n      }\n    },\n    'code exit': {\n      key: 'Enter',\n      collapsed: true,\n      format: ['code-block'],\n      prefix: /^$/,\n      suffix: /^\\s*$/,\n      handler(range) {\n        const [line, offset] = this.quill.getLine(range.index);\n        let numLines = 2;\n        let cur = line;\n        while (cur != null && cur.length() <= 1 && cur.formats()['code-block']) {\n          // @ts-expect-error\n          cur = cur.prev;\n          numLines -= 1;\n          // Requisite prev lines are empty\n          if (numLines <= 0) {\n            const delta = new Delta()\n            // @ts-expect-error Fix me later\n            .retain(range.index + line.length() - offset - 2).retain(1, {\n              'code-block': null\n            }).delete(1);\n            this.quill.updateContents(delta, Quill.sources.USER);\n            this.quill.setSelection(range.index - 1, Quill.sources.SILENT);\n            return false;\n          }\n        }\n        return true;\n      }\n    },\n    'embed left': makeEmbedArrowHandler('ArrowLeft', false),\n    'embed left shift': makeEmbedArrowHandler('ArrowLeft', true),\n    'embed right': makeEmbedArrowHandler('ArrowRight', false),\n    'embed right shift': makeEmbedArrowHandler('ArrowRight', true),\n    'table down': makeTableArrowHandler(false),\n    'table up': makeTableArrowHandler(true)\n  }\n};\nKeyboard.DEFAULTS = defaultOptions;\nfunction makeCodeBlockHandler(indent) {\n  return {\n    key: 'Tab',\n    shiftKey: !indent,\n    format: {\n      'code-block': true\n    },\n    handler(range, _ref) {\n      let {\n        event\n      } = _ref;\n      const CodeBlock = this.quill.scroll.query('code-block');\n      // @ts-expect-error\n      const {\n        TAB\n      } = CodeBlock;\n      if (range.length === 0 && !event.shiftKey) {\n        this.quill.insertText(range.index, TAB, Quill.sources.USER);\n        this.quill.setSelection(range.index + TAB.length, Quill.sources.SILENT);\n        return;\n      }\n      const lines = range.length === 0 ? this.quill.getLines(range.index, 1) : this.quill.getLines(range);\n      let {\n        index,\n        length\n      } = range;\n      lines.forEach((line, i) => {\n        if (indent) {\n          line.insertAt(0, TAB);\n          if (i === 0) {\n            index += TAB.length;\n          } else {\n            length += TAB.length;\n          }\n          // @ts-expect-error Fix me later\n        } else if (line.domNode.textContent.startsWith(TAB)) {\n          line.deleteAt(0, TAB.length);\n          if (i === 0) {\n            index -= TAB.length;\n          } else {\n            length -= TAB.length;\n          }\n        }\n      });\n      this.quill.update(Quill.sources.USER);\n      this.quill.setSelection(index, length, Quill.sources.SILENT);\n    }\n  };\n}\nfunction makeEmbedArrowHandler(key, shiftKey) {\n  const where = key === 'ArrowLeft' ? 'prefix' : 'suffix';\n  return {\n    key,\n    shiftKey,\n    altKey: null,\n    [where]: /^$/,\n    handler(range) {\n      let {\n        index\n      } = range;\n      if (key === 'ArrowRight') {\n        index += range.length + 1;\n      }\n      const [leaf] = this.quill.getLeaf(index);\n      if (!(leaf instanceof EmbedBlot)) return true;\n      if (key === 'ArrowLeft') {\n        if (shiftKey) {\n          this.quill.setSelection(range.index - 1, range.length + 1, Quill.sources.USER);\n        } else {\n          this.quill.setSelection(range.index - 1, Quill.sources.USER);\n        }\n      } else if (shiftKey) {\n        this.quill.setSelection(range.index, range.length + 1, Quill.sources.USER);\n      } else {\n        this.quill.setSelection(range.index + range.length + 1, Quill.sources.USER);\n      }\n      return false;\n    }\n  };\n}\nfunction makeFormatHandler(format) {\n  return {\n    key: format[0],\n    shortKey: true,\n    handler(range, context) {\n      this.quill.format(format, !context.format[format], Quill.sources.USER);\n    }\n  };\n}\nfunction makeTableArrowHandler(up) {\n  return {\n    key: up ? 'ArrowUp' : 'ArrowDown',\n    collapsed: true,\n    format: ['table'],\n    handler(range, context) {\n      // TODO move to table module\n      const key = up ? 'prev' : 'next';\n      const cell = context.line;\n      const targetRow = cell.parent[key];\n      if (targetRow != null) {\n        if (targetRow.statics.blotName === 'table-row') {\n          // @ts-expect-error\n          let targetCell = targetRow.children.head;\n          let cur = cell;\n          while (cur.prev != null) {\n            // @ts-expect-error\n            cur = cur.prev;\n            targetCell = targetCell.next;\n          }\n          const index = targetCell.offset(this.quill.scroll) + Math.min(context.offset, targetCell.length() - 1);\n          this.quill.setSelection(index, 0, Quill.sources.USER);\n        }\n      } else {\n        // @ts-expect-error\n        const targetLine = cell.table()[key];\n        if (targetLine != null) {\n          if (up) {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll) + targetLine.length() - 1, 0, Quill.sources.USER);\n          } else {\n            this.quill.setSelection(targetLine.offset(this.quill.scroll), 0, Quill.sources.USER);\n          }\n        }\n      }\n      return false;\n    }\n  };\n}\nfunction normalize(binding) {\n  if (typeof binding === 'string' || typeof binding === 'number') {\n    binding = {\n      key: binding\n    };\n  } else if (typeof binding === 'object') {\n    binding = cloneDeep(binding);\n  } else {\n    return null;\n  }\n  if (binding.shortKey) {\n    binding[SHORTKEY] = binding.shortKey;\n    delete binding.shortKey;\n  }\n  return binding;\n}\n\n// TODO: Move into quill.ts or editor.ts\nfunction deleteRange(_ref2) {\n  let {\n    quill,\n    range\n  } = _ref2;\n  const lines = quill.getLines(range);\n  let formats = {};\n  if (lines.length > 1) {\n    const firstFormats = lines[0].formats();\n    const lastFormats = lines[lines.length - 1].formats();\n    formats = AttributeMap.diff(lastFormats, firstFormats) || {};\n  }\n  quill.deleteText(range, Quill.sources.USER);\n  if (Object.keys(formats).length > 0) {\n    quill.formatLine(range.index, 1, formats, Quill.sources.USER);\n  }\n  quill.setSelection(range.index, Quill.sources.SILENT);\n}\nfunction tableSide(_table, row, cell, offset) {\n  if (row.prev == null && row.next == null) {\n    if (cell.prev == null && cell.next == null) {\n      return offset === 0 ? -1 : 1;\n    }\n    return cell.prev == null ? -1 : 1;\n  }\n  if (row.prev == null) {\n    return -1;\n  }\n  if (row.next == null) {\n    return 1;\n  }\n  return null;\n}\nexport { Keyboard as default, SHORTKEY, normalize, deleteRange };\n//# sourceMappingURL=keyboard.js.map","const normalWeightRegexp = /font-weight:\\s*normal/;\nconst blockTagNames = ['P', 'OL', 'UL'];\nconst isBlockElement = element => {\n  return element && blockTagNames.includes(element.tagName);\n};\nconst normalizeEmptyLines = doc => {\n  Array.from(doc.querySelectorAll('br')).filter(br => isBlockElement(br.previousElementSibling) && isBlockElement(br.nextElementSibling)).forEach(br => {\n    br.parentNode?.removeChild(br);\n  });\n};\nconst normalizeFontWeight = doc => {\n  Array.from(doc.querySelectorAll('b[style*=\"font-weight\"]')).filter(node => node.getAttribute('style')?.match(normalWeightRegexp)).forEach(node => {\n    const fragment = doc.createDocumentFragment();\n    fragment.append(...node.childNodes);\n    node.parentNode?.replaceChild(fragment, node);\n  });\n};\nexport default function normalize(doc) {\n  if (doc.querySelector('[id^=\"docs-internal-guid-\"]')) {\n    normalizeFontWeight(doc);\n    normalizeEmptyLines(doc);\n  }\n}\n//# sourceMappingURL=googleDocs.js.map","const ignoreRegexp = /\\bmso-list:[^;]*ignore/i;\nconst idRegexp = /\\bmso-list:[^;]*\\bl(\\d+)/i;\nconst indentRegexp = /\\bmso-list:[^;]*\\blevel(\\d+)/i;\nconst parseListItem = (element, html) => {\n  const style = element.getAttribute('style');\n  const idMatch = style?.match(idRegexp);\n  if (!idMatch) {\n    return null;\n  }\n  const id = Number(idMatch[1]);\n  const indentMatch = style?.match(indentRegexp);\n  const indent = indentMatch ? Number(indentMatch[1]) : 1;\n  const typeRegexp = new RegExp(`@list l${id}:level${indent}\\\\s*\\\\{[^\\\\}]*mso-level-number-format:\\\\s*([\\\\w-]+)`, 'i');\n  const typeMatch = html.match(typeRegexp);\n  const type = typeMatch && typeMatch[1] === 'bullet' ? 'bullet' : 'ordered';\n  return {\n    id,\n    indent,\n    type,\n    element\n  };\n};\n\n// list items are represented as `p` tags with styles like `mso-list: l0 level1` where:\n// 1. \"0\" in \"l0\" means the list item id;\n// 2. \"1\" in \"level1\" means the indent level, starting from 1.\nconst normalizeListItem = doc => {\n  const msoList = Array.from(doc.querySelectorAll('[style*=mso-list]'));\n  const ignored = [];\n  const others = [];\n  msoList.forEach(node => {\n    const shouldIgnore = (node.getAttribute('style') || '').match(ignoreRegexp);\n    if (shouldIgnore) {\n      ignored.push(node);\n    } else {\n      others.push(node);\n    }\n  });\n\n  // Each list item contains a marker wrapped with \"mso-list: Ignore\".\n  ignored.forEach(node => node.parentNode?.removeChild(node));\n\n  // The list stype is not defined inline with the tag, instead, it's in the\n  // style tag so we need to pass the html as a string.\n  const html = doc.documentElement.innerHTML;\n  const listItems = others.map(element => parseListItem(element, html)).filter(parsed => parsed);\n  while (listItems.length) {\n    const childListItems = [];\n    let current = listItems.shift();\n    // Group continuous items into the same group (aka \"ul\")\n    while (current) {\n      childListItems.push(current);\n      current = listItems.length && listItems[0]?.element === current.element.nextElementSibling &&\n      // Different id means the next item doesn't belong to this group.\n      listItems[0].id === current.id ? listItems.shift() : null;\n    }\n    const ul = document.createElement('ul');\n    childListItems.forEach(listItem => {\n      const li = document.createElement('li');\n      li.setAttribute('data-list', listItem.type);\n      if (listItem.indent > 1) {\n        li.setAttribute('class', `ql-indent-${listItem.indent - 1}`);\n      }\n      li.innerHTML = listItem.element.innerHTML;\n      ul.appendChild(li);\n    });\n    const element = childListItems[0]?.element;\n    const {\n      parentNode\n    } = element ?? {};\n    if (element) {\n      parentNode?.replaceChild(ul, element);\n    }\n    childListItems.slice(1).forEach(_ref => {\n      let {\n        element: e\n      } = _ref;\n      parentNode?.removeChild(e);\n    });\n  }\n};\nexport default function normalize(doc) {\n  if (doc.documentElement.getAttribute('xmlns:w') === 'urn:schemas-microsoft-com:office:word') {\n    normalizeListItem(doc);\n  }\n}\n//# sourceMappingURL=msWord.js.map","import googleDocs from './normalizers/googleDocs.js';\nimport msWord from './normalizers/msWord.js';\nconst NORMALIZERS = [msWord, googleDocs];\nconst normalizeExternalHTML = doc => {\n  if (doc.documentElement) {\n    NORMALIZERS.forEach(normalize => {\n      normalize(doc);\n    });\n  }\n};\nexport default normalizeExternalHTML;\n//# sourceMappingURL=index.js.map","import { Attributor, BlockBlot, ClassAttributor, EmbedBlot, Scope, StyleAttributor } from 'parchment';\nimport Delta from 'quill-delta';\nimport { BlockEmbed } from '../blots/block.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport { AlignAttribute, AlignStyle } from '../formats/align.js';\nimport { BackgroundStyle } from '../formats/background.js';\nimport CodeBlock from '../formats/code.js';\nimport { ColorStyle } from '../formats/color.js';\nimport { DirectionAttribute, DirectionStyle } from '../formats/direction.js';\nimport { FontStyle } from '../formats/font.js';\nimport { SizeStyle } from '../formats/size.js';\nimport { deleteRange } from './keyboard.js';\nimport normalizeExternalHTML from './normalizeExternalHTML/index.js';\nconst debug = logger('quill:clipboard');\nconst CLIPBOARD_CONFIG = [[Node.TEXT_NODE, matchText], [Node.TEXT_NODE, matchNewline], ['br', matchBreak], [Node.ELEMENT_NODE, matchNewline], [Node.ELEMENT_NODE, matchBlot], [Node.ELEMENT_NODE, matchAttributor], [Node.ELEMENT_NODE, matchStyles], ['li', matchIndent], ['ol, ul', matchList], ['pre', matchCodeBlock], ['tr', matchTable], ['b', createMatchAlias('bold')], ['i', createMatchAlias('italic')], ['strike', createMatchAlias('strike')], ['style', matchIgnore]];\nconst ATTRIBUTE_ATTRIBUTORS = [AlignAttribute, DirectionAttribute].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\nconst STYLE_ATTRIBUTORS = [AlignStyle, BackgroundStyle, ColorStyle, DirectionStyle, FontStyle, SizeStyle].reduce((memo, attr) => {\n  memo[attr.keyName] = attr;\n  return memo;\n}, {});\nclass Clipboard extends Module {\n  static DEFAULTS = {\n    matchers: []\n  };\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.root.addEventListener('copy', e => this.onCaptureCopy(e, false));\n    this.quill.root.addEventListener('cut', e => this.onCaptureCopy(e, true));\n    this.quill.root.addEventListener('paste', this.onCapturePaste.bind(this));\n    this.matchers = [];\n    CLIPBOARD_CONFIG.concat(this.options.matchers ?? []).forEach(_ref => {\n      let [selector, matcher] = _ref;\n      this.addMatcher(selector, matcher);\n    });\n  }\n  addMatcher(selector, matcher) {\n    this.matchers.push([selector, matcher]);\n  }\n  convert(_ref2) {\n    let {\n      html,\n      text\n    } = _ref2;\n    let formats = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};\n    if (formats[CodeBlock.blotName]) {\n      return new Delta().insert(text || '', {\n        [CodeBlock.blotName]: formats[CodeBlock.blotName]\n      });\n    }\n    if (!html) {\n      return new Delta().insert(text || '', formats);\n    }\n    const delta = this.convertHTML(html);\n    // Remove trailing newline\n    if (deltaEndsWith(delta, '\\n') && (delta.ops[delta.ops.length - 1].attributes == null || formats.table)) {\n      return delta.compose(new Delta().retain(delta.length() - 1).delete(1));\n    }\n    return delta;\n  }\n  normalizeHTML(doc) {\n    normalizeExternalHTML(doc);\n  }\n  convertHTML(html) {\n    const doc = new DOMParser().parseFromString(html, 'text/html');\n    this.normalizeHTML(doc);\n    const container = doc.body;\n    const nodeMatches = new WeakMap();\n    const [elementMatchers, textMatchers] = this.prepareMatching(container, nodeMatches);\n    return traverse(this.quill.scroll, container, elementMatchers, textMatchers, nodeMatches);\n  }\n  dangerouslyPasteHTML(index, html) {\n    let source = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : Quill.sources.API;\n    if (typeof index === 'string') {\n      const delta = this.convert({\n        html: index,\n        text: ''\n      });\n      // @ts-expect-error\n      this.quill.setContents(delta, html);\n      this.quill.setSelection(0, Quill.sources.SILENT);\n    } else {\n      const paste = this.convert({\n        html,\n        text: ''\n      });\n      this.quill.updateContents(new Delta().retain(index).concat(paste), source);\n      this.quill.setSelection(index + paste.length(), Quill.sources.SILENT);\n    }\n  }\n  onCaptureCopy(e) {\n    let isCut = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (e.defaultPrevented) return;\n    e.preventDefault();\n    const [range] = this.quill.selection.getRange();\n    if (range == null) return;\n    const {\n      html,\n      text\n    } = this.onCopy(range, isCut);\n    e.clipboardData?.setData('text/plain', text);\n    e.clipboardData?.setData('text/html', html);\n    if (isCut) {\n      deleteRange({\n        range,\n        quill: this.quill\n      });\n    }\n  }\n\n  /*\n   * https://www.iana.org/assignments/media-types/text/uri-list\n   */\n  normalizeURIList(urlList) {\n    return urlList.split(/\\r?\\n/)\n    // Ignore all comments\n    .filter(url => url[0] !== '#').join('\\n');\n  }\n  onCapturePaste(e) {\n    if (e.defaultPrevented || !this.quill.isEnabled()) return;\n    e.preventDefault();\n    const range = this.quill.getSelection(true);\n    if (range == null) return;\n    const html = e.clipboardData?.getData('text/html');\n    let text = e.clipboardData?.getData('text/plain');\n    if (!html && !text) {\n      const urlList = e.clipboardData?.getData('text/uri-list');\n      if (urlList) {\n        text = this.normalizeURIList(urlList);\n      }\n    }\n    const files = Array.from(e.clipboardData?.files || []);\n    if (!html && files.length > 0) {\n      this.quill.uploader.upload(range, files);\n      return;\n    }\n    if (html && files.length > 0) {\n      const doc = new DOMParser().parseFromString(html, 'text/html');\n      if (doc.body.childElementCount === 1 && doc.body.firstElementChild?.tagName === 'IMG') {\n        this.quill.uploader.upload(range, files);\n        return;\n      }\n    }\n    this.onPaste(range, {\n      html,\n      text\n    });\n  }\n  onCopy(range) {\n    const text = this.quill.getText(range);\n    const html = this.quill.getSemanticHTML(range);\n    return {\n      html,\n      text\n    };\n  }\n  onPaste(range, _ref3) {\n    let {\n      text,\n      html\n    } = _ref3;\n    const formats = this.quill.getFormat(range.index);\n    const pastedDelta = this.convert({\n      text,\n      html\n    }, formats);\n    debug.log('onPaste', pastedDelta, {\n      text,\n      html\n    });\n    const delta = new Delta().retain(range.index).delete(range.length).concat(pastedDelta);\n    this.quill.updateContents(delta, Quill.sources.USER);\n    // range.length contributes to delta.length()\n    this.quill.setSelection(delta.length() - range.length, Quill.sources.SILENT);\n    this.quill.scrollSelectionIntoView();\n  }\n  prepareMatching(container, nodeMatches) {\n    const elementMatchers = [];\n    const textMatchers = [];\n    this.matchers.forEach(pair => {\n      const [selector, matcher] = pair;\n      switch (selector) {\n        case Node.TEXT_NODE:\n          textMatchers.push(matcher);\n          break;\n        case Node.ELEMENT_NODE:\n          elementMatchers.push(matcher);\n          break;\n        default:\n          Array.from(container.querySelectorAll(selector)).forEach(node => {\n            if (nodeMatches.has(node)) {\n              const matches = nodeMatches.get(node);\n              matches?.push(matcher);\n            } else {\n              nodeMatches.set(node, [matcher]);\n            }\n          });\n          break;\n      }\n    });\n    return [elementMatchers, textMatchers];\n  }\n}\nfunction applyFormat(delta, format, value, scroll) {\n  if (!scroll.query(format)) {\n    return delta;\n  }\n  return delta.reduce((newDelta, op) => {\n    if (!op.insert) return newDelta;\n    if (op.attributes && op.attributes[format]) {\n      return newDelta.push(op);\n    }\n    const formats = value ? {\n      [format]: value\n    } : {};\n    return newDelta.insert(op.insert, {\n      ...formats,\n      ...op.attributes\n    });\n  }, new Delta());\n}\nfunction deltaEndsWith(delta, text) {\n  let endText = '';\n  for (let i = delta.ops.length - 1; i >= 0 && endText.length < text.length; --i // eslint-disable-line no-plusplus\n  ) {\n    const op = delta.ops[i];\n    if (typeof op.insert !== 'string') break;\n    endText = op.insert + endText;\n  }\n  return endText.slice(-1 * text.length) === text;\n}\nfunction isLine(node, scroll) {\n  if (!(node instanceof Element)) return false;\n  const match = scroll.query(node);\n  // @ts-expect-error\n  if (match && match.prototype instanceof EmbedBlot) return false;\n  return ['address', 'article', 'blockquote', 'canvas', 'dd', 'div', 'dl', 'dt', 'fieldset', 'figcaption', 'figure', 'footer', 'form', 'h1', 'h2', 'h3', 'h4', 'h5', 'h6', 'header', 'iframe', 'li', 'main', 'nav', 'ol', 'output', 'p', 'pre', 'section', 'table', 'td', 'tr', 'ul', 'video'].includes(node.tagName.toLowerCase());\n}\nfunction isBetweenInlineElements(node, scroll) {\n  return node.previousElementSibling && node.nextElementSibling && !isLine(node.previousElementSibling, scroll) && !isLine(node.nextElementSibling, scroll);\n}\nconst preNodes = new WeakMap();\nfunction isPre(node) {\n  if (node == null) return false;\n  if (!preNodes.has(node)) {\n    // @ts-expect-error\n    if (node.tagName === 'PRE') {\n      preNodes.set(node, true);\n    } else {\n      preNodes.set(node, isPre(node.parentNode));\n    }\n  }\n  return preNodes.get(node);\n}\nfunction traverse(scroll, node, elementMatchers, textMatchers, nodeMatches) {\n  // Post-order\n  if (node.nodeType === node.TEXT_NODE) {\n    return textMatchers.reduce((delta, matcher) => {\n      return matcher(node, delta, scroll);\n    }, new Delta());\n  }\n  if (node.nodeType === node.ELEMENT_NODE) {\n    return Array.from(node.childNodes || []).reduce((delta, childNode) => {\n      let childrenDelta = traverse(scroll, childNode, elementMatchers, textMatchers, nodeMatches);\n      if (childNode.nodeType === node.ELEMENT_NODE) {\n        childrenDelta = elementMatchers.reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n        childrenDelta = (nodeMatches.get(childNode) || []).reduce((reducedDelta, matcher) => {\n          return matcher(childNode, reducedDelta, scroll);\n        }, childrenDelta);\n      }\n      return delta.concat(childrenDelta);\n    }, new Delta());\n  }\n  return new Delta();\n}\nfunction createMatchAlias(format) {\n  return (_node, delta, scroll) => {\n    return applyFormat(delta, format, true, scroll);\n  };\n}\nfunction matchAttributor(node, delta, scroll) {\n  const attributes = Attributor.keys(node);\n  const classes = ClassAttributor.keys(node);\n  const styles = StyleAttributor.keys(node);\n  const formats = {};\n  attributes.concat(classes).concat(styles).forEach(name => {\n    let attr = scroll.query(name, Scope.ATTRIBUTE);\n    if (attr != null) {\n      formats[attr.attrName] = attr.value(node);\n      if (formats[attr.attrName]) return;\n    }\n    attr = ATTRIBUTE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n    attr = STYLE_ATTRIBUTORS[name];\n    if (attr != null && (attr.attrName === name || attr.keyName === name)) {\n      attr = STYLE_ATTRIBUTORS[name];\n      formats[attr.attrName] = attr.value(node) || undefined;\n    }\n  });\n  return Object.entries(formats).reduce((newDelta, _ref4) => {\n    let [name, value] = _ref4;\n    return applyFormat(newDelta, name, value, scroll);\n  }, delta);\n}\nfunction matchBlot(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null) return delta;\n  // @ts-expect-error\n  if (match.prototype instanceof EmbedBlot) {\n    const embed = {};\n    // @ts-expect-error\n    const value = match.value(node);\n    if (value != null) {\n      // @ts-expect-error\n      embed[match.blotName] = value;\n      // @ts-expect-error\n      return new Delta().insert(embed, match.formats(node, scroll));\n    }\n  } else {\n    // @ts-expect-error\n    if (match.prototype instanceof BlockBlot && !deltaEndsWith(delta, '\\n')) {\n      delta.insert('\\n');\n    }\n    if ('blotName' in match && 'formats' in match && typeof match.formats === 'function') {\n      return applyFormat(delta, match.blotName, match.formats(node, scroll), scroll);\n    }\n  }\n  return delta;\n}\nfunction matchBreak(node, delta) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    delta.insert('\\n');\n  }\n  return delta;\n}\nfunction matchCodeBlock(node, delta, scroll) {\n  const match = scroll.query('code-block');\n  const language = match && 'formats' in match && typeof match.formats === 'function' ? match.formats(node, scroll) : true;\n  return applyFormat(delta, 'code-block', language, scroll);\n}\nfunction matchIgnore() {\n  return new Delta();\n}\nfunction matchIndent(node, delta, scroll) {\n  const match = scroll.query(node);\n  if (match == null ||\n  // @ts-expect-error\n  match.blotName !== 'list' || !deltaEndsWith(delta, '\\n')) {\n    return delta;\n  }\n  let indent = -1;\n  let parent = node.parentNode;\n  while (parent != null) {\n    // @ts-expect-error\n    if (['OL', 'UL'].includes(parent.tagName)) {\n      indent += 1;\n    }\n    parent = parent.parentNode;\n  }\n  if (indent <= 0) return delta;\n  return delta.reduce((composed, op) => {\n    if (!op.insert) return composed;\n    if (op.attributes && typeof op.attributes.indent === 'number') {\n      return composed.push(op);\n    }\n    return composed.insert(op.insert, {\n      indent,\n      ...(op.attributes || {})\n    });\n  }, new Delta());\n}\nfunction matchList(node, delta, scroll) {\n  const element = node;\n  let list = element.tagName === 'OL' ? 'ordered' : 'bullet';\n  const checkedAttr = element.getAttribute('data-checked');\n  if (checkedAttr) {\n    list = checkedAttr === 'true' ? 'checked' : 'unchecked';\n  }\n  return applyFormat(delta, 'list', list, scroll);\n}\nfunction matchNewline(node, delta, scroll) {\n  if (!deltaEndsWith(delta, '\\n')) {\n    if (isLine(node, scroll) && (node.childNodes.length > 0 || node instanceof HTMLParagraphElement)) {\n      return delta.insert('\\n');\n    }\n    if (delta.length() > 0 && node.nextSibling) {\n      let nextSibling = node.nextSibling;\n      while (nextSibling != null) {\n        if (isLine(nextSibling, scroll)) {\n          return delta.insert('\\n');\n        }\n        const match = scroll.query(nextSibling);\n        // @ts-expect-error\n        if (match && match.prototype instanceof BlockEmbed) {\n          return delta.insert('\\n');\n        }\n        nextSibling = nextSibling.firstChild;\n      }\n    }\n  }\n  return delta;\n}\nfunction matchStyles(node, delta, scroll) {\n  const formats = {};\n  const style = node.style || {};\n  if (style.fontStyle === 'italic') {\n    formats.italic = true;\n  }\n  if (style.textDecoration === 'underline') {\n    formats.underline = true;\n  }\n  if (style.textDecoration === 'line-through') {\n    formats.strike = true;\n  }\n  if (style.fontWeight?.startsWith('bold') ||\n  // @ts-expect-error Fix me later\n  parseInt(style.fontWeight, 10) >= 700) {\n    formats.bold = true;\n  }\n  delta = Object.entries(formats).reduce((newDelta, _ref5) => {\n    let [name, value] = _ref5;\n    return applyFormat(newDelta, name, value, scroll);\n  }, delta);\n  // @ts-expect-error\n  if (parseFloat(style.textIndent || 0) > 0) {\n    // Could be 0.5in\n    return new Delta().insert('\\t').concat(delta);\n  }\n  return delta;\n}\nfunction matchTable(node, delta, scroll) {\n  const table = node.parentElement?.tagName === 'TABLE' ? node.parentElement : node.parentElement?.parentElement;\n  if (table != null) {\n    const rows = Array.from(table.querySelectorAll('tr'));\n    const row = rows.indexOf(node) + 1;\n    return applyFormat(delta, 'table', row, scroll);\n  }\n  return delta;\n}\nfunction matchText(node, delta, scroll) {\n  // @ts-expect-error\n  let text = node.data;\n  // Word represents empty line with <o:p>&nbsp;</o:p>\n  if (node.parentElement?.tagName === 'O:P') {\n    return delta.insert(text.trim());\n  }\n  if (!isPre(node)) {\n    if (text.trim().length === 0 && text.includes('\\n') && !isBetweenInlineElements(node, scroll)) {\n      return delta;\n    }\n    const replacer = (collapse, match) => {\n      const replaced = match.replace(/[^\\u00a0]/g, ''); // \\u00a0 is nbsp;\n      return replaced.length < 1 && collapse ? ' ' : replaced;\n    };\n    text = text.replace(/\\r\\n/g, ' ').replace(/\\n/g, ' ');\n    text = text.replace(/\\s\\s+/g, replacer.bind(replacer, true)); // collapse whitespace\n    if (node.previousSibling == null && node.parentElement != null && isLine(node.parentElement, scroll) || node.previousSibling instanceof Element && isLine(node.previousSibling, scroll)) {\n      text = text.replace(/^\\s+/, replacer.bind(replacer, false));\n    }\n    if (node.nextSibling == null && node.parentElement != null && isLine(node.parentElement, scroll) || node.nextSibling instanceof Element && isLine(node.nextSibling, scroll)) {\n      text = text.replace(/\\s+$/, replacer.bind(replacer, false));\n    }\n  }\n  return delta.insert(text);\n}\nexport { Clipboard as default, matchAttributor, matchBlot, matchNewline, matchText, traverse };\n//# sourceMappingURL=clipboard.js.map","import { Scope } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nclass History extends Module {\n  static DEFAULTS = {\n    delay: 1000,\n    maxStack: 100,\n    userOnly: false\n  };\n  lastRecorded = 0;\n  ignoreChange = false;\n  stack = {\n    undo: [],\n    redo: []\n  };\n  currentRange = null;\n  constructor(quill, options) {\n    super(quill, options);\n    this.quill.on(Quill.events.EDITOR_CHANGE, (eventName, value, oldValue, source) => {\n      if (eventName === Quill.events.SELECTION_CHANGE) {\n        if (value && source !== Quill.sources.SILENT) {\n          this.currentRange = value;\n        }\n      } else if (eventName === Quill.events.TEXT_CHANGE) {\n        if (!this.ignoreChange) {\n          if (!this.options.userOnly || source === Quill.sources.USER) {\n            this.record(value, oldValue);\n          } else {\n            this.transform(value);\n          }\n        }\n        this.currentRange = transformRange(this.currentRange, value);\n      }\n    });\n    this.quill.keyboard.addBinding({\n      key: 'z',\n      shortKey: true\n    }, this.undo.bind(this));\n    this.quill.keyboard.addBinding({\n      key: ['z', 'Z'],\n      shortKey: true,\n      shiftKey: true\n    }, this.redo.bind(this));\n    if (/Win/i.test(navigator.platform)) {\n      this.quill.keyboard.addBinding({\n        key: 'y',\n        shortKey: true\n      }, this.redo.bind(this));\n    }\n    this.quill.root.addEventListener('beforeinput', event => {\n      if (event.inputType === 'historyUndo') {\n        this.undo();\n        event.preventDefault();\n      } else if (event.inputType === 'historyRedo') {\n        this.redo();\n        event.preventDefault();\n      }\n    });\n  }\n  change(source, dest) {\n    if (this.stack[source].length === 0) return;\n    const item = this.stack[source].pop();\n    if (!item) return;\n    const base = this.quill.getContents();\n    const inverseDelta = item.delta.invert(base);\n    this.stack[dest].push({\n      delta: inverseDelta,\n      range: transformRange(item.range, inverseDelta)\n    });\n    this.lastRecorded = 0;\n    this.ignoreChange = true;\n    this.quill.updateContents(item.delta, Quill.sources.USER);\n    this.ignoreChange = false;\n    this.restoreSelection(item);\n  }\n  clear() {\n    this.stack = {\n      undo: [],\n      redo: []\n    };\n  }\n  cutoff() {\n    this.lastRecorded = 0;\n  }\n  record(changeDelta, oldDelta) {\n    if (changeDelta.ops.length === 0) return;\n    this.stack.redo = [];\n    let undoDelta = changeDelta.invert(oldDelta);\n    let undoRange = this.currentRange;\n    const timestamp = Date.now();\n    if (\n    // @ts-expect-error Fix me later\n    this.lastRecorded + this.options.delay > timestamp && this.stack.undo.length > 0) {\n      const item = this.stack.undo.pop();\n      if (item) {\n        undoDelta = undoDelta.compose(item.delta);\n        undoRange = item.range;\n      }\n    } else {\n      this.lastRecorded = timestamp;\n    }\n    if (undoDelta.length() === 0) return;\n    this.stack.undo.push({\n      delta: undoDelta,\n      range: undoRange\n    });\n    // @ts-expect-error Fix me later\n    if (this.stack.undo.length > this.options.maxStack) {\n      this.stack.undo.shift();\n    }\n  }\n  redo() {\n    this.change('redo', 'undo');\n  }\n  transform(delta) {\n    transformStack(this.stack.undo, delta);\n    transformStack(this.stack.redo, delta);\n  }\n  undo() {\n    this.change('undo', 'redo');\n  }\n  restoreSelection(stackItem) {\n    if (stackItem.range) {\n      this.quill.setSelection(stackItem.range, Quill.sources.USER);\n    } else {\n      const index = getLastChangeIndex(this.quill.scroll, stackItem.delta);\n      this.quill.setSelection(index, Quill.sources.USER);\n    }\n  }\n}\nfunction transformStack(stack, delta) {\n  let remoteDelta = delta;\n  for (let i = stack.length - 1; i >= 0; i -= 1) {\n    const oldItem = stack[i];\n    stack[i] = {\n      delta: remoteDelta.transform(oldItem.delta, true),\n      range: oldItem.range && transformRange(oldItem.range, remoteDelta)\n    };\n    remoteDelta = oldItem.delta.transform(remoteDelta);\n    if (stack[i].delta.length() === 0) {\n      stack.splice(i, 1);\n    }\n  }\n}\nfunction endsWithNewlineChange(scroll, delta) {\n  const lastOp = delta.ops[delta.ops.length - 1];\n  if (lastOp == null) return false;\n  if (lastOp.insert != null) {\n    return typeof lastOp.insert === 'string' && lastOp.insert.endsWith('\\n');\n  }\n  if (lastOp.attributes != null) {\n    return Object.keys(lastOp.attributes).some(attr => {\n      return scroll.query(attr, Scope.BLOCK) != null;\n    });\n  }\n  return false;\n}\nfunction getLastChangeIndex(scroll, delta) {\n  const deleteLength = delta.reduce((length, op) => {\n    return length + (op.delete || 0);\n  }, 0);\n  let changeIndex = delta.length() - deleteLength;\n  if (endsWithNewlineChange(scroll, delta)) {\n    changeIndex -= 1;\n  }\n  return changeIndex;\n}\nfunction transformRange(range, delta) {\n  if (!range) return range;\n  const start = delta.transformPosition(range.index);\n  const end = delta.transformPosition(range.index + range.length);\n  return {\n    index: start,\n    length: end - start\n  };\n}\nexport { History as default, getLastChangeIndex };\n//# sourceMappingURL=history.js.map","import Delta from 'quill-delta';\nimport Emitter from '../core/emitter.js';\nimport Module from '../core/module.js';\nclass Uploader extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener('drop', e => {\n      e.preventDefault();\n      let native = null;\n      if (document.caretRangeFromPoint) {\n        native = document.caretRangeFromPoint(e.clientX, e.clientY);\n        // @ts-expect-error\n      } else if (document.caretPositionFromPoint) {\n        // @ts-expect-error\n        const position = document.caretPositionFromPoint(e.clientX, e.clientY);\n        native = document.createRange();\n        native.setStart(position.offsetNode, position.offset);\n        native.setEnd(position.offsetNode, position.offset);\n      }\n      const normalized = native && quill.selection.normalizeNative(native);\n      if (normalized) {\n        const range = quill.selection.normalizedToRange(normalized);\n        if (e.dataTransfer?.files) {\n          this.upload(range, e.dataTransfer.files);\n        }\n      }\n    });\n  }\n  upload(range, files) {\n    const uploads = [];\n    Array.from(files).forEach(file => {\n      if (file && this.options.mimetypes?.includes(file.type)) {\n        uploads.push(file);\n      }\n    });\n    if (uploads.length > 0) {\n      // @ts-expect-error Fix me later\n      this.options.handler.call(this, range, uploads);\n    }\n  }\n}\nUploader.DEFAULTS = {\n  mimetypes: ['image/png', 'image/jpeg'],\n  handler(range, files) {\n    const promises = files.map(file => {\n      return new Promise(resolve => {\n        const reader = new FileReader();\n        reader.onload = e => {\n          // @ts-expect-error Fix me later\n          resolve(e.target.result);\n        };\n        reader.readAsDataURL(file);\n      });\n    });\n    Promise.all(promises).then(images => {\n      const update = images.reduce((delta, image) => {\n        return delta.insert({\n          image\n        });\n      }, new Delta().retain(range.index).delete(range.length));\n      this.quill.updateContents(update, Emitter.sources.USER);\n      this.quill.setSelection(range.index + images.length, Emitter.sources.SILENT);\n    });\n  }\n};\nexport default Uploader;\n//# sourceMappingURL=uploader.js.map","import Delta from 'quill-delta';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nimport { deleteRange } from './keyboard.js';\nconst INSERT_TYPES = ['insertText', 'insertReplacementText'];\nclass Input extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    quill.root.addEventListener('beforeinput', event => {\n      this.handleBeforeInput(event);\n    });\n\n    // Gboard with English input on Android triggers `compositionstart` sometimes even\n    // users are not going to type anything.\n    if (!/Android/i.test(navigator.userAgent)) {\n      quill.on(Quill.events.COMPOSITION_BEFORE_START, () => {\n        this.handleCompositionStart();\n      });\n    }\n  }\n  deleteRange(range) {\n    deleteRange({\n      range,\n      quill: this.quill\n    });\n  }\n  replaceText(range) {\n    let text = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';\n    if (range.length === 0) return false;\n    if (text) {\n      // Follow the native behavior that inherits the formats of the first character\n      const formats = this.quill.getFormat(range.index, 1);\n      this.deleteRange(range);\n      this.quill.updateContents(new Delta().retain(range.index).insert(text, formats), Quill.sources.USER);\n    } else {\n      this.deleteRange(range);\n    }\n    this.quill.setSelection(range.index + text.length, 0, Quill.sources.SILENT);\n    return true;\n  }\n  handleBeforeInput(event) {\n    if (this.quill.composition.isComposing || event.defaultPrevented || !INSERT_TYPES.includes(event.inputType)) {\n      return;\n    }\n    const staticRange = event.getTargetRanges ? event.getTargetRanges()[0] : null;\n    if (!staticRange || staticRange.collapsed === true) {\n      return;\n    }\n    const text = getPlainTextFromInputEvent(event);\n    if (text == null) {\n      return;\n    }\n    const normalized = this.quill.selection.normalizeNative(staticRange);\n    const range = normalized ? this.quill.selection.normalizedToRange(normalized) : null;\n    if (range && this.replaceText(range, text)) {\n      event.preventDefault();\n    }\n  }\n  handleCompositionStart() {\n    const range = this.quill.getSelection();\n    if (range) {\n      this.replaceText(range);\n    }\n  }\n}\nfunction getPlainTextFromInputEvent(event) {\n  // When `inputType` is \"insertText\":\n  // - `event.data` should be string (Safari uses `event.dataTransfer`).\n  // - `event.dataTransfer` should be null.\n  // When `inputType` is \"insertReplacementText\":\n  // - `event.data` should be null.\n  // - `event.dataTransfer` should contain \"text/plain\" data.\n\n  if (typeof event.data === 'string') {\n    return event.data;\n  }\n  if (event.dataTransfer?.types.includes('text/plain')) {\n    return event.dataTransfer.getData('text/plain');\n  }\n  return null;\n}\nexport default Input;\n//# sourceMappingURL=input.js.map","import { ParentBlot } from 'parchment';\nimport Module from '../core/module.js';\nimport Quill from '../core/quill.js';\nconst isMac = /Mac/i.test(navigator.platform);\n\n// Export for testing\nexport const TTL_FOR_VALID_SELECTION_CHANGE = 100;\n\n// A loose check to determine if the shortcut can move the caret before a UI node:\n// <ANY_PARENT>[CARET]<div class=\"ql-ui\"></div>[CONTENT]</ANY_PARENT>\nconst canMoveCaretBeforeUINode = event => {\n  if (event.key === 'ArrowLeft' || event.key === 'ArrowRight' ||\n  // RTL scripts or moving from the end of the previous line\n  event.key === 'ArrowUp' || event.key === 'ArrowDown' || event.key === 'Home') {\n    return true;\n  }\n  if (isMac && event.key === 'a' && event.ctrlKey === true) {\n    return true;\n  }\n  return false;\n};\nclass UINode extends Module {\n  isListening = false;\n  selectionChangeDeadline = 0;\n  constructor(quill, options) {\n    super(quill, options);\n    this.handleArrowKeys();\n    this.handleNavigationShortcuts();\n  }\n  handleArrowKeys() {\n    this.quill.keyboard.addBinding({\n      key: ['ArrowLeft', 'ArrowRight'],\n      offset: 0,\n      shiftKey: null,\n      handler(range, _ref) {\n        let {\n          line,\n          event\n        } = _ref;\n        if (!(line instanceof ParentBlot) || !line.uiNode) {\n          return true;\n        }\n        const isRTL = getComputedStyle(line.domNode)['direction'] === 'rtl';\n        if (isRTL && event.key !== 'ArrowRight' || !isRTL && event.key !== 'ArrowLeft') {\n          return true;\n        }\n        this.quill.setSelection(range.index - 1, range.length + (event.shiftKey ? 1 : 0), Quill.sources.USER);\n        return false;\n      }\n    });\n  }\n  handleNavigationShortcuts() {\n    this.quill.root.addEventListener('keydown', event => {\n      if (!event.defaultPrevented && canMoveCaretBeforeUINode(event)) {\n        this.ensureListeningToSelectionChange();\n      }\n    });\n  }\n\n  /**\n   * We only listen to the `selectionchange` event when\n   * there is an intention of moving the caret to the beginning using shortcuts.\n   * This is primarily implemented to prevent infinite loops, as we are changing\n   * the selection within the handler of a `selectionchange` event.\n   */\n  ensureListeningToSelectionChange() {\n    this.selectionChangeDeadline = Date.now() + TTL_FOR_VALID_SELECTION_CHANGE;\n    if (this.isListening) return;\n    this.isListening = true;\n    const listener = () => {\n      this.isListening = false;\n      if (Date.now() <= this.selectionChangeDeadline) {\n        this.handleSelectionChange();\n      }\n    };\n    document.addEventListener('selectionchange', listener, {\n      once: true\n    });\n  }\n  handleSelectionChange() {\n    const selection = document.getSelection();\n    if (!selection) return;\n    const range = selection.getRangeAt(0);\n    if (range.collapsed !== true || range.startOffset !== 0) return;\n    const line = this.quill.scroll.find(range.startContainer);\n    if (!(line instanceof ParentBlot) || !line.uiNode) return;\n    const newRange = document.createRange();\n    newRange.setStartAfter(line.uiNode);\n    newRange.setEndAfter(line.uiNode);\n    selection.removeAllRanges();\n    selection.addRange(newRange);\n  }\n}\nexport default UINode;\n//# sourceMappingURL=uiNode.js.map","import Quill, { Parchment, Range } from './core/quill.js';\nimport Block, { BlockEmbed } from './blots/block.js';\nimport Break from './blots/break.js';\nimport Container from './blots/container.js';\nimport Cursor from './blots/cursor.js';\nimport Embed from './blots/embed.js';\nimport Inline from './blots/inline.js';\nimport Scroll from './blots/scroll.js';\nimport TextBlot from './blots/text.js';\nimport Clipboard from './modules/clipboard.js';\nimport History from './modules/history.js';\nimport Keyboard from './modules/keyboard.js';\nimport Uploader from './modules/uploader.js';\nimport Delta, { Op, OpIterator, AttributeMap } from 'quill-delta';\nimport Input from './modules/input.js';\nimport UINode from './modules/uiNode.js';\nexport { Delta, Op, OpIterator, AttributeMap, Parchment, Range };\nQuill.register({\n  'blots/block': Block,\n  'blots/block/embed': BlockEmbed,\n  'blots/break': Break,\n  'blots/container': Container,\n  'blots/cursor': Cursor,\n  'blots/embed': Embed,\n  'blots/inline': Inline,\n  'blots/scroll': Scroll,\n  'blots/text': TextBlot,\n  'modules/clipboard': Clipboard,\n  'modules/history': History,\n  'modules/keyboard': Keyboard,\n  'modules/uploader': Uploader,\n  'modules/input': Input,\n  'modules/uiNode': UINode\n});\nexport default Quill;\n//# sourceMappingURL=core.js.map","import { ClassAttributor, Scope } from 'parchment';\nclass IndentAttributor extends ClassAttributor {\n  add(node, value) {\n    let normalizedValue = 0;\n    if (value === '+1' || value === '-1') {\n      const indent = this.value(node) || 0;\n      normalizedValue = value === '+1' ? indent + 1 : indent - 1;\n    } else if (typeof value === 'number') {\n      normalizedValue = value;\n    }\n    if (normalizedValue === 0) {\n      this.remove(node);\n      return true;\n    }\n    return super.add(node, normalizedValue.toString());\n  }\n  canAdd(node, value) {\n    return super.canAdd(node, value) || super.canAdd(node, parseInt(value, 10));\n  }\n  value(node) {\n    return parseInt(super.value(node), 10) || undefined; // Don't return NaN\n  }\n}\nconst IndentClass = new IndentAttributor('indent', 'ql-indent', {\n  scope: Scope.BLOCK,\n  // @ts-expect-error\n  whitelist: [1, 2, 3, 4, 5, 6, 7, 8]\n});\nexport default IndentClass;\n//# sourceMappingURL=indent.js.map","import Block from '../blots/block.js';\nclass Blockquote extends Block {\n  static blotName = 'blockquote';\n  static tagName = 'blockquote';\n}\nexport default Blockquote;\n//# sourceMappingURL=blockquote.js.map","import Block from '../blots/block.js';\nclass Header extends Block {\n  static blotName = 'header';\n  static tagName = ['H1', 'H2', 'H3', 'H4', 'H5', 'H6'];\n  static formats(domNode) {\n    return this.tagName.indexOf(domNode.tagName) + 1;\n  }\n}\nexport default Header;\n//# sourceMappingURL=header.js.map","import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nimport Quill from '../core/quill.js';\nclass ListContainer extends Container {}\nListContainer.blotName = 'list-container';\nListContainer.tagName = 'OL';\nclass ListItem extends Block {\n  static create(value) {\n    const node = super.create();\n    node.setAttribute('data-list', value);\n    return node;\n  }\n  static formats(domNode) {\n    return domNode.getAttribute('data-list') || undefined;\n  }\n  static register() {\n    Quill.register(ListContainer);\n  }\n  constructor(scroll, domNode) {\n    super(scroll, domNode);\n    const ui = domNode.ownerDocument.createElement('span');\n    const listEventHandler = e => {\n      if (!scroll.isEnabled()) return;\n      const format = this.statics.formats(domNode, scroll);\n      if (format === 'checked') {\n        this.format('list', 'unchecked');\n        e.preventDefault();\n      } else if (format === 'unchecked') {\n        this.format('list', 'checked');\n        e.preventDefault();\n      }\n    };\n    ui.addEventListener('mousedown', listEventHandler);\n    ui.addEventListener('touchstart', listEventHandler);\n    this.attachUI(ui);\n  }\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      this.domNode.setAttribute('data-list', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nListItem.blotName = 'list';\nListItem.tagName = 'LI';\nListContainer.allowedChildren = [ListItem];\nListItem.requiredContainer = ListContainer;\nexport { ListContainer, ListItem as default };\n//# sourceMappingURL=list.js.map","import Inline from '../blots/inline.js';\nclass Bold extends Inline {\n  static blotName = 'bold';\n  static tagName = ['STRONG', 'B'];\n  static create() {\n    return super.create();\n  }\n  static formats() {\n    return true;\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.domNode.tagName !== this.statics.tagName[0]) {\n      this.replaceWith(this.statics.blotName);\n    }\n  }\n}\nexport default Bold;\n//# sourceMappingURL=bold.js.map","import Bold from './bold.js';\nclass Italic extends Bold {\n  static blotName = 'italic';\n  static tagName = ['EM', 'I'];\n}\nexport default Italic;\n//# sourceMappingURL=italic.js.map","import Inline from '../blots/inline.js';\nclass Link extends Inline {\n  static blotName = 'link';\n  static tagName = 'A';\n  static SANITIZED_URL = 'about:blank';\n  static PROTOCOL_WHITELIST = ['http', 'https', 'mailto', 'tel', 'sms'];\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('href', this.sanitize(value));\n    node.setAttribute('rel', 'noopener noreferrer');\n    node.setAttribute('target', '_blank');\n    return node;\n  }\n  static formats(domNode) {\n    return domNode.getAttribute('href');\n  }\n  static sanitize(url) {\n    return sanitize(url, this.PROTOCOL_WHITELIST) ? url : this.SANITIZED_URL;\n  }\n  format(name, value) {\n    if (name !== this.statics.blotName || !value) {\n      super.format(name, value);\n    } else {\n      // @ts-expect-error\n      this.domNode.setAttribute('href', this.constructor.sanitize(value));\n    }\n  }\n}\nfunction sanitize(url, protocols) {\n  const anchor = document.createElement('a');\n  anchor.href = url;\n  const protocol = anchor.href.slice(0, anchor.href.indexOf(':'));\n  return protocols.indexOf(protocol) > -1;\n}\nexport { Link as default, sanitize };\n//# sourceMappingURL=link.js.map","import Inline from '../blots/inline.js';\nclass Script extends Inline {\n  static blotName = 'script';\n  static tagName = ['SUB', 'SUP'];\n  static create(value) {\n    if (value === 'super') {\n      return document.createElement('sup');\n    }\n    if (value === 'sub') {\n      return document.createElement('sub');\n    }\n    return super.create(value);\n  }\n  static formats(domNode) {\n    if (domNode.tagName === 'SUB') return 'sub';\n    if (domNode.tagName === 'SUP') return 'super';\n    return undefined;\n  }\n}\nexport default Script;\n//# sourceMappingURL=script.js.map","import Bold from './bold.js';\nclass Strike extends Bold {\n  static blotName = 'strike';\n  static tagName = ['S', 'STRIKE'];\n}\nexport default Strike;\n//# sourceMappingURL=strike.js.map","import Inline from '../blots/inline.js';\nclass Underline extends Inline {\n  static blotName = 'underline';\n  static tagName = 'U';\n}\nexport default Underline;\n//# sourceMappingURL=underline.js.map","import Embed from '../blots/embed.js';\nclass Formula extends Embed {\n  static blotName = 'formula';\n  static className = 'ql-formula';\n  static tagName = 'SPAN';\n  static create(value) {\n    // @ts-expect-error\n    if (window.katex == null) {\n      throw new Error('Formula module requires KaTeX.');\n    }\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      // @ts-expect-error\n      window.katex.render(value, node, {\n        throwOnError: false,\n        errorColor: '#f00'\n      });\n      node.setAttribute('data-value', value);\n    }\n    return node;\n  }\n  static value(domNode) {\n    return domNode.getAttribute('data-value');\n  }\n  html() {\n    const {\n      formula\n    } = this.value();\n    return `<span>${formula}</span>`;\n  }\n}\nexport default Formula;\n//# sourceMappingURL=formula.js.map","import { EmbedBlot } from 'parchment';\nimport { sanitize } from './link.js';\nconst ATTRIBUTES = ['alt', 'height', 'width'];\nclass Image extends EmbedBlot {\n  static blotName = 'image';\n  static tagName = 'IMG';\n  static create(value) {\n    const node = super.create(value);\n    if (typeof value === 'string') {\n      node.setAttribute('src', this.sanitize(value));\n    }\n    return node;\n  }\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n  static match(url) {\n    return /\\.(jpe?g|gif|png)$/.test(url) || /^data:image\\/.+;base64/.test(url);\n  }\n  static sanitize(url) {\n    return sanitize(url, ['http', 'https', 'data']) ? url : '//:0';\n  }\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n}\nexport default Image;\n//# sourceMappingURL=image.js.map","import { BlockEmbed } from '../blots/block.js';\nimport Link from './link.js';\nconst ATTRIBUTES = ['height', 'width'];\nclass Video extends BlockEmbed {\n  static blotName = 'video';\n  static className = 'ql-video';\n  static tagName = 'IFRAME';\n  static create(value) {\n    const node = super.create(value);\n    node.setAttribute('frameborder', '0');\n    node.setAttribute('allowfullscreen', 'true');\n    node.setAttribute('src', this.sanitize(value));\n    return node;\n  }\n  static formats(domNode) {\n    return ATTRIBUTES.reduce((formats, attribute) => {\n      if (domNode.hasAttribute(attribute)) {\n        formats[attribute] = domNode.getAttribute(attribute);\n      }\n      return formats;\n    }, {});\n  }\n  static sanitize(url) {\n    return Link.sanitize(url);\n  }\n  static value(domNode) {\n    return domNode.getAttribute('src');\n  }\n  format(name, value) {\n    if (ATTRIBUTES.indexOf(name) > -1) {\n      if (value) {\n        this.domNode.setAttribute(name, value);\n      } else {\n        this.domNode.removeAttribute(name);\n      }\n    } else {\n      super.format(name, value);\n    }\n  }\n  html() {\n    const {\n      video\n    } = this.value();\n    return `<a href=\"${video}\">${video}</a>`;\n  }\n}\nexport default Video;\n//# sourceMappingURL=video.js.map","import Delta from 'quill-delta';\nimport { ClassAttributor, Scope } from 'parchment';\nimport Inline from '../blots/inline.js';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { blockDelta } from '../blots/block.js';\nimport BreakBlot from '../blots/break.js';\nimport CursorBlot from '../blots/cursor.js';\nimport TextBlot, { escapeText } from '../blots/text.js';\nimport CodeBlock, { CodeBlockContainer } from '../formats/code.js';\nimport { traverse } from './clipboard.js';\nconst TokenAttributor = new ClassAttributor('code-token', 'hljs', {\n  scope: Scope.INLINE\n});\nclass CodeToken extends Inline {\n  static formats(node, scroll) {\n    while (node != null && node !== scroll.domNode) {\n      if (node.classList && node.classList.contains(CodeBlock.className)) {\n        // @ts-expect-error\n        return super.formats(node, scroll);\n      }\n      // @ts-expect-error\n      node = node.parentNode;\n    }\n    return undefined;\n  }\n  constructor(scroll, domNode, value) {\n    // @ts-expect-error\n    super(scroll, domNode, value);\n    TokenAttributor.add(this.domNode, value);\n  }\n  format(format, value) {\n    if (format !== CodeToken.blotName) {\n      super.format(format, value);\n    } else if (value) {\n      TokenAttributor.add(this.domNode, value);\n    } else {\n      TokenAttributor.remove(this.domNode);\n      this.domNode.classList.remove(this.statics.className);\n    }\n  }\n  optimize() {\n    // @ts-expect-error\n    super.optimize(...arguments);\n    if (!TokenAttributor.value(this.domNode)) {\n      this.unwrap();\n    }\n  }\n}\nCodeToken.blotName = 'code-token';\nCodeToken.className = 'ql-token';\nclass SyntaxCodeBlock extends CodeBlock {\n  static create(value) {\n    const domNode = super.create(value);\n    if (typeof value === 'string') {\n      domNode.setAttribute('data-language', value);\n    }\n    return domNode;\n  }\n  static formats(domNode) {\n    // @ts-expect-error\n    return domNode.getAttribute('data-language') || 'plain';\n  }\n  static register() {} // Syntax module will register\n\n  format(name, value) {\n    if (name === this.statics.blotName && value) {\n      // @ts-expect-error\n      this.domNode.setAttribute('data-language', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n  replaceWith(name, value) {\n    this.formatAt(0, this.length(), CodeToken.blotName, false);\n    return super.replaceWith(name, value);\n  }\n}\nclass SyntaxCodeBlockContainer extends CodeBlockContainer {\n  attach() {\n    super.attach();\n    this.forceNext = false;\n    // @ts-expect-error\n    this.scroll.emitMount(this);\n  }\n  format(name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n      this.children.forEach(child => {\n        // @ts-expect-error\n        child.format(name, value);\n      });\n    }\n  }\n  formatAt(index, length, name, value) {\n    if (name === SyntaxCodeBlock.blotName) {\n      this.forceNext = true;\n    }\n    super.formatAt(index, length, name, value);\n  }\n  highlight(highlight) {\n    let forced = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.children.head == null) return;\n    const nodes = Array.from(this.domNode.childNodes).filter(node => node !== this.uiNode);\n    const text = `${nodes.map(node => node.textContent).join('\\n')}\\n`;\n    const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n    if (forced || this.forceNext || this.cachedText !== text) {\n      if (text.trim().length > 0 || this.cachedText == null) {\n        const oldDelta = this.children.reduce((delta, child) => {\n          // @ts-expect-error\n          return delta.concat(blockDelta(child, false));\n        }, new Delta());\n        const delta = highlight(text, language);\n        oldDelta.diff(delta).reduce((index, _ref) => {\n          let {\n            retain,\n            attributes\n          } = _ref;\n          // Should be all retains\n          if (!retain) return index;\n          if (attributes) {\n            Object.keys(attributes).forEach(format => {\n              if ([SyntaxCodeBlock.blotName, CodeToken.blotName].includes(format)) {\n                // @ts-expect-error\n                this.formatAt(index, retain, format, attributes[format]);\n              }\n            });\n          }\n          // @ts-expect-error\n          return index + retain;\n        }, 0);\n      }\n      this.cachedText = text;\n      this.forceNext = false;\n    }\n  }\n  html(index, length) {\n    const [codeBlock] = this.children.find(index);\n    const language = codeBlock ? SyntaxCodeBlock.formats(codeBlock.domNode) : 'plain';\n    return `<pre data-language=\"${language}\">\\n${escapeText(this.code(index, length))}\\n</pre>`;\n  }\n  optimize(context) {\n    super.optimize(context);\n    if (this.parent != null && this.children.head != null && this.uiNode != null) {\n      const language = SyntaxCodeBlock.formats(this.children.head.domNode);\n      // @ts-expect-error\n      if (language !== this.uiNode.value) {\n        // @ts-expect-error\n        this.uiNode.value = language;\n      }\n    }\n  }\n}\n// @ts-expect-error\nSyntaxCodeBlockContainer.allowedChildren = [SyntaxCodeBlock];\nSyntaxCodeBlock.requiredContainer = SyntaxCodeBlockContainer;\nSyntaxCodeBlock.allowedChildren = [CodeToken, CursorBlot, TextBlot, BreakBlot];\nconst highlight = (lib, language, text) => {\n  if (typeof lib.versionString === 'string') {\n    const majorVersion = lib.versionString.split('.')[0];\n    if (parseInt(majorVersion, 10) >= 11) {\n      return lib.highlight(text, {\n        language\n      }).value;\n    }\n  }\n  return lib.highlight(language, text).value;\n};\nclass Syntax extends Module {\n  static register() {\n    Quill.register(CodeToken, true);\n    // @ts-expect-error\n    Quill.register(SyntaxCodeBlock, true);\n    Quill.register(SyntaxCodeBlockContainer, true);\n  }\n  constructor(quill, options) {\n    super(quill, options);\n    if (this.options.hljs == null) {\n      throw new Error('Syntax module requires highlight.js. Please include the library on the page before Quill.');\n    }\n    // @ts-expect-error Fix me later\n    this.languages = this.options.languages.reduce((memo, _ref2) => {\n      let {\n        key\n      } = _ref2;\n      memo[key] = true;\n      return memo;\n    }, {});\n    this.highlightBlot = this.highlightBlot.bind(this);\n    this.initListener();\n    this.initTimer();\n  }\n  initListener() {\n    this.quill.on(Quill.events.SCROLL_BLOT_MOUNT, blot => {\n      if (!(blot instanceof SyntaxCodeBlockContainer)) return;\n      const select = this.quill.root.ownerDocument.createElement('select');\n      // @ts-expect-error Fix me later\n      this.options.languages.forEach(_ref3 => {\n        let {\n          key,\n          label\n        } = _ref3;\n        const option = select.ownerDocument.createElement('option');\n        option.textContent = label;\n        option.setAttribute('value', key);\n        select.appendChild(option);\n      });\n      select.addEventListener('change', () => {\n        blot.format(SyntaxCodeBlock.blotName, select.value);\n        this.quill.root.focus(); // Prevent scrolling\n        this.highlight(blot, true);\n      });\n      if (blot.uiNode == null) {\n        blot.attachUI(select);\n        if (blot.children.head) {\n          select.value = SyntaxCodeBlock.formats(blot.children.head.domNode);\n        }\n      }\n    });\n  }\n  initTimer() {\n    let timer = null;\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, () => {\n      if (timer) {\n        clearTimeout(timer);\n      }\n      timer = setTimeout(() => {\n        this.highlight();\n        timer = null;\n      }, this.options.interval);\n    });\n  }\n  highlight() {\n    let blot = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;\n    let force = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    if (this.quill.selection.composing) return;\n    this.quill.update(Quill.sources.USER);\n    const range = this.quill.getSelection();\n    const blots = blot == null ? this.quill.scroll.descendants(SyntaxCodeBlockContainer) : [blot];\n    blots.forEach(container => {\n      container.highlight(this.highlightBlot, force);\n    });\n    this.quill.update(Quill.sources.SILENT);\n    if (range != null) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    }\n  }\n  highlightBlot(text) {\n    let language = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'plain';\n    language = this.languages[language] ? language : 'plain';\n    if (language === 'plain') {\n      return escapeText(text).split('\\n').reduce((delta, line, i) => {\n        if (i !== 0) {\n          delta.insert('\\n', {\n            [CodeBlock.blotName]: language\n          });\n        }\n        return delta.insert(line);\n      }, new Delta());\n    }\n    const container = this.quill.root.ownerDocument.createElement('div');\n    container.classList.add(CodeBlock.className);\n    container.innerHTML = highlight(this.options.hljs, language, text);\n    return traverse(this.quill.scroll, container, [(node, delta) => {\n      // @ts-expect-error\n      const value = TokenAttributor.value(node);\n      if (value) {\n        return delta.compose(new Delta().retain(delta.length(), {\n          [CodeToken.blotName]: value\n        }));\n      }\n      return delta;\n    }], [(node, delta) => {\n      // @ts-expect-error\n      return node.data.split('\\n').reduce((memo, nodeText, i) => {\n        if (i !== 0) memo.insert('\\n', {\n          [CodeBlock.blotName]: language\n        });\n        return memo.insert(nodeText);\n      }, delta);\n    }], new WeakMap());\n  }\n}\nSyntax.DEFAULTS = {\n  hljs: (() => {\n    return window.hljs;\n  })(),\n  interval: 1000,\n  languages: [{\n    key: 'plain',\n    label: 'Plain'\n  }, {\n    key: 'bash',\n    label: 'Bash'\n  }, {\n    key: 'cpp',\n    label: 'C++'\n  }, {\n    key: 'cs',\n    label: 'C#'\n  }, {\n    key: 'css',\n    label: 'CSS'\n  }, {\n    key: 'diff',\n    label: 'Diff'\n  }, {\n    key: 'xml',\n    label: 'HTML/XML'\n  }, {\n    key: 'java',\n    label: 'Java'\n  }, {\n    key: 'javascript',\n    label: 'JavaScript'\n  }, {\n    key: 'markdown',\n    label: 'Markdown'\n  }, {\n    key: 'php',\n    label: 'PHP'\n  }, {\n    key: 'python',\n    label: 'Python'\n  }, {\n    key: 'ruby',\n    label: 'Ruby'\n  }, {\n    key: 'sql',\n    label: 'SQL'\n  }]\n};\nexport { SyntaxCodeBlock as CodeBlock, CodeToken, Syntax as default };\n//# sourceMappingURL=syntax.js.map","import Block from '../blots/block.js';\nimport Container from '../blots/container.js';\nclass TableCell extends Block {\n  static blotName = 'table';\n  static tagName = 'TD';\n  static create(value) {\n    const node = super.create();\n    if (value) {\n      node.setAttribute('data-row', value);\n    } else {\n      node.setAttribute('data-row', tableId());\n    }\n    return node;\n  }\n  static formats(domNode) {\n    if (domNode.hasAttribute('data-row')) {\n      return domNode.getAttribute('data-row');\n    }\n    return undefined;\n  }\n  cellOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n  format(name, value) {\n    if (name === TableCell.blotName && value) {\n      this.domNode.setAttribute('data-row', value);\n    } else {\n      super.format(name, value);\n    }\n  }\n  row() {\n    return this.parent;\n  }\n  rowOffset() {\n    if (this.row()) {\n      return this.row().rowOffset();\n    }\n    return -1;\n  }\n  table() {\n    return this.row() && this.row().table();\n  }\n}\nclass TableRow extends Container {\n  static blotName = 'table-row';\n  static tagName = 'TR';\n  checkMerge() {\n    // @ts-expect-error\n    if (super.checkMerge() && this.next.children.head != null) {\n      // @ts-expect-error\n      const thisHead = this.children.head.formats();\n      // @ts-expect-error\n      const thisTail = this.children.tail.formats();\n      // @ts-expect-error\n      const nextHead = this.next.children.head.formats();\n      // @ts-expect-error\n      const nextTail = this.next.children.tail.formats();\n      return thisHead.table === thisTail.table && thisHead.table === nextHead.table && thisHead.table === nextTail.table;\n    }\n    return false;\n  }\n  optimize(context) {\n    super.optimize(context);\n    this.children.forEach(child => {\n      if (child.next == null) return;\n      const childFormats = child.formats();\n      const nextFormats = child.next.formats();\n      if (childFormats.table !== nextFormats.table) {\n        const next = this.splitAfter(child);\n        if (next) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          next.optimize();\n        }\n        // We might be able to merge with prev now\n        if (this.prev) {\n          // @ts-expect-error TODO: parameters of optimize() should be a optional\n          this.prev.optimize();\n        }\n      }\n    });\n  }\n  rowOffset() {\n    if (this.parent) {\n      return this.parent.children.indexOf(this);\n    }\n    return -1;\n  }\n  table() {\n    return this.parent && this.parent.parent;\n  }\n}\nclass TableBody extends Container {\n  static blotName = 'table-body';\n  static tagName = 'TBODY';\n}\nclass TableContainer extends Container {\n  static blotName = 'table-container';\n  static tagName = 'TABLE';\n  balanceCells() {\n    const rows = this.descendants(TableRow);\n    const maxColumns = rows.reduce((max, row) => {\n      return Math.max(row.children.length, max);\n    }, 0);\n    rows.forEach(row => {\n      new Array(maxColumns - row.children.length).fill(0).forEach(() => {\n        let value;\n        if (row.children.head != null) {\n          value = TableCell.formats(row.children.head.domNode);\n        }\n        const blot = this.scroll.create(TableCell.blotName, value);\n        row.appendChild(blot);\n        // @ts-expect-error TODO: parameters of optimize() should be a optional\n        blot.optimize(); // Add break blot\n      });\n    });\n  }\n  cells(column) {\n    return this.rows().map(row => row.children.at(column));\n  }\n  deleteColumn(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const cell = row.children.at(index);\n      if (cell != null) {\n        cell.remove();\n      }\n    });\n  }\n  insertColumn(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    body.children.forEach(row => {\n      const ref = row.children.at(index);\n      // @ts-expect-error\n      const value = TableCell.formats(row.children.head.domNode);\n      const cell = this.scroll.create(TableCell.blotName, value);\n      row.insertBefore(cell, ref);\n    });\n  }\n  insertRow(index) {\n    // @ts-expect-error\n    const [body] = this.descendant(TableBody);\n    if (body == null || body.children.head == null) return;\n    const id = tableId();\n    const row = this.scroll.create(TableRow.blotName);\n    body.children.head.children.forEach(() => {\n      const cell = this.scroll.create(TableCell.blotName, id);\n      row.appendChild(cell);\n    });\n    const ref = body.children.at(index);\n    body.insertBefore(row, ref);\n  }\n  rows() {\n    const body = this.children.head;\n    if (body == null) return [];\n    return body.children.map(row => row);\n  }\n}\nTableContainer.allowedChildren = [TableBody];\nTableBody.requiredContainer = TableContainer;\nTableBody.allowedChildren = [TableRow];\nTableRow.requiredContainer = TableBody;\nTableRow.allowedChildren = [TableCell];\nTableCell.requiredContainer = TableRow;\nfunction tableId() {\n  const id = Math.random().toString(36).slice(2, 6);\n  return `row-${id}`;\n}\nexport { TableCell, TableRow, TableBody, TableContainer, tableId };\n//# sourceMappingURL=table.js.map","import Delta from 'quill-delta';\nimport Quill from '../core/quill.js';\nimport Module from '../core/module.js';\nimport { TableCell, TableRow, TableBody, TableContainer, tableId } from '../formats/table.js';\nclass Table extends Module {\n  static register() {\n    Quill.register(TableCell);\n    Quill.register(TableRow);\n    Quill.register(TableBody);\n    Quill.register(TableContainer);\n  }\n  constructor() {\n    super(...arguments);\n    this.listenBalanceCells();\n  }\n  balanceTables() {\n    this.quill.scroll.descendants(TableContainer).forEach(table => {\n      table.balanceCells();\n    });\n  }\n  deleteColumn() {\n    const [table,, cell] = this.getTable();\n    if (cell == null) return;\n    // @ts-expect-error\n    table.deleteColumn(cell.cellOffset());\n    this.quill.update(Quill.sources.USER);\n  }\n  deleteRow() {\n    const [, row] = this.getTable();\n    if (row == null) return;\n    row.remove();\n    this.quill.update(Quill.sources.USER);\n  }\n  deleteTable() {\n    const [table] = this.getTable();\n    if (table == null) return;\n    // @ts-expect-error\n    const offset = table.offset();\n    // @ts-expect-error\n    table.remove();\n    this.quill.update(Quill.sources.USER);\n    this.quill.setSelection(offset, Quill.sources.SILENT);\n  }\n  getTable() {\n    let range = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : this.quill.getSelection();\n    if (range == null) return [null, null, null, -1];\n    const [cell, offset] = this.quill.getLine(range.index);\n    if (cell == null || cell.statics.blotName !== TableCell.blotName) {\n      return [null, null, null, -1];\n    }\n    const row = cell.parent;\n    const table = row.parent.parent;\n    // @ts-expect-error\n    return [table, row, cell, offset];\n  }\n  insertColumn(offset) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const column = cell.cellOffset();\n    table.insertColumn(column + offset);\n    this.quill.update(Quill.sources.USER);\n    let shift = row.rowOffset();\n    if (offset === 0) {\n      shift += 1;\n    }\n    this.quill.setSelection(range.index + shift, range.length, Quill.sources.SILENT);\n  }\n  insertColumnLeft() {\n    this.insertColumn(0);\n  }\n  insertColumnRight() {\n    this.insertColumn(1);\n  }\n  insertRow(offset) {\n    const range = this.quill.getSelection();\n    if (!range) return;\n    const [table, row, cell] = this.getTable(range);\n    if (cell == null) return;\n    const index = row.rowOffset();\n    table.insertRow(index + offset);\n    this.quill.update(Quill.sources.USER);\n    if (offset > 0) {\n      this.quill.setSelection(range, Quill.sources.SILENT);\n    } else {\n      this.quill.setSelection(range.index + row.children.length, range.length, Quill.sources.SILENT);\n    }\n  }\n  insertRowAbove() {\n    this.insertRow(0);\n  }\n  insertRowBelow() {\n    this.insertRow(1);\n  }\n  insertTable(rows, columns) {\n    const range = this.quill.getSelection();\n    if (range == null) return;\n    const delta = new Array(rows).fill(0).reduce(memo => {\n      const text = new Array(columns).fill('\\n').join('');\n      return memo.insert(text, {\n        table: tableId()\n      });\n    }, new Delta().retain(range.index));\n    this.quill.updateContents(delta, Quill.sources.USER);\n    this.quill.setSelection(range.index, Quill.sources.SILENT);\n    this.balanceTables();\n  }\n  listenBalanceCells() {\n    this.quill.on(Quill.events.SCROLL_OPTIMIZE, mutations => {\n      mutations.some(mutation => {\n        if (['TD', 'TR', 'TBODY', 'TABLE'].includes(mutation.target.tagName)) {\n          this.quill.once(Quill.events.TEXT_CHANGE, (delta, old, source) => {\n            if (source !== Quill.sources.USER) return;\n            this.balanceTables();\n          });\n          return true;\n        }\n        return false;\n      });\n    });\n  }\n}\nexport default Table;\n//# sourceMappingURL=table.js.map","import Delta from 'quill-delta';\nimport { EmbedBlot, Scope } from 'parchment';\nimport Quill from '../core/quill.js';\nimport logger from '../core/logger.js';\nimport Module from '../core/module.js';\nconst debug = logger('quill:toolbar');\nclass Toolbar extends Module {\n  constructor(quill, options) {\n    super(quill, options);\n    if (Array.isArray(this.options.container)) {\n      const container = document.createElement('div');\n      container.setAttribute('role', 'toolbar');\n      addControls(container, this.options.container);\n      quill.container?.parentNode?.insertBefore(container, quill.container);\n      this.container = container;\n    } else if (typeof this.options.container === 'string') {\n      this.container = document.querySelector(this.options.container);\n    } else {\n      this.container = this.options.container;\n    }\n    if (!(this.container instanceof HTMLElement)) {\n      debug.error('Container required for toolbar', this.options);\n      return;\n    }\n    this.container.classList.add('ql-toolbar');\n    this.controls = [];\n    this.handlers = {};\n    if (this.options.handlers) {\n      Object.keys(this.options.handlers).forEach(format => {\n        const handler = this.options.handlers?.[format];\n        if (handler) {\n          this.addHandler(format, handler);\n        }\n      });\n    }\n    Array.from(this.container.querySelectorAll('button, select')).forEach(input => {\n      // @ts-expect-error\n      this.attach(input);\n    });\n    this.quill.on(Quill.events.EDITOR_CHANGE, () => {\n      const [range] = this.quill.selection.getRange(); // quill.getSelection triggers update\n      this.update(range);\n    });\n  }\n  addHandler(format, handler) {\n    this.handlers[format] = handler;\n  }\n  attach(input) {\n    let format = Array.from(input.classList).find(className => {\n      return className.indexOf('ql-') === 0;\n    });\n    if (!format) return;\n    format = format.slice('ql-'.length);\n    if (input.tagName === 'BUTTON') {\n      input.setAttribute('type', 'button');\n    }\n    if (this.handlers[format] == null && this.quill.scroll.query(format) == null) {\n      debug.warn('ignoring attaching to nonexistent format', format, input);\n      return;\n    }\n    const eventName = input.tagName === 'SELECT' ? 'change' : 'click';\n    input.addEventListener(eventName, e => {\n      let value;\n      if (input.tagName === 'SELECT') {\n        // @ts-expect-error\n        if (input.selectedIndex < 0) return;\n        // @ts-expect-error\n        const selected = input.options[input.selectedIndex];\n        if (selected.hasAttribute('selected')) {\n          value = false;\n        } else {\n          value = selected.value || false;\n        }\n      } else {\n        if (input.classList.contains('ql-active')) {\n          value = false;\n        } else {\n          // @ts-expect-error\n          value = input.value || !input.hasAttribute('value');\n        }\n        e.preventDefault();\n      }\n      this.quill.focus();\n      const [range] = this.quill.selection.getRange();\n      if (this.handlers[format] != null) {\n        this.handlers[format].call(this, value);\n      } else if (\n      // @ts-expect-error\n      this.quill.scroll.query(format).prototype instanceof EmbedBlot) {\n        value = prompt(`Enter ${format}`); // eslint-disable-line no-alert\n        if (!value) return;\n        this.quill.updateContents(new Delta()\n        // @ts-expect-error Fix me later\n        .retain(range.index)\n        // @ts-expect-error Fix me later\n        .delete(range.length).insert({\n          [format]: value\n        }), Quill.sources.USER);\n      } else {\n        this.quill.format(format, value, Quill.sources.USER);\n      }\n      this.update(range);\n    });\n    this.controls.push([format, input]);\n  }\n  update(range) {\n    const formats = range == null ? {} : this.quill.getFormat(range);\n    this.controls.forEach(pair => {\n      const [format, input] = pair;\n      if (input.tagName === 'SELECT') {\n        let option = null;\n        if (range == null) {\n          option = null;\n        } else if (formats[format] == null) {\n          option = input.querySelector('option[selected]');\n        } else if (!Array.isArray(formats[format])) {\n          let value = formats[format];\n          if (typeof value === 'string') {\n            value = value.replace(/\"/g, '\\\\\"');\n          }\n          option = input.querySelector(`option[value=\"${value}\"]`);\n        }\n        if (option == null) {\n          // @ts-expect-error TODO fix me later\n          input.value = ''; // TODO make configurable?\n          // @ts-expect-error TODO fix me later\n          input.selectedIndex = -1;\n        } else {\n          option.selected = true;\n        }\n      } else if (range == null) {\n        input.classList.remove('ql-active');\n        input.setAttribute('aria-pressed', 'false');\n      } else if (input.hasAttribute('value')) {\n        // both being null should match (default values)\n        // '1' should match with 1 (headers)\n        const value = formats[format];\n        const isActive = value === input.getAttribute('value') || value != null && value.toString() === input.getAttribute('value') || value == null && !input.getAttribute('value');\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      } else {\n        const isActive = formats[format] != null;\n        input.classList.toggle('ql-active', isActive);\n        input.setAttribute('aria-pressed', isActive.toString());\n      }\n    });\n  }\n}\nToolbar.DEFAULTS = {};\nfunction addButton(container, format, value) {\n  const input = document.createElement('button');\n  input.setAttribute('type', 'button');\n  input.classList.add(`ql-${format}`);\n  input.setAttribute('aria-pressed', 'false');\n  if (value != null) {\n    input.value = value;\n    input.setAttribute('aria-label', `${format}: ${value}`);\n  } else {\n    input.setAttribute('aria-label', format);\n  }\n  container.appendChild(input);\n}\nfunction addControls(container, groups) {\n  if (!Array.isArray(groups[0])) {\n    // @ts-expect-error\n    groups = [groups];\n  }\n  groups.forEach(controls => {\n    const group = document.createElement('span');\n    group.classList.add('ql-formats');\n    controls.forEach(control => {\n      if (typeof control === 'string') {\n        addButton(group, control);\n      } else {\n        const format = Object.keys(control)[0];\n        const value = control[format];\n        if (Array.isArray(value)) {\n          addSelect(group, format, value);\n        } else {\n          addButton(group, format, value);\n        }\n      }\n    });\n    container.appendChild(group);\n  });\n}\nfunction addSelect(container, format, values) {\n  const input = document.createElement('select');\n  input.classList.add(`ql-${format}`);\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value !== false) {\n      option.setAttribute('value', String(value));\n    } else {\n      option.setAttribute('selected', 'selected');\n    }\n    input.appendChild(option);\n  });\n  container.appendChild(input);\n}\nToolbar.DEFAULTS = {\n  container: null,\n  handlers: {\n    clean() {\n      const range = this.quill.getSelection();\n      if (range == null) return;\n      if (range.length === 0) {\n        const formats = this.quill.getFormat();\n        Object.keys(formats).forEach(name => {\n          // Clean functionality in existing apps only clean inline formats\n          if (this.quill.scroll.query(name, Scope.INLINE) != null) {\n            this.quill.format(name, false, Quill.sources.USER);\n          }\n        });\n      } else {\n        this.quill.removeFormat(range, Quill.sources.USER);\n      }\n    },\n    direction(value) {\n      const {\n        align\n      } = this.quill.getFormat();\n      if (value === 'rtl' && align == null) {\n        this.quill.format('align', 'right', Quill.sources.USER);\n      } else if (!value && align === 'right') {\n        this.quill.format('align', false, Quill.sources.USER);\n      }\n      this.quill.format('direction', value, Quill.sources.USER);\n    },\n    indent(value) {\n      const range = this.quill.getSelection();\n      const formats = this.quill.getFormat(range);\n      const indent = parseInt(formats.indent || 0, 10);\n      if (value === '+1' || value === '-1') {\n        let modifier = value === '+1' ? 1 : -1;\n        if (formats.direction === 'rtl') modifier *= -1;\n        this.quill.format('indent', indent + modifier, Quill.sources.USER);\n      }\n    },\n    link(value) {\n      if (value === true) {\n        value = prompt('Enter link URL:'); // eslint-disable-line no-alert\n      }\n      this.quill.format('link', value, Quill.sources.USER);\n    },\n    list(value) {\n      const range = this.quill.getSelection();\n      const formats = this.quill.getFormat(range);\n      if (value === 'check') {\n        if (formats.list === 'checked' || formats.list === 'unchecked') {\n          this.quill.format('list', false, Quill.sources.USER);\n        } else {\n          this.quill.format('list', 'unchecked', Quill.sources.USER);\n        }\n      } else {\n        this.quill.format('list', value, Quill.sources.USER);\n      }\n    }\n  }\n};\nexport { Toolbar as default, addControls };\n//# sourceMappingURL=toolbar.js.map","const alignLeftIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"13\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"9\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignCenterIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"14\\\" x2=\\\"4\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"12\\\" x2=\\\"6\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignRightIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"5\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"9\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst alignJustifyIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"3\\\" y1=\\\"4\\\" y2=\\\"4\\\"/></svg>\";\nconst backgroundIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><g class=\\\"ql-fill ql-color-label\\\"><polygon points=\\\"6 6.868 6 6 5 6 5 7 5.942 7 6 6.868\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"4\\\" y=\\\"4\\\"/><polygon points=\\\"6.817 5 6 5 6 6 6.38 6 6.817 5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"6\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"4\\\" y=\\\"7\\\"/><polygon points=\\\"4 11.439 4 11 3 11 3 12 3.755 12 4 11.439\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"12\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"9\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"15\\\"/><polygon points=\\\"4.63 10 4 10 4 11 4.192 11 4.63 10\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"8\\\"/><path d=\\\"M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z\\\"/><path d=\\\"M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z\\\"/><path d=\\\"M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"3\\\"/><path d=\\\"M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"2\\\" y=\\\"3\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"6\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"3\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"3\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"9\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"14\\\"/><polygon points=\\\"13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"7\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"6\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"8\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"9\\\"/><path d=\\\"M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"3\\\"/><polygon points=\\\"12 6.868 12 6 11.62 6 12 6.868\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"2\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"5\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"4\\\"/><polygon points=\\\"12.933 9 13 9 13 8 12.495 8 12.933 9\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"9\\\" y=\\\"14\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"8\\\" y=\\\"15\\\"/><path d=\\\"M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"15\\\"/><path d=\\\"M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"15\\\"/><path d=\\\"M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"14\\\" y=\\\"15\\\"/><rect height=\\\"1\\\" width=\\\"1\\\" x=\\\"15\\\" y=\\\"11\\\"/></g><polyline class=\\\"ql-stroke\\\" points=\\\"5.5 13 9 5 12.5 13\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11.63\\\" x2=\\\"6.38\\\" y1=\\\"11\\\" y2=\\\"11\\\"/></svg>\";\nconst blockquoteIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-fill ql-stroke\\\" height=\\\"3\\\" width=\\\"3\\\" x=\\\"4\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill ql-stroke\\\" height=\\\"3\\\" width=\\\"3\\\" x=\\\"11\\\" y=\\\"5\\\"/><path class=\\\"ql-even ql-fill ql-stroke\\\" d=\\\"M7,8c0,4.031-3,5-3,5\\\"/><path class=\\\"ql-even ql-fill ql-stroke\\\" d=\\\"M14,8c0,4.031-3,5-3,5\\\"/></svg>\";\nconst boldIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-stroke\\\" d=\\\"M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z\\\"/><path class=\\\"ql-stroke\\\" d=\\\"M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z\\\"/></svg>\";\nconst cleanIcon = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"5\\\" x2=\\\"13\\\" y1=\\\"3\\\" y2=\\\"3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"9.35\\\" y1=\\\"12\\\" y2=\\\"3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11\\\" x2=\\\"15\\\" y1=\\\"11\\\" y2=\\\"15\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"15\\\" x2=\\\"11\\\" y1=\\\"11\\\" y2=\\\"15\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" rx=\\\"0.5\\\" ry=\\\"0.5\\\" width=\\\"7\\\" x=\\\"2\\\" y=\\\"14\\\"/></svg>\";\nconst codeIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polyline class=\\\"ql-even ql-stroke\\\" points=\\\"5 7 3 9 5 11\\\"/><polyline class=\\\"ql-even ql-stroke\\\" points=\\\"13 7 15 9 13 11\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"10\\\" x2=\\\"8\\\" y1=\\\"5\\\" y2=\\\"13\\\"/></svg>\";\nconst colorIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-color-label ql-stroke ql-transparent\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"15\\\" y2=\\\"15\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"5.5 11 9 3 12.5 11\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"11.63\\\" x2=\\\"6.38\\\" y1=\\\"9\\\" y2=\\\"9\\\"/></svg>\";\nconst directionLeftToRightIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"3 11 5 9 3 7 3 11\\\"/><line class=\\\"ql-stroke ql-fill\\\" x1=\\\"15\\\" x2=\\\"11\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><path class=\\\"ql-fill\\\" d=\\\"M11,3a3,3,0,0,0,0,6h1V3H11Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"11\\\" y=\\\"4\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"13\\\" y=\\\"4\\\"/></svg>\";\nconst directionRightToLeftIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke ql-fill\\\" points=\\\"15 12 13 10 15 8 15 12\\\"/><line class=\\\"ql-stroke ql-fill\\\" x1=\\\"9\\\" x2=\\\"5\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><path class=\\\"ql-fill\\\" d=\\\"M5,3A3,3,0,0,0,5,9H6V3H5Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"4\\\"/><rect class=\\\"ql-fill\\\" height=\\\"11\\\" width=\\\"1\\\" x=\\\"7\\\" y=\\\"4\\\"/></svg>\";\nconst formulaIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1.6\\\" rx=\\\"0.8\\\" ry=\\\"0.8\\\" width=\\\"5\\\" x=\\\"5.15\\\" y=\\\"6.2\\\"/><path class=\\\"ql-fill\\\" d=\\\"M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z\\\"/></svg>\";\nconst headerIcon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z\\\"/></svg>\";\nconst header2Icon = \"<svg viewBox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z\\\"/></svg>\";\nconst italicIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"13\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"5\\\" x2=\\\"11\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"8\\\" x2=\\\"10\\\" y1=\\\"14\\\" y2=\\\"4\\\"/></svg>\";\nconst imageIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"10\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"4\\\"/><circle class=\\\"ql-fill\\\" cx=\\\"6\\\" cy=\\\"7\\\" r=\\\"1\\\"/><polyline class=\\\"ql-even ql-fill\\\" points=\\\"5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12\\\"/></svg>\";\nconst indentIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-fill ql-stroke\\\" points=\\\"3 7 3 11 5 9 3 7\\\"/></svg>\";\nconst outdentIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"5 7 5 11 3 9 5 7\\\"/></svg>\";\nconst linkIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"11\\\" y1=\\\"7\\\" y2=\\\"11\\\"/><path class=\\\"ql-even ql-stroke\\\" d=\\\"M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z\\\"/><path class=\\\"ql-even ql-stroke\\\" d=\\\"M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z\\\"/></svg>\";\nconst listBulletIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"6\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"3\\\" x2=\\\"3\\\" y1=\\\"14\\\" y2=\\\"14\\\"/></svg>\";\nconst listCheckIcon = \"<svg class=\\\"\\\" viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 4 4 5 6 3\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 14 4 15 6 13\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"9\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><polyline class=\\\"ql-stroke\\\" points=\\\"3 9 4 10 6 8\\\"/></svg>\";\nconst listOrderedIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"4\\\" y2=\\\"4\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"9\\\" y2=\\\"9\\\"/><line class=\\\"ql-stroke\\\" x1=\\\"7\\\" x2=\\\"15\\\" y1=\\\"14\\\" y2=\\\"14\\\"/><line class=\\\"ql-stroke ql-thin\\\" x1=\\\"2.5\\\" x2=\\\"4.5\\\" y1=\\\"5.5\\\" y2=\\\"5.5\\\"/><path class=\\\"ql-fill\\\" d=\\\"M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z\\\"/><path class=\\\"ql-stroke ql-thin\\\" d=\\\"M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156\\\"/><path class=\\\"ql-stroke ql-thin\\\" d=\\\"M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109\\\"/></svg>\";\nconst subscriptIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z\\\"/></svg>\";\nconst superscriptIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-fill\\\" d=\\\"M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z\\\"/></svg>\";\nconst strikeIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><line class=\\\"ql-stroke ql-thin\\\" x1=\\\"15.5\\\" x2=\\\"2.5\\\" y1=\\\"8.5\\\" y2=\\\"9.5\\\"/><path class=\\\"ql-fill\\\" d=\\\"M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z\\\"/><path class=\\\"ql-fill\\\" d=\\\"M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z\\\"/></svg>\";\nconst tableIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"12\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"5\\\"/><g class=\\\"ql-fill ql-transparent\\\"><rect height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"8\\\"/><rect height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"8\\\"/><rect height=\\\"2\\\" width=\\\"3\\\" x=\\\"5\\\" y=\\\"11\\\"/><rect height=\\\"2\\\" width=\\\"4\\\" x=\\\"9\\\" y=\\\"11\\\"/></g></svg>\";\nconst underlineIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><path class=\\\"ql-stroke\\\" d=\\\"M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" rx=\\\"0.5\\\" ry=\\\"0.5\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"15\\\"/></svg>\";\nconst videoIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><rect class=\\\"ql-stroke\\\" height=\\\"12\\\" width=\\\"12\\\" x=\\\"3\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"12\\\" width=\\\"1\\\" x=\\\"5\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"12\\\" width=\\\"1\\\" x=\\\"12\\\" y=\\\"3\\\"/><rect class=\\\"ql-fill\\\" height=\\\"2\\\" width=\\\"8\\\" x=\\\"5\\\" y=\\\"8\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"7\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"10\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"3\\\" y=\\\"12\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"5\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"7\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"10\\\"/><rect class=\\\"ql-fill\\\" height=\\\"1\\\" width=\\\"3\\\" x=\\\"12\\\" y=\\\"12\\\"/></svg>\";\nexport default {\n  align: {\n    '': alignLeftIcon,\n    center: alignCenterIcon,\n    right: alignRightIcon,\n    justify: alignJustifyIcon\n  },\n  background: backgroundIcon,\n  blockquote: blockquoteIcon,\n  bold: boldIcon,\n  clean: cleanIcon,\n  code: codeIcon,\n  'code-block': codeIcon,\n  color: colorIcon,\n  direction: {\n    '': directionLeftToRightIcon,\n    rtl: directionRightToLeftIcon\n  },\n  formula: formulaIcon,\n  header: {\n    '1': headerIcon,\n    '2': header2Icon\n  },\n  italic: italicIcon,\n  image: imageIcon,\n  indent: {\n    '+1': indentIcon,\n    '-1': outdentIcon\n  },\n  link: linkIcon,\n  list: {\n    bullet: listBulletIcon,\n    check: listCheckIcon,\n    ordered: listOrderedIcon\n  },\n  script: {\n    sub: subscriptIcon,\n    super: superscriptIcon\n  },\n  strike: strikeIcon,\n  table: tableIcon,\n  underline: underlineIcon,\n  video: videoIcon\n};\n//# sourceMappingURL=icons.js.map","const DropdownIcon = \"<svg viewbox=\\\"0 0 18 18\\\"><polygon class=\\\"ql-stroke\\\" points=\\\"7 11 9 13 11 11 7 11\\\"/><polygon class=\\\"ql-stroke\\\" points=\\\"7 7 9 5 11 7 7 7\\\"/></svg>\";\nlet optionsCounter = 0;\nfunction toggleAriaAttribute(element, attribute) {\n  element.setAttribute(attribute, `${!(element.getAttribute(attribute) === 'true')}`);\n}\nclass Picker {\n  constructor(select) {\n    this.select = select;\n    this.container = document.createElement('span');\n    this.buildPicker();\n    this.select.style.display = 'none';\n    // @ts-expect-error Fix me later\n    this.select.parentNode.insertBefore(this.container, this.select);\n    this.label.addEventListener('mousedown', () => {\n      this.togglePicker();\n    });\n    this.label.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.togglePicker();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    this.select.addEventListener('change', this.update.bind(this));\n  }\n  togglePicker() {\n    this.container.classList.toggle('ql-expanded');\n    // Toggle aria-expanded and aria-hidden to make the picker accessible\n    toggleAriaAttribute(this.label, 'aria-expanded');\n    // @ts-expect-error\n    toggleAriaAttribute(this.options, 'aria-hidden');\n  }\n  buildItem(option) {\n    const item = document.createElement('span');\n    // @ts-expect-error\n    item.tabIndex = '0';\n    item.setAttribute('role', 'button');\n    item.classList.add('ql-picker-item');\n    const value = option.getAttribute('value');\n    if (value) {\n      item.setAttribute('data-value', value);\n    }\n    if (option.textContent) {\n      item.setAttribute('data-label', option.textContent);\n    }\n    item.addEventListener('click', () => {\n      this.selectItem(item, true);\n    });\n    item.addEventListener('keydown', event => {\n      switch (event.key) {\n        case 'Enter':\n          this.selectItem(item, true);\n          event.preventDefault();\n          break;\n        case 'Escape':\n          this.escape();\n          event.preventDefault();\n          break;\n        default:\n      }\n    });\n    return item;\n  }\n  buildLabel() {\n    const label = document.createElement('span');\n    label.classList.add('ql-picker-label');\n    label.innerHTML = DropdownIcon;\n    // @ts-expect-error\n    label.tabIndex = '0';\n    label.setAttribute('role', 'button');\n    label.setAttribute('aria-expanded', 'false');\n    this.container.appendChild(label);\n    return label;\n  }\n  buildOptions() {\n    const options = document.createElement('span');\n    options.classList.add('ql-picker-options');\n\n    // Don't want screen readers to read this until options are visible\n    options.setAttribute('aria-hidden', 'true');\n    // @ts-expect-error\n    options.tabIndex = '-1';\n\n    // Need a unique id for aria-controls\n    options.id = `ql-picker-options-${optionsCounter}`;\n    optionsCounter += 1;\n    this.label.setAttribute('aria-controls', options.id);\n\n    // @ts-expect-error\n    this.options = options;\n    Array.from(this.select.options).forEach(option => {\n      const item = this.buildItem(option);\n      options.appendChild(item);\n      if (option.selected === true) {\n        this.selectItem(item);\n      }\n    });\n    this.container.appendChild(options);\n  }\n  buildPicker() {\n    Array.from(this.select.attributes).forEach(item => {\n      this.container.setAttribute(item.name, item.value);\n    });\n    this.container.classList.add('ql-picker');\n    this.label = this.buildLabel();\n    this.buildOptions();\n  }\n  escape() {\n    // Close menu and return focus to trigger label\n    this.close();\n    // Need setTimeout for accessibility to ensure that the browser executes\n    // focus on the next process thread and after any DOM content changes\n    setTimeout(() => this.label.focus(), 1);\n  }\n  close() {\n    this.container.classList.remove('ql-expanded');\n    this.label.setAttribute('aria-expanded', 'false');\n    // @ts-expect-error\n    this.options.setAttribute('aria-hidden', 'true');\n  }\n  selectItem(item) {\n    let trigger = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;\n    const selected = this.container.querySelector('.ql-selected');\n    if (item === selected) return;\n    if (selected != null) {\n      selected.classList.remove('ql-selected');\n    }\n    if (item == null) return;\n    item.classList.add('ql-selected');\n    // @ts-expect-error Fix me later\n    this.select.selectedIndex = Array.from(item.parentNode.children).indexOf(item);\n    if (item.hasAttribute('data-value')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-value', item.getAttribute('data-value'));\n    } else {\n      this.label.removeAttribute('data-value');\n    }\n    if (item.hasAttribute('data-label')) {\n      // @ts-expect-error Fix me later\n      this.label.setAttribute('data-label', item.getAttribute('data-label'));\n    } else {\n      this.label.removeAttribute('data-label');\n    }\n    if (trigger) {\n      this.select.dispatchEvent(new Event('change'));\n      this.close();\n    }\n  }\n  update() {\n    let option;\n    if (this.select.selectedIndex > -1) {\n      const item =\n      // @ts-expect-error Fix me later\n      this.container.querySelector('.ql-picker-options').children[this.select.selectedIndex];\n      option = this.select.options[this.select.selectedIndex];\n      // @ts-expect-error\n      this.selectItem(item);\n    } else {\n      this.selectItem(null);\n    }\n    const isActive = option != null && option !== this.select.querySelector('option[selected]');\n    this.label.classList.toggle('ql-active', isActive);\n  }\n}\nexport default Picker;\n//# sourceMappingURL=picker.js.map","import Picker from './picker.js';\nclass ColorPicker extends Picker {\n  constructor(select, label) {\n    super(select);\n    this.label.innerHTML = label;\n    this.container.classList.add('ql-color-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).slice(0, 7).forEach(item => {\n      item.classList.add('ql-primary');\n    });\n  }\n  buildItem(option) {\n    const item = super.buildItem(option);\n    item.style.backgroundColor = option.getAttribute('value') || '';\n    return item;\n  }\n  selectItem(item, trigger) {\n    super.selectItem(item, trigger);\n    const colorLabel = this.label.querySelector('.ql-color-label');\n    const value = item ? item.getAttribute('data-value') || '' : '';\n    if (colorLabel) {\n      if (colorLabel.tagName === 'line') {\n        colorLabel.style.stroke = value;\n      } else {\n        colorLabel.style.fill = value;\n      }\n    }\n  }\n}\nexport default ColorPicker;\n//# sourceMappingURL=color-picker.js.map","import Picker from './picker.js';\nclass IconPicker extends Picker {\n  constructor(select, icons) {\n    super(select);\n    this.container.classList.add('ql-icon-picker');\n    Array.from(this.container.querySelectorAll('.ql-picker-item')).forEach(item => {\n      item.innerHTML = icons[item.getAttribute('data-value') || ''];\n    });\n    this.defaultItem = this.container.querySelector('.ql-selected');\n    this.selectItem(this.defaultItem);\n  }\n  selectItem(target, trigger) {\n    super.selectItem(target, trigger);\n    const item = target || this.defaultItem;\n    if (item != null) {\n      if (this.label.innerHTML === item.innerHTML) return;\n      this.label.innerHTML = item.innerHTML;\n    }\n  }\n}\nexport default IconPicker;\n//# sourceMappingURL=icon-picker.js.map","const isScrollable = el => {\n  const {\n    overflowY\n  } = getComputedStyle(el, null);\n  return overflowY !== 'visible' && overflowY !== 'clip';\n};\nclass Tooltip {\n  constructor(quill, boundsContainer) {\n    this.quill = quill;\n    this.boundsContainer = boundsContainer || document.body;\n    this.root = quill.addContainer('ql-tooltip');\n    // @ts-expect-error\n    this.root.innerHTML = this.constructor.TEMPLATE;\n    if (isScrollable(this.quill.root)) {\n      this.quill.root.addEventListener('scroll', () => {\n        this.root.style.marginTop = `${-1 * this.quill.root.scrollTop}px`;\n      });\n    }\n    this.hide();\n  }\n  hide() {\n    this.root.classList.add('ql-hidden');\n  }\n  position(reference) {\n    const left = reference.left + reference.width / 2 - this.root.offsetWidth / 2;\n    // root.scrollTop should be 0 if scrollContainer !== root\n    const top = reference.bottom + this.quill.root.scrollTop;\n    this.root.style.left = `${left}px`;\n    this.root.style.top = `${top}px`;\n    this.root.classList.remove('ql-flip');\n    const containerBounds = this.boundsContainer.getBoundingClientRect();\n    const rootBounds = this.root.getBoundingClientRect();\n    let shift = 0;\n    if (rootBounds.right > containerBounds.right) {\n      shift = containerBounds.right - rootBounds.right;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.left < containerBounds.left) {\n      shift = containerBounds.left - rootBounds.left;\n      this.root.style.left = `${left + shift}px`;\n    }\n    if (rootBounds.bottom > containerBounds.bottom) {\n      const height = rootBounds.bottom - rootBounds.top;\n      const verticalShift = reference.bottom - reference.top + height;\n      this.root.style.top = `${top - verticalShift}px`;\n      this.root.classList.add('ql-flip');\n    }\n    return shift;\n  }\n  show() {\n    this.root.classList.remove('ql-editing');\n    this.root.classList.remove('ql-hidden');\n  }\n}\nexport default Tooltip;\n//# sourceMappingURL=tooltip.js.map","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport Theme from '../core/theme.js';\nimport ColorPicker from '../ui/color-picker.js';\nimport IconPicker from '../ui/icon-picker.js';\nimport Picker from '../ui/picker.js';\nimport Tooltip from '../ui/tooltip.js';\nconst ALIGNS = [false, 'center', 'right', 'justify'];\nconst COLORS = ['#000000', '#e60000', '#ff9900', '#ffff00', '#008a00', '#0066cc', '#9933ff', '#ffffff', '#facccc', '#ffebcc', '#ffffcc', '#cce8cc', '#cce0f5', '#ebd6ff', '#bbbbbb', '#f06666', '#ffc266', '#ffff66', '#66b966', '#66a3e0', '#c285ff', '#888888', '#a10000', '#b26b00', '#b2b200', '#006100', '#0047b2', '#6b24b2', '#444444', '#5c0000', '#663d00', '#666600', '#003700', '#002966', '#3d1466'];\nconst FONTS = [false, 'serif', 'monospace'];\nconst HEADERS = ['1', '2', '3', false];\nconst SIZES = ['small', false, 'large', 'huge'];\nclass BaseTheme extends Theme {\n  constructor(quill, options) {\n    super(quill, options);\n    const listener = e => {\n      if (!document.body.contains(quill.root)) {\n        document.body.removeEventListener('click', listener);\n        return;\n      }\n      if (this.tooltip != null &&\n      // @ts-expect-error\n      !this.tooltip.root.contains(e.target) &&\n      // @ts-expect-error\n      document.activeElement !== this.tooltip.textbox && !this.quill.hasFocus()) {\n        this.tooltip.hide();\n      }\n      if (this.pickers != null) {\n        this.pickers.forEach(picker => {\n          // @ts-expect-error\n          if (!picker.container.contains(e.target)) {\n            picker.close();\n          }\n        });\n      }\n    };\n    quill.emitter.listenDOM('click', document.body, listener);\n  }\n  addModule(name) {\n    const module = super.addModule(name);\n    if (name === 'toolbar') {\n      // @ts-expect-error\n      this.extendToolbar(module);\n    }\n    return module;\n  }\n  buildButtons(buttons, icons) {\n    Array.from(buttons).forEach(button => {\n      const className = button.getAttribute('class') || '';\n      className.split(/\\s+/).forEach(name => {\n        if (!name.startsWith('ql-')) return;\n        name = name.slice('ql-'.length);\n        if (icons[name] == null) return;\n        if (name === 'direction') {\n          // @ts-expect-error\n          button.innerHTML = icons[name][''] + icons[name].rtl;\n        } else if (typeof icons[name] === 'string') {\n          // @ts-expect-error\n          button.innerHTML = icons[name];\n        } else {\n          // @ts-expect-error\n          const value = button.value || '';\n          // @ts-expect-error\n          if (value != null && icons[name][value]) {\n            // @ts-expect-error\n            button.innerHTML = icons[name][value];\n          }\n        }\n      });\n    });\n  }\n  buildPickers(selects, icons) {\n    this.pickers = Array.from(selects).map(select => {\n      if (select.classList.contains('ql-align')) {\n        if (select.querySelector('option') == null) {\n          fillSelect(select, ALIGNS);\n        }\n        if (typeof icons.align === 'object') {\n          return new IconPicker(select, icons.align);\n        }\n      }\n      if (select.classList.contains('ql-background') || select.classList.contains('ql-color')) {\n        const format = select.classList.contains('ql-background') ? 'background' : 'color';\n        if (select.querySelector('option') == null) {\n          fillSelect(select, COLORS, format === 'background' ? '#ffffff' : '#000000');\n        }\n        return new ColorPicker(select, icons[format]);\n      }\n      if (select.querySelector('option') == null) {\n        if (select.classList.contains('ql-font')) {\n          fillSelect(select, FONTS);\n        } else if (select.classList.contains('ql-header')) {\n          fillSelect(select, HEADERS);\n        } else if (select.classList.contains('ql-size')) {\n          fillSelect(select, SIZES);\n        }\n      }\n      return new Picker(select);\n    });\n    const update = () => {\n      this.pickers.forEach(picker => {\n        picker.update();\n      });\n    };\n    this.quill.on(Emitter.events.EDITOR_CHANGE, update);\n  }\n}\nBaseTheme.DEFAULTS = merge({}, Theme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        formula() {\n          this.quill.theme.tooltip.edit('formula');\n        },\n        image() {\n          let fileInput = this.container.querySelector('input.ql-image[type=file]');\n          if (fileInput == null) {\n            fileInput = document.createElement('input');\n            fileInput.setAttribute('type', 'file');\n            fileInput.setAttribute('accept', this.quill.uploader.options.mimetypes.join(', '));\n            fileInput.classList.add('ql-image');\n            fileInput.addEventListener('change', () => {\n              const range = this.quill.getSelection(true);\n              this.quill.uploader.upload(range, fileInput.files);\n              fileInput.value = '';\n            });\n            this.container.appendChild(fileInput);\n          }\n          fileInput.click();\n        },\n        video() {\n          this.quill.theme.tooltip.edit('video');\n        }\n      }\n    }\n  }\n});\nclass BaseTooltip extends Tooltip {\n  constructor(quill, boundsContainer) {\n    super(quill, boundsContainer);\n    this.textbox = this.root.querySelector('input[type=\"text\"]');\n    this.listen();\n  }\n  listen() {\n    // @ts-expect-error Fix me later\n    this.textbox.addEventListener('keydown', event => {\n      if (event.key === 'Enter') {\n        this.save();\n        event.preventDefault();\n      } else if (event.key === 'Escape') {\n        this.cancel();\n        event.preventDefault();\n      }\n    });\n  }\n  cancel() {\n    this.hide();\n    this.restoreFocus();\n  }\n  edit() {\n    let mode = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : 'link';\n    let preview = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : null;\n    this.root.classList.remove('ql-hidden');\n    this.root.classList.add('ql-editing');\n    if (this.textbox == null) return;\n    if (preview != null) {\n      this.textbox.value = preview;\n    } else if (mode !== this.root.getAttribute('data-mode')) {\n      this.textbox.value = '';\n    }\n    const bounds = this.quill.getBounds(this.quill.selection.savedRange);\n    if (bounds != null) {\n      this.position(bounds);\n    }\n    this.textbox.select();\n    this.textbox.setAttribute('placeholder', this.textbox.getAttribute(`data-${mode}`) || '');\n    this.root.setAttribute('data-mode', mode);\n  }\n  restoreFocus() {\n    this.quill.focus({\n      preventScroll: true\n    });\n  }\n  save() {\n    // @ts-expect-error Fix me later\n    let {\n      value\n    } = this.textbox;\n    switch (this.root.getAttribute('data-mode')) {\n      case 'link':\n        {\n          const {\n            scrollTop\n          } = this.quill.root;\n          if (this.linkRange) {\n            this.quill.formatText(this.linkRange, 'link', value, Emitter.sources.USER);\n            delete this.linkRange;\n          } else {\n            this.restoreFocus();\n            this.quill.format('link', value, Emitter.sources.USER);\n          }\n          this.quill.root.scrollTop = scrollTop;\n          break;\n        }\n      case 'video':\n        {\n          value = extractVideoUrl(value);\n        }\n      // eslint-disable-next-line no-fallthrough\n      case 'formula':\n        {\n          if (!value) break;\n          const range = this.quill.getSelection(true);\n          if (range != null) {\n            const index = range.index + range.length;\n            this.quill.insertEmbed(index,\n            // @ts-expect-error Fix me later\n            this.root.getAttribute('data-mode'), value, Emitter.sources.USER);\n            if (this.root.getAttribute('data-mode') === 'formula') {\n              this.quill.insertText(index + 1, ' ', Emitter.sources.USER);\n            }\n            this.quill.setSelection(index + 2, Emitter.sources.USER);\n          }\n          break;\n        }\n      default:\n    }\n    // @ts-expect-error Fix me later\n    this.textbox.value = '';\n    this.hide();\n  }\n}\nfunction extractVideoUrl(url) {\n  let match = url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtube\\.com\\/watch.*v=([a-zA-Z0-9_-]+)/) || url.match(/^(?:(https?):\\/\\/)?(?:(?:www|m)\\.)?youtu\\.be\\/([a-zA-Z0-9_-]+)/);\n  if (match) {\n    return `${match[1] || 'https'}://www.youtube.com/embed/${match[2]}?showinfo=0`;\n  }\n  // eslint-disable-next-line no-cond-assign\n  if (match = url.match(/^(?:(https?):\\/\\/)?(?:www\\.)?vimeo\\.com\\/(\\d+)/)) {\n    return `${match[1] || 'https'}://player.vimeo.com/video/${match[2]}/`;\n  }\n  return url;\n}\nfunction fillSelect(select, values) {\n  let defaultValue = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n  values.forEach(value => {\n    const option = document.createElement('option');\n    if (value === defaultValue) {\n      option.setAttribute('selected', 'selected');\n    } else {\n      option.setAttribute('value', String(value));\n    }\n    select.appendChild(option);\n  });\n}\nexport { BaseTooltip, BaseTheme as default };\n//# sourceMappingURL=base.js.map","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nconst TOOLBAR_CONFIG = [['bold', 'italic', 'link'], [{\n  header: 1\n}, {\n  header: 2\n}, 'blockquote']];\nclass BubbleTooltip extends BaseTooltip {\n  static TEMPLATE = ['<span class=\"ql-tooltip-arrow\"></span>', '<div class=\"ql-tooltip-editor\">', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-close\"></a>', '</div>'].join('');\n  constructor(quill, bounds) {\n    super(quill, bounds);\n    this.quill.on(Emitter.events.EDITOR_CHANGE, (type, range, oldRange, source) => {\n      if (type !== Emitter.events.SELECTION_CHANGE) return;\n      if (range != null && range.length > 0 && source === Emitter.sources.USER) {\n        this.show();\n        // Lock our width so we will expand beyond our offsetParent boundaries\n        this.root.style.left = '0px';\n        this.root.style.width = '';\n        this.root.style.width = `${this.root.offsetWidth}px`;\n        const lines = this.quill.getLines(range.index, range.length);\n        if (lines.length === 1) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        } else {\n          const lastLine = lines[lines.length - 1];\n          const index = this.quill.getIndex(lastLine);\n          const length = Math.min(lastLine.length() - 1, range.index + range.length - index);\n          const indexBounds = this.quill.getBounds(new Range(index, length));\n          if (indexBounds != null) {\n            this.position(indexBounds);\n          }\n        }\n      } else if (document.activeElement !== this.textbox && this.quill.hasFocus()) {\n        this.hide();\n      }\n    });\n  }\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('.ql-close').addEventListener('click', () => {\n      this.root.classList.remove('ql-editing');\n    });\n    this.quill.on(Emitter.events.SCROLL_OPTIMIZE, () => {\n      // Let selection be restored by toolbar handlers before repositioning\n      setTimeout(() => {\n        if (this.root.classList.contains('ql-hidden')) return;\n        const range = this.quill.getSelection();\n        if (range != null) {\n          const bounds = this.quill.getBounds(range);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n        }\n      }, 1);\n    });\n  }\n  cancel() {\n    this.show();\n  }\n  position(reference) {\n    const shift = super.position(reference);\n    const arrow = this.root.querySelector('.ql-tooltip-arrow');\n    // @ts-expect-error\n    arrow.style.marginLeft = '';\n    if (shift !== 0) {\n      // @ts-expect-error\n      arrow.style.marginLeft = `${-1 * shift - arrow.offsetWidth / 2}px`;\n    }\n    return shift;\n  }\n}\nclass BubbleTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-bubble');\n  }\n  extendToolbar(toolbar) {\n    // @ts-expect-error\n    this.tooltip = new BubbleTooltip(this.quill, this.options.bounds);\n    if (toolbar.container != null) {\n      this.tooltip.root.appendChild(toolbar.container);\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n    }\n  }\n}\nBubbleTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (!value) {\n            this.quill.format('link', false);\n          } else {\n            this.quill.theme.tooltip.edit();\n          }\n        }\n      }\n    }\n  }\n});\nexport { BubbleTooltip, BubbleTheme as default };\n//# sourceMappingURL=bubble.js.map","import { merge } from 'lodash-es';\nimport Emitter from '../core/emitter.js';\nimport BaseTheme, { BaseTooltip } from './base.js';\nimport LinkBlot from '../formats/link.js';\nimport { Range } from '../core/selection.js';\nimport icons from '../ui/icons.js';\nconst TOOLBAR_CONFIG = [[{\n  header: ['1', '2', '3', false]\n}], ['bold', 'italic', 'underline', 'link'], [{\n  list: 'ordered'\n}, {\n  list: 'bullet'\n}], ['clean']];\nclass SnowTooltip extends BaseTooltip {\n  static TEMPLATE = ['<a class=\"ql-preview\" rel=\"noopener noreferrer\" target=\"_blank\" href=\"about:blank\"></a>', '<input type=\"text\" data-formula=\"e=mc^2\" data-link=\"https://quilljs.com\" data-video=\"Embed URL\">', '<a class=\"ql-action\"></a>', '<a class=\"ql-remove\"></a>'].join('');\n  preview = this.root.querySelector('a.ql-preview');\n  listen() {\n    super.listen();\n    // @ts-expect-error Fix me later\n    this.root.querySelector('a.ql-action').addEventListener('click', event => {\n      if (this.root.classList.contains('ql-editing')) {\n        this.save();\n      } else {\n        // @ts-expect-error Fix me later\n        this.edit('link', this.preview.textContent);\n      }\n      event.preventDefault();\n    });\n    // @ts-expect-error Fix me later\n    this.root.querySelector('a.ql-remove').addEventListener('click', event => {\n      if (this.linkRange != null) {\n        const range = this.linkRange;\n        this.restoreFocus();\n        this.quill.formatText(range, 'link', false, Emitter.sources.USER);\n        delete this.linkRange;\n      }\n      event.preventDefault();\n      this.hide();\n    });\n    this.quill.on(Emitter.events.SELECTION_CHANGE, (range, oldRange, source) => {\n      if (range == null) return;\n      if (range.length === 0 && source === Emitter.sources.USER) {\n        const [link, offset] = this.quill.scroll.descendant(LinkBlot, range.index);\n        if (link != null) {\n          this.linkRange = new Range(range.index - offset, link.length());\n          const preview = LinkBlot.formats(link.domNode);\n          // @ts-expect-error Fix me later\n          this.preview.textContent = preview;\n          // @ts-expect-error Fix me later\n          this.preview.setAttribute('href', preview);\n          this.show();\n          const bounds = this.quill.getBounds(this.linkRange);\n          if (bounds != null) {\n            this.position(bounds);\n          }\n          return;\n        }\n      } else {\n        delete this.linkRange;\n      }\n      this.hide();\n    });\n  }\n  show() {\n    super.show();\n    this.root.removeAttribute('data-mode');\n  }\n}\nclass SnowTheme extends BaseTheme {\n  constructor(quill, options) {\n    if (options.modules.toolbar != null && options.modules.toolbar.container == null) {\n      options.modules.toolbar.container = TOOLBAR_CONFIG;\n    }\n    super(quill, options);\n    this.quill.container.classList.add('ql-snow');\n  }\n  extendToolbar(toolbar) {\n    if (toolbar.container != null) {\n      toolbar.container.classList.add('ql-snow');\n      this.buildButtons(toolbar.container.querySelectorAll('button'), icons);\n      this.buildPickers(toolbar.container.querySelectorAll('select'), icons);\n      // @ts-expect-error\n      this.tooltip = new SnowTooltip(this.quill, this.options.bounds);\n      if (toolbar.container.querySelector('.ql-link')) {\n        this.quill.keyboard.addBinding({\n          key: 'k',\n          shortKey: true\n        }, (_range, context) => {\n          toolbar.handlers.link.call(toolbar, !context.format.link);\n        });\n      }\n    }\n  }\n}\nSnowTheme.DEFAULTS = merge({}, BaseTheme.DEFAULTS, {\n  modules: {\n    toolbar: {\n      handlers: {\n        link(value) {\n          if (value) {\n            const range = this.quill.getSelection();\n            if (range == null || range.length === 0) return;\n            let preview = this.quill.getText(range);\n            if (/^\\S+@\\S+\\.\\S+$/.test(preview) && preview.indexOf('mailto:') !== 0) {\n              preview = `mailto:${preview}`;\n            }\n            const {\n              tooltip\n            } = this.quill.theme;\n            tooltip.edit('link', preview);\n          } else {\n            this.quill.format('link', false);\n          }\n        }\n      }\n    }\n  }\n});\nexport default SnowTheme;\n//# sourceMappingURL=snow.js.map","import Quill, { Parchment, Range } from './core.js';\nimport { AlignClass, AlignStyle } from './formats/align.js';\nimport { DirectionAttribute, DirectionClass, DirectionStyle } from './formats/direction.js';\nimport Indent from './formats/indent.js';\nimport Blockquote from './formats/blockquote.js';\nimport Header from './formats/header.js';\nimport List from './formats/list.js';\nimport { BackgroundClass, BackgroundStyle } from './formats/background.js';\nimport { ColorClass, ColorStyle } from './formats/color.js';\nimport { FontClass, FontStyle } from './formats/font.js';\nimport { SizeClass, SizeStyle } from './formats/size.js';\nimport Bold from './formats/bold.js';\nimport Italic from './formats/italic.js';\nimport Link from './formats/link.js';\nimport Script from './formats/script.js';\nimport Strike from './formats/strike.js';\nimport Underline from './formats/underline.js';\nimport Formula from './formats/formula.js';\nimport Image from './formats/image.js';\nimport Video from './formats/video.js';\nimport CodeBlock, { Code as InlineCode } from './formats/code.js';\nimport Syntax from './modules/syntax.js';\nimport Table from './modules/table.js';\nimport Toolbar from './modules/toolbar.js';\nimport Icons from './ui/icons.js';\nimport Picker from './ui/picker.js';\nimport ColorPicker from './ui/color-picker.js';\nimport IconPicker from './ui/icon-picker.js';\nimport Tooltip from './ui/tooltip.js';\nimport BubbleTheme from './themes/bubble.js';\nimport SnowTheme from './themes/snow.js';\nQuill.register({\n  'attributors/attribute/direction': DirectionAttribute,\n  'attributors/class/align': AlignClass,\n  'attributors/class/background': BackgroundClass,\n  'attributors/class/color': ColorClass,\n  'attributors/class/direction': DirectionClass,\n  'attributors/class/font': FontClass,\n  'attributors/class/size': SizeClass,\n  'attributors/style/align': AlignStyle,\n  'attributors/style/background': BackgroundStyle,\n  'attributors/style/color': ColorStyle,\n  'attributors/style/direction': DirectionStyle,\n  'attributors/style/font': FontStyle,\n  'attributors/style/size': SizeStyle\n}, true);\nQuill.register({\n  'formats/align': AlignClass,\n  'formats/direction': DirectionClass,\n  'formats/indent': Indent,\n  'formats/background': BackgroundStyle,\n  'formats/color': ColorStyle,\n  'formats/font': FontClass,\n  'formats/size': SizeClass,\n  'formats/blockquote': Blockquote,\n  'formats/code-block': CodeBlock,\n  'formats/header': Header,\n  'formats/list': List,\n  'formats/bold': Bold,\n  'formats/code': InlineCode,\n  'formats/italic': Italic,\n  'formats/link': Link,\n  'formats/script': Script,\n  'formats/strike': Strike,\n  'formats/underline': Underline,\n  'formats/formula': Formula,\n  'formats/image': Image,\n  'formats/video': Video,\n  'modules/syntax': Syntax,\n  'modules/table': Table,\n  'modules/toolbar': Toolbar,\n  'themes/bubble': BubbleTheme,\n  'themes/snow': SnowTheme,\n  'ui/icons': Icons,\n  'ui/picker': Picker,\n  'ui/icon-picker': IconPicker,\n  'ui/color-picker': ColorPicker,\n  'ui/tooltip': Tooltip\n}, true);\nexport { Parchment, Range };\nexport default Quill;\n//# sourceMappingURL=quill.js.map"],"names":["Break","_EmbedBlot$","_classCallCheck","_callSuper","arguments","_inherits","_createClass","key","value","this","prev","next","remove","EmbedBlot","blotName","tagName","Text$1","_TextBlot$","Text","TextBlot","escapeText","text","replace","s","Inline","_InlineBlot$","index","length","name","compare","statics","scroll","query","Scope","BLOT","blot","isolate","wrap","_get","_getPrototypeOf","prototype","call","context","parent","offset","moveChildren","self","other","selfIndex","order","indexOf","otherIndex","InlineBlot","_defineProperty","Block","_BlockBlot$","_this","_len4","args","Array","_key4","concat","cache","delta","blockDelta","BLOCK","format","Math","min","def","lines","split","shift","children","tail","insertAt","block","reduce","lineIndex","line","ref","head","target","child","force","undefined","clone","insertBefore","BlockBlot","defaultChild","allowedChildren","BlockEmbed","_EmbedBlot$2","attributes","AttributorStore","domNode","Delta","insert","_objectSpread","formats","values","attribute","BLOCK_ATTRIBUTE","_this2","pop","blocks","map","create","forEach","filter","descendants","LeafBlot","leaf","bubbleFormats","scope","BLOCK_BLOT","Cursor","_EmbedBlot$3","selection","_this3","textNode","document","createTextNode","CONTENTS","appendChild","savedLength","removeChild","optimize","formatAt","node","data","composing","range","getNativeRange","lastChild","parentNode","mergedTextBlot","prevTextBlot","prevTextLength","nextTextBlot","nextText","newText","join","newTextNode","remapOffset","start","end","startNode","startOffset","endNode","endOffset","mutations","_this4","some","mutation","type","restore","unwrap","has","Object","hasOwnProperty","prefix","Events","EE","fn","once","addListener","emitter","event","TypeError","listener","evt","_events","push","_eventsCount","clearEvent","EventEmitter","__proto__","eventNames","events","names","slice","getOwnPropertySymbols","listeners","handlers","i","l","ee","listenerCount","emit","a1","a2","a3","a4","a5","len","removeListener","apply","j","on","removeAllListeners","off","prefixed","module","exports","instances","WeakMap","levels","level","debug","method","_console","_len","_key","console","namespace","ns","logger","bind","newLevel","eventName","addEventListener","from","querySelectorAll","_quill$emitter","quill","get","handleDOM","Emitter","_EventEmitter","_this5","domListeners","error","_debug$5$log","_get2","_len2","_key2","log","_len3","_key3","_ref","handler","contains","EDITOR_CHANGE","SCROLL_BEFORE_UPDATE","SCROLL_BLOT_MOUNT","SCROLL_BLOT_UNMOUNT","SCROLL_OPTIMIZE","SCROLL_UPDATE","SCROLL_EMBED_UPDATE","SELECTION_CHANGE","TEXT_CHANGE","COMPOSITION_BEFORE_START","COMPOSITION_START","COMPOSITION_BEFORE_END","COMPOSITION_END","API","SILENT","USER","Range","Selection","_this6","mouseDown","root","cursor","savedRange","lastRange","lastNative","handleComposition","handleDragging","listenDOM","setTimeout","update","sources","hasFocus","native","source","setNativeRange","triggeredByTyping","ignored","_context$range","_this7","_this8","body","focus","preventScroll","setRange","nativeRange","collapsed","find","after","attach","scrollLength","_this$scroll$leaf2","_slicedToArray","nextLine","_leaf$position2","position","createRange","setStart","_this$scroll$leaf6","_leaf$position4","setEnd","getBoundingClientRect","rect","side","Element","bottom","top","height","left","right","width","getSelection","rangeCount","getRangeAt","normalizeNative","info","isConnected","normalized","normalizedToRange","activeElement","_this9","positions","indexes","_position","max","_toConsumableArray","startContainer","endContainer","childNodes","_this10","getPosition","inclusive","_this10$scroll$leaf2","leafOffset","removeAllRanges","addRange","blur","rangeToNative","oldRange","_this$getRange2","getRange","isEqual","_this$emitter","_this$emitter2","cloneDeep","descendant","e","ASCII","Editor","getDelta","_this11","batchStart","ops","normalizedDelta","normalizeDelta","deleteDelta","op","Op","isImplicitNewlinePrepended","isImplicitNewlineAppended","retain","endsWith","_this11$scroll$line2","merge","AttributeMap","diff","_typeof","keys","isInlineEmbed","INLINE","_this11$scroll$descen2","INLINE_BLOT","updateEmbedAt","prependedLength","addedLength","delete","deleteAt","batchEnd","_this12","_this13","leaves","path","_map2","blots","combineFormats","lineFormats","leafFormats","_this$scroll$line6","lineOffset","lineLength","convertHTML","getContents","contents","change","insertContents","embed","_this14","getText","_this$scroll$line8","suffixLength","suffix","applyDelta","selectionInfo","oldDelta","match","textBlot","oldValue","CursorBlot","oldText","relativeSelectionInfo","shiftRange","newRange","compose","convertListHTML","items","lastIndent","types","endTag","getListType","_items","_items$","indent","rest","_getListType4","tag","previousType","isRoot","html","ParentBlot","forEachAt","childLength","list","parts","_blot$domNode","outerHTML","innerHTML","_outerHTML$split2","combined","merged","combinedValue","isArray","amount","Module","options","GUARD_TEXT","Embed","_EmbedBlot$4","_this15","contentNode","createElement","setAttribute","childNode","leftGuard","rightGuard","prevLength","_this16","Composition","setupListeners","_this17","isComposing","handleCompositionStart","queueMicrotask","handleCompositionEnd","Node","Theme","_this18","modules","addModule","ModuleClass","constructor","import","_Theme","default","getElementRect","element","scaleX","abs","offsetWidth","scaleY","offsetHeight","clientWidth","clientHeight","paddingValueToInt","number","parseInt","Number","isNaN","getScrollDistance","targetStart","targetEnd","scrollStart","scrollEnd","scrollPaddingStart","scrollPaddingEnd","CORE_FORMATS","globalRegistry","Parchment.Registry","Parchment.ParentBlot","uiClass","Quill","container","_this19","expandConfig","trim","classList","add","set","addContainer","scrollBlotName","Parchment.ScrollBlot","ScrollBlot","registry","Error","editor","composition","theme","keyboard","clipboard","history","uploader","init","toggle","isBlank","modify","convert","setContents","clear","placeholder","readOnly","disable","allowReadOnlyEdits","refNode","className","_this20","_overload2","overload","deleteText","enable","modifier","enabled","scrollSelectionIntoView","_this21","Parchment.Scope","formatLine","formatText","setSelection","_this22","_overload4","_this23","_overload6","bounds","getBounds","containerBounds","getLength","_overload8","getFormat","MAX_VALUE","_length","_overload10","getHTML","_length2","_overload12","_this24","insertEmbed","_this25","_overload14","insertText","isEnabled","_this$emitter3","_this$emitter4","_this$emitter5","_this26","_overload16","removeFormat","targetRect","ownerDocument","current","_window$visualViewpor","_window$visualViewpor2","_window$visualViewpor3","_window$visualViewpor4","isDocumentBody","bounding","window","visualViewport","documentElement","style","getComputedStyle","scrollDistanceX","scrollPaddingLeft","scrollPaddingRight","scrollDistanceY","scrollPaddingTop","scrollPaddingBottom","_document$defaultView","defaultView","scrollBy","_current","scrollLeft","scrollTop","scrolledLeft","scrolledTop","parentElement","getRootNode","host","scrollRectIntoView","warn","_this27","delete1","applied","delete2","_overload18","_this28","limit","bubble","imports","_this29","overwrite","attrName","register","startsWith","resolveSelector","selector","querySelector","expandModuleConfig","config","entries","expanded","_ref7","omitUndefinedValuesFromOptions","obj","fromEntries","entry","containerOrSelector","DEFAULTS","_Quill$DEFAULTS","quillModuleDefaults","quillDefaults","_objectWithoutProperties","_excluded","_theme$DEFAULTS","themeModuleDefaults","themeDefaults","_excluded2","toolbar","sourceRegistry","Registry","coreBlot","iterations","_format$requiredConta","requiredContainer","createRegistryWithFormats","modulesWithDefaults","_ref2","_ref8","moduleClass","_this$emitter6","_this$emitter7","lengthOrSource","transformPosition","_map3","_map4","pos","_map5","_map6","parchment","Parchment","Container","_ContainerBlot$","ContainerBlot","isLine","isUpdatable","updateContent","Scroll","_ScrollBlot$","_this30","batch","handleDragStart","_this$line2","first","last","wrapper","_this31","renderBlocks","deltaToRenderBlocks","shouldInsertNewlineChar","insertInlineContents","newlineCharLength","lineEndIndex","_this$children$find2","refBlot","refBlotOffset","renderBlock","createBlock","blockEmbed","getAttribute","_last","getLines","blotIndex","blotLength","lengthLeft","childIndex","_this32","observer","takeRecords","b","preventDefault","_this33","currentBlockDelta","splitted","_op$attributes","_op$attributes2","_this34","_ref3","_ref9","_ref4","_ref10","inlineContents","whitelist","AlignAttribute","Attributor","AlignClass","ClassAttributor","AlignStyle","StyleAttributor","ColorAttributor","_StyleAttributor$","hex","component","toString","ColorClass","ColorStyle","BackgroundClass","BackgroundStyle","CodeBlockContainer","_Container","innerText","code","CodeBlock","_Block2","Code","_Inline2","DirectionAttribute","DirectionClass","DirectionStyle","FontClass","FontStyleAttributor","_StyleAttributor$2","FontStyle","SizeClass","SizeStyle","SHORTKEY","test","navigator","platform","Keyboard","_Module2","_this35","bindings","addBinding","shiftKey","handleEnter","metaKey","ctrlKey","altKey","userAgent","handleBackspace","handleDelete","handleDeleteRange","listen","keyBinding","_this36","binding","shortKey","normalize","singleBinding","_this37","defaultPrevented","matches","which","_this37$quill$getLine2","getLine","_this37$quill$getLeaf2","getLeaf","leafStart","offsetStart","_ref12","leafEnd","offsetEnd","prefixText","suffixText","curContext","empty","every","curFormats","prevFormats","formatDelta","updateContents","nextFormats","deleteRange","_this38","defaultOptions","bold","makeFormatHandler","italic","underline","outdent","makeCodeBlockHandler","tab","table","cutoff","_this$quill$getLine10","_this$quill$getLine12","header","getModule","_module$getTable2","getTable","row","_table","cell","tableSide","blockquote","_this$quill$getLine14","_this$quill$getLine16","numLines","cur","makeEmbedArrowHandler","makeTableArrowHandler","TAB","textContent","up","targetRow","targetCell","targetLine","firstFormats","lastFormats","normalWeightRegexp","blockTagNames","isBlockElement","includes","ignoreRegexp","idRegexp","indentRegexp","normalizeListItem","doc","msoList","others","_node$parentNode2","listItems","idMatch","id","indentMatch","typeRegexp","RegExp","typeMatch","parseListItem","parsed","_loop","_childListItems$","childListItems","_listItems$","nextElementSibling","ul","listItem","li","replaceChild","NORMALIZERS","_node$getAttribute","_node$parentNode","fragment","createDocumentFragment","append","normalizeFontWeight","br","previousElementSibling","_br$parentNode","normalizeEmptyLines","CLIPBOARD_CONFIG","TEXT_NODE","_node$parentElement3","isPre","isBetweenInlineElements","replacer","collapse","replaced","previousSibling","nextSibling","matchNewline","deltaEndsWith","ELEMENT_NODE","applyFormat","classes","styles","attr","ATTRIBUTE","ATTRIBUTE_ATTRIBUTORS","keyName","STYLE_ATTRIBUTORS","newDelta","_ref17","_style$fontWeight","fontStyle","textDecoration","strike","fontWeight","_ref5","_ref18","parseFloat","textIndent","composed","checkedAttr","language","_node$parentElement","_node$parentElement2","createMatchAlias","memo","Clipboard","_Module3","_this39$options$match","_this39","onCaptureCopy","onCapturePaste","matchers","_ref15","matcher","addMatcher","normalizeExternalHTML","DOMParser","parseFromString","normalizeHTML","nodeMatches","_this$prepareMatching2","prepareMatching","elementMatchers","textMatchers","traverse","paste","_e$clipboardData","_e$clipboardData2","isCut","_this$onCopy","onCopy","clipboardData","setData","urlList","url","_e$clipboardData3","_e$clipboardData4","_e$clipboardData6","getData","_e$clipboardData5","normalizeURIList","files","upload","_doc$body$firstElemen","childElementCount","firstElementChild","onPaste","getSemanticHTML","pastedDelta","pair","_pair","endText","toLowerCase","preNodes","nodeType","childrenDelta","reducedDelta","_node","HTMLParagraphElement","firstChild","History","_Module4","_this40","undo","redo","currentRange","ignoreChange","userOnly","transform","record","transformRange","inputType","dest","stack","item","base","inverseDelta","invert","lastRecorded","restoreSelection","changeDelta","undoDelta","undoRange","timestamp","Date","now","delay","maxStack","transformStack","stackItem","deleteLength","changeIndex","lastOp","endsWithNewlineChange","getLastChangeIndex","remoteDelta","oldItem","splice","Uploader","_Module5","_this41","caretRangeFromPoint","clientX","clientY","caretPositionFromPoint","offsetNode","_e$dataTransfer","dataTransfer","_this42","uploads","file","_this42$options$mimet","mimetypes","_this43","promises","Promise","resolve","reader","FileReader","onload","result","readAsDataURL","all","then","images","image","INSERT_TYPES","Input","_Module6","_this44","handleBeforeInput","staticRange","getTargetRanges","_event$dataTransfer","getPlainTextFromInputEvent","replaceText","isMac","UINode","_Module7","_this45","handleArrowKeys","handleNavigationShortcuts","uiNode","isRTL","_this46","canMoveCaretBeforeUINode","ensureListeningToSelectionChange","_this47","selectionChangeDeadline","isListening","handleSelectionChange","setStartAfter","setEndAfter","IndentAttributor","_ClassAttributor$","normalizedValue","IndentClass","Blockquote","_Block3","Header","_Block4","ListContainer","_Container2","ListItem","_Block5","_this48","ui","listEventHandler","attachUI","Bold","_Inline3","replaceWith","Italic","_Bold2","Link","_Inline4","sanitize","PROTOCOL_WHITELIST","SANITIZED_URL","protocols","anchor","href","protocol","Script","_Inline5","Strike","_Bold3","Underline","_Inline6","Formula","_Embed","formula","katex","render","throwOnError","errorColor","ATTRIBUTES","Image","_EmbedBlot$5","removeAttribute","hasAttribute","Video","_BlockEmbed","video","TokenAttributor","CodeToken","_Inline7","_this49","SyntaxCodeBlock","_CodeBlock2","SyntaxCodeBlockContainer","_CodeBlockContainer","forceNext","emitMount","highlight","_this50","forced","nodes","cachedText","codeBlock","BreakBlot","Syntax","_Module8","_this51","hljs","languages","highlightBlot","initListener","initTimer","_this52","select","label","option","_this53","timer","clearTimeout","interval","_this54","lib","versionString","majorVersion","nodeText","TableCell","_Block6","rowOffset","tableId","TableRow","_Container3","thisHead","thisTail","nextHead","nextTail","_this55","childFormats","splitAfter","TableBody","_Container4","TableContainer","_Container5","_this56","rows","maxColumns","fill","column","at","_this57","_this58","random","Table","_Module9","_this59","listenBalanceCells","balanceCells","_this$getTable2","deleteColumn","cellOffset","_this$quill$getLine18","_this$getTable8","insertColumn","_this$getTable10","insertRow","columns","balanceTables","_this60","old","Toolbar","_Module10","_this61","_quill$container","groups","controls","group","control","addButton","input","String","addSelect","addControls","HTMLElement","_this61$options$handl","addHandler","_possibleConstructorReturn","_this62","selectedIndex","selected","prompt","_pair2","isActive","clean","_this63","direction","align","link","codeIcon","Icons","center","justify","background","color","rtl","bullet","check","ordered","script","sub","super","optionsCounter","toggleAriaAttribute","Picker","_this64","buildPicker","display","togglePicker","escape","_this65","tabIndex","selectItem","_this66","buildItem","_this67","buildLabel","buildOptions","_this68","close","trigger","dispatchEvent","Event","ColorPicker","_Picker","_this69","backgroundColor","colorLabel","stroke","IconPicker","_Picker2","icons","_this70","defaultItem","Tooltip","boundsContainer","_this71","el","overflowY","TEMPLATE","marginTop","hide","reference","rootBounds","verticalShift","ALIGNS","COLORS","FONTS","HEADERS","SIZES","BaseTheme","_Theme2","_this72","tooltip","textbox","pickers","picker","removeEventListener","extendToolbar","buttons","button","selects","_this73","fillSelect","edit","_this74","fileInput","click","BaseTooltip","_Tooltip","_this75","_this76","save","cancel","restoreFocus","mode","preview","linkRange","extractVideoUrl","defaultValue","TOOLBAR_CONFIG","BubbleTooltip","_BaseTooltip","_this77","show","lastLine","getIndex","indexBounds","_this78","arrow","marginLeft","BubbleTheme","_BaseTheme","_this79","buildButtons","buildPickers","SnowTooltip","_BaseTooltip2","_this80","_len5","_key6","_this81","_this81$quill$scroll$2","LinkBlot","SnowTheme","_BaseTheme2","_this82","_range","Indent","List","InlineCode"],"mappings":"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","x_google_ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62]}