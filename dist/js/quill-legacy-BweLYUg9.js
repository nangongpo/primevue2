!function(){var t=["modules"],e=["modules"];function n(t,e){if(null==t)return{};var n,i,r=function(t,e){if(null==t)return{};var n,i,r={},l=Object.keys(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)>=0||(r[n]=t[n]);return r}(t,e);if(Object.getOwnPropertySymbols){var l=Object.getOwnPropertySymbols(t);for(i=0;i<l.length;i++)n=l[i],e.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(t,n)&&(r[n]=t[n])}return r}function i(t){return i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i(t)}function r(t){return function(t){if(Array.isArray(t))return u(t)}(t)||l(t)||a(t)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function l(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function o(t,e){return c(t)||function(t,e){var n=null==t?null:"undefined"!=typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null!=n){var i,r,l,o,s=[],a=!0,u=!1;try{if(l=(n=n.call(t)).next,0===e){if(Object(n)!==n)return;a=!1}else for(;!(a=(i=l.call(n)).done)&&(s.push(i.value),s.length!==e);a=!0);}catch(t){u=!0,r=t}finally{try{if(!a&&null!=n.return&&(o=n.return(),Object(o)!==o))return}finally{if(u)throw r}}return s}}(t,e)||a(t,e)||s()}function s(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function a(t,e){if(t){if("string"==typeof t)return u(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?u(t,e):void 0}}function u(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,i=new Array(e);n<e;n++)i[n]=t[n];return i}function c(t){if(Array.isArray(t))return t}function h(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(t);e&&(i=i.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,i)}return n}function f(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?h(Object(n),!0).forEach((function(e){v(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):h(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}function d(){return d="undefined"!=typeof Reflect&&Reflect.get?Reflect.get.bind():function(t,e,n){var i=function(t,e){for(;!Object.prototype.hasOwnProperty.call(t,e)&&null!==(t=x(t)););return t}(t,e);if(i){var r=Object.getOwnPropertyDescriptor(i,e);return r.get?r.get.call(arguments.length<3?t:n):r.value}},d.apply(this,arguments)}function v(t,e,n){return(e=y(e))in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function p(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function g(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,y(i.key),i)}}function m(t,e,n){return e&&g(t.prototype,e),n&&g(t,n),Object.defineProperty(t,"prototype",{writable:!1}),t}function y(t){var e=function(t,e){if("object"!=i(t)||!t)return t;var n=t[Symbol.toPrimitive];if(void 0!==n){var r=n.call(t,e||"default");if("object"!=i(r))return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===e?String:Number)(t)}(t,"string");return"symbol"==i(e)?e:e+""}function b(t,e,n){return e=x(e),k(t,q()?Reflect.construct(e,n||[],x(t).constructor):e.apply(t,n))}function k(t,e){if(e&&("object"===i(e)||"function"==typeof e))return e;if(void 0!==e)throw new TypeError("Derived constructors may only return object or undefined");return function(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}(t)}function q(){try{var t=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){})))}catch(t){}return(q=function(){return!!t})()}function x(t){return x=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(t){return t.__proto__||Object.getPrototypeOf(t)},x(t)}function E(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function");t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,writable:!0,configurable:!0}}),Object.defineProperty(t,"prototype",{writable:!1}),e&&N(t,e)}function N(t,e){return N=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(t,e){return t.__proto__=e,t},N(t,e)}System.register(["./parchment-legacy-DCraDLkV.js","./quill-delta-legacy-D1eAK-aI.js","./fast-diff-legacy-2zhWRgQ3.js","./lodash-es-legacy-DObdXgzQ.js","./lodash.clonedeep-legacy-B2NlAcg0.js","./lodash.isequal-legacy-QYSFaOJg.js"],(function(u,h){"use strict";var g,y,q,N,w,A,S,L,T,O,C,R,I,M,D,B,U,_,P,j,H;return{setters:[function(t){g=t.E,y=t.T,q=t.I,N=t.S,w=t.B,A=t.A,S=t.L,L=t.P,T=t.R,O=t.a,C=t.b,R=t.C,I=t.c,M=t.d,D=t.e,u("Parchment",t.a)},function(t){B=t.D,U=t.a},function(t){_=t.g},function(t){P=t.i,j=t.c,H=t.m},null,null],execute:function(){var h,F=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"optimize",value:function(){(this.prev||this.next)&&this.remove()}},{key:"length",value:function(){return 0}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}])}(g);F.blotName="break",F.tagName="BR";var z=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(y);function K(t){return t.replace(/[&<>"']/g,(function(t){return{"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}[t]}))}var V=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"formatAt",value:function(t,n,i,r){if(e.compare(this.statics.blotName,i)<0&&this.scroll.query(i,N.BLOT)){var l=this.isolate(t,n);r&&l.wrap(i,r)}else d(x(e.prototype),"formatAt",this).call(this,t,n,i,r)}},{key:"optimize",value:function(t){if(d(x(e.prototype),"optimize",this).call(this,t),this.parent instanceof e&&e.compare(this.statics.blotName,this.parent.statics.blotName)>0){var n=this.parent.isolate(this.offset(),this.length());this.moveChildren(n),n.wrap(this)}}}],[{key:"compare",value:function(t,n){var i=e.order.indexOf(t),r=e.order.indexOf(n);return i>=0||r>=0?i-r:t===n?0:t<n?-1:1}}])}(q);v(V,"allowedChildren",[V,F,g,z]),v(V,"order",["cursor","inline","link","underline","strike","italic","bold","script","code"]);var Z=function(t){function e(){var t;p(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return v(t=b(this,e,[].concat(i)),"cache",{}),t}return E(e,t),m(e,[{key:"delta",value:function(){return null==this.cache.delta&&(this.cache.delta=W(this)),this.cache.delta}},{key:"deleteAt",value:function(t,n){d(x(e.prototype),"deleteAt",this).call(this,t,n),this.cache={}}},{key:"formatAt",value:function(t,n,i,r){n<=0||(this.scroll.query(i,N.BLOCK)?t+n===this.length()&&this.format(i,r):d(x(e.prototype),"formatAt",this).call(this,t,Math.min(n,this.length()-t-1),i,r),this.cache={})}},{key:"insertAt",value:function(t,n,i){if(null!=i)return d(x(e.prototype),"insertAt",this).call(this,t,n,i),void(this.cache={});if(0!==n.length){var r=n.split("\n"),l=r.shift();l.length>0&&(t<this.length()-1||null==this.children.tail?d(x(e.prototype),"insertAt",this).call(this,Math.min(t,this.length()-1),l):this.children.tail.insertAt(this.children.tail.length(),l),this.cache={});var o=this;r.reduce((function(t,e){return(o=o.split(t,!0)).insertAt(0,e),e.length}),t+l.length)}}},{key:"insertBefore",value:function(t,n){var i=this.children.head;d(x(e.prototype),"insertBefore",this).call(this,t,n),i instanceof F&&i.remove(),this.cache={}}},{key:"length",value:function(){return null==this.cache.length&&(this.cache.length=d(x(e.prototype),"length",this).call(this)+1),this.cache.length}},{key:"moveChildren",value:function(t,n){d(x(e.prototype),"moveChildren",this).call(this,t,n),this.cache={}}},{key:"optimize",value:function(t){d(x(e.prototype),"optimize",this).call(this,t),this.cache={}}},{key:"path",value:function(t){return d(x(e.prototype),"path",this).call(this,t,!0)}},{key:"removeChild",value:function(t){d(x(e.prototype),"removeChild",this).call(this,t),this.cache={}}},{key:"split",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(n&&(0===t||t>=this.length()-1)){var i=this.clone();return 0===t?(this.parent.insertBefore(i,this),this):(this.parent.insertBefore(i,this.next),i)}var r=d(x(e.prototype),"split",this).call(this,t,n);return this.cache={},r}}])}(w);Z.blotName="block",Z.tagName="P",Z.defaultChild=F,Z.allowedChildren=[F,V,g,z];var G=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"attach",value:function(){d(x(e.prototype),"attach",this).call(this),this.attributes=new A(this.domNode)}},{key:"delta",value:function(){return(new B).insert(this.value(),f(f({},this.formats()),this.attributes.values()))}},{key:"format",value:function(t,e){var n=this.scroll.query(t,N.BLOCK_ATTRIBUTE);null!=n&&this.attributes.attribute(n,e)}},{key:"formatAt",value:function(t,e,n,i){this.format(n,i)}},{key:"insertAt",value:function(t,n,i){var r=this;if(null==i){var l=n.split("\n"),o=l.pop(),s=l.map((function(t){var e=r.scroll.create(Z.blotName);return e.insertAt(0,t),e})),a=this.split(t);s.forEach((function(t){r.parent.insertBefore(t,a)})),o&&this.parent.insertBefore(this.scroll.create("text",o),a)}else d(x(e.prototype),"insertAt",this).call(this,t,n,i)}}])}(g);function W(t){var e=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return t.descendants(S).reduce((function(t,n){return 0===n.length()?t:t.insert(n.value(),$(n,{},e))}),new B).insert("\n",$(t))}function $(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?e:("formats"in t&&"function"==typeof t.formats&&(e=f(f({},e),t.formats()),n&&delete e["code-token"]),null==t.parent||"scroll"===t.parent.statics.blotName||t.parent.statics.scope!==t.statics.scope?e:$(t.parent,e,n))}G.scope=N.BLOCK_BLOT;var X=function(t){function e(t,n,i){var r;return p(this,e),(r=b(this,e,[t,n])).selection=i,r.textNode=document.createTextNode(e.CONTENTS),r.domNode.appendChild(r.textNode),r.savedLength=0,r}return E(e,t),m(e,[{key:"detach",value:function(){null!=this.parent&&this.parent.removeChild(this)}},{key:"format",value:function(t,n){if(0===this.savedLength){for(var i=this,r=0;null!=i&&i.statics.scope!==N.BLOCK_BLOT;)r+=i.offset(i.parent),i=i.parent;null!=i&&(this.savedLength=e.CONTENTS.length,i.optimize(),i.formatAt(r,e.CONTENTS.length,t,n),this.savedLength=0)}else d(x(e.prototype),"format",this).call(this,t,n)}},{key:"index",value:function(t,n){return t===this.textNode?0:d(x(e.prototype),"index",this).call(this,t,n)}},{key:"length",value:function(){return this.savedLength}},{key:"position",value:function(){return[this.textNode,this.textNode.data.length]}},{key:"remove",value:function(){d(x(e.prototype),"remove",this).call(this),this.parent=null}},{key:"restore",value:function(){if(this.selection.composing||null==this.parent)return null;for(var t=this.selection.getNativeRange();null!=this.domNode.lastChild&&this.domNode.lastChild!==this.textNode;)this.domNode.parentNode.insertBefore(this.domNode.lastChild,this.domNode);var n,i=this.prev instanceof z?this.prev:null,r=i?i.length():0,l=this.next instanceof z?this.next:null,o=l?l.text:"",s=this.textNode,a=s.data.split(e.CONTENTS).join("");if(s.data=e.CONTENTS,i)n=i,(a||l)&&(i.insertAt(i.length(),a+o),l&&l.remove());else if(l)n=l,l.insertAt(0,a);else{var u=document.createTextNode(a);n=this.scroll.create(u),this.parent.insertBefore(n,this)}if(this.remove(),t){var c=function(t,e){return i&&t===i.domNode?e:t===s?r+e-1:l&&t===l.domNode?r+a.length+e:null},h=c(t.start.node,t.start.offset),f=c(t.end.node,t.end.offset);if(null!==h&&null!==f)return{startNode:n.domNode,startOffset:h,endNode:n.domNode,endOffset:f}}return null}},{key:"update",value:function(t,e){var n=this;if(t.some((function(t){return"characterData"===t.type&&t.target===n.textNode}))){var i=this.restore();i&&(e.range=i)}}},{key:"optimize",value:function(t){d(x(e.prototype),"optimize",this).call(this,t);for(var n=this.parent;n;){if("A"===n.domNode.tagName){this.savedLength=e.CONTENTS.length,n.isolate(this.offset(n),this.length()).unwrap(),this.savedLength=0;break}n=n.parent}}},{key:"value",value:function(){return""}}],[{key:"value",value:function(){}}])}(g);v(X,"blotName","cursor"),v(X,"className","ql-cursor"),v(X,"tagName","span"),v(X,"CONTENTS","\ufeff");var Q={exports:{}};!function(t){var e=Object.prototype.hasOwnProperty,n="~";function i(){}function r(t,e,n){this.fn=t,this.context=e,this.once=n||!1}function l(t,e,i,l,o){if("function"!=typeof i)throw new TypeError("The listener must be a function");var s=new r(i,l||t,o),a=n?n+e:e;return t._events[a]?t._events[a].fn?t._events[a]=[t._events[a],s]:t._events[a].push(s):(t._events[a]=s,t._eventsCount++),t}function o(t,e){0==--t._eventsCount?t._events=new i:delete t._events[e]}function s(){this._events=new i,this._eventsCount=0}Object.create&&(i.prototype=Object.create(null),(new i).__proto__||(n=!1)),s.prototype.eventNames=function(){var t,i,r=[];if(0===this._eventsCount)return r;for(i in t=this._events)e.call(t,i)&&r.push(n?i.slice(1):i);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(t)):r},s.prototype.listeners=function(t){var e=n?n+t:t,i=this._events[e];if(!i)return[];if(i.fn)return[i.fn];for(var r=0,l=i.length,o=new Array(l);r<l;r++)o[r]=i[r].fn;return o},s.prototype.listenerCount=function(t){var e=n?n+t:t,i=this._events[e];return i?i.fn?1:i.length:0},s.prototype.emit=function(t,e,i,r,l,o){var s=n?n+t:t;if(!this._events[s])return!1;var a,u,c=this._events[s],h=arguments.length;if(c.fn){switch(c.once&&this.removeListener(t,c.fn,void 0,!0),h){case 1:return c.fn.call(c.context),!0;case 2:return c.fn.call(c.context,e),!0;case 3:return c.fn.call(c.context,e,i),!0;case 4:return c.fn.call(c.context,e,i,r),!0;case 5:return c.fn.call(c.context,e,i,r,l),!0;case 6:return c.fn.call(c.context,e,i,r,l,o),!0}for(u=1,a=new Array(h-1);u<h;u++)a[u-1]=arguments[u];c.fn.apply(c.context,a)}else{var f,d=c.length;for(u=0;u<d;u++)switch(c[u].once&&this.removeListener(t,c[u].fn,void 0,!0),h){case 1:c[u].fn.call(c[u].context);break;case 2:c[u].fn.call(c[u].context,e);break;case 3:c[u].fn.call(c[u].context,e,i);break;case 4:c[u].fn.call(c[u].context,e,i,r);break;default:if(!a)for(f=1,a=new Array(h-1);f<h;f++)a[f-1]=arguments[f];c[u].fn.apply(c[u].context,a)}}return!0},s.prototype.on=function(t,e,n){return l(this,t,e,n,!1)},s.prototype.once=function(t,e,n){return l(this,t,e,n,!0)},s.prototype.removeListener=function(t,e,i,r){var l=n?n+t:t;if(!this._events[l])return this;if(!e)return o(this,l),this;var s=this._events[l];if(s.fn)s.fn!==e||r&&!s.once||i&&s.context!==i||o(this,l);else{for(var a=0,u=[],c=s.length;a<c;a++)(s[a].fn!==e||r&&!s[a].once||i&&s[a].context!==i)&&u.push(s[a]);u.length?this._events[l]=1===u.length?u[0]:u:o(this,l)}return this},s.prototype.removeAllListeners=function(t){var e;return t?(e=n?n+t:t,this._events[e]&&o(this,e)):(this._events=new i,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=n,s.EventEmitter=s,t.exports=s}(Q);var Y=_(Q.exports),J=new WeakMap,tt=["error","warn","log","info"],et="warn";function nt(t){if(et&&tt.indexOf(t)<=tt.indexOf(et)){for(var e,n=arguments.length,i=new Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];(e=console)[t].apply(e,i)}}function it(t){return tt.reduce((function(e,n){return e[n]=nt.bind(console,n,t),e}),{})}it.level=function(t){et=t},nt.level=it.level;var rt=it("quill:events");["selectionchange","mousedown","mouseup","click"].forEach((function(t){document.addEventListener(t,(function(){for(var t=arguments.length,e=new Array(t),n=0;n<t;n++)e[n]=arguments[n];Array.from(document.querySelectorAll(".ql-container")).forEach((function(t){var n,i=J.get(t);i&&i.emitter&&(n=i.emitter).handleDOM.apply(n,e)}))}))}));var lt=function(t){function e(){var t;return p(this,e),(t=b(this,e)).domListeners={},t.on("error",rt.error),t}return E(e,t),m(e,[{key:"emit",value:function(){for(var t,n,i=arguments.length,r=new Array(i),l=0;l<i;l++)r[l]=arguments[l];return(t=rt.log).call.apply(t,[rt].concat(r)),(n=d(x(e.prototype),"emit",this)).call.apply(n,[this].concat(r))}},{key:"handleDOM",value:function(t){for(var e=arguments.length,n=new Array(e>1?e-1:0),i=1;i<e;i++)n[i-1]=arguments[i];(this.domListeners[t.type]||[]).forEach((function(e){var i=e.node,r=e.handler;(t.target===i||i.contains(t.target))&&r.apply(void 0,[t].concat(n))}))}},{key:"listenDOM",value:function(t,e,n){this.domListeners[t]||(this.domListeners[t]=[]),this.domListeners[t].push({node:e,handler:n})}}])}(Y);v(lt,"events",{EDITOR_CHANGE:"editor-change",SCROLL_BEFORE_UPDATE:"scroll-before-update",SCROLL_BLOT_MOUNT:"scroll-blot-mount",SCROLL_BLOT_UNMOUNT:"scroll-blot-unmount",SCROLL_OPTIMIZE:"scroll-optimize",SCROLL_UPDATE:"scroll-update",SCROLL_EMBED_UPDATE:"scroll-embed-update",SELECTION_CHANGE:"selection-change",TEXT_CHANGE:"text-change",COMPOSITION_BEFORE_START:"composition-before-start",COMPOSITION_START:"composition-start",COMPOSITION_BEFORE_END:"composition-before-end",COMPOSITION_END:"composition-end"}),v(lt,"sources",{API:"api",SILENT:"silent",USER:"user"});var ot=it("quill:selection"),st=m((function t(e){p(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;this.index=e,this.length=n}));u("Range",st);var at=function(){return m((function t(e,n){var i=this;p(this,t),this.emitter=n,this.scroll=e,this.composing=!1,this.mouseDown=!1,this.root=this.scroll.domNode,this.cursor=this.scroll.create("cursor",this),this.savedRange=new st(0,0),this.lastRange=this.savedRange,this.lastNative=null,this.handleComposition(),this.handleDragging(),this.emitter.listenDOM("selectionchange",document,(function(){i.mouseDown||i.composing||setTimeout(i.update.bind(i,lt.sources.USER),1)})),this.emitter.on(lt.events.SCROLL_BEFORE_UPDATE,(function(){if(i.hasFocus()){var t=i.getNativeRange();null!=t&&t.start.node!==i.cursor.textNode&&i.emitter.once(lt.events.SCROLL_UPDATE,(function(e,n){try{i.root.contains(t.start.node)&&i.root.contains(t.end.node)&&i.setNativeRange(t.start.node,t.start.offset,t.end.node,t.end.offset);var r=n.some((function(t){return"characterData"===t.type||"childList"===t.type||"attributes"===t.type&&t.target===i.root}));i.update(r?lt.sources.SILENT:e)}catch(l){}}))}})),this.emitter.on(lt.events.SCROLL_OPTIMIZE,(function(t,e){if(e.range){var n=e.range,r=n.startNode,l=n.startOffset,o=n.endNode,s=n.endOffset;i.setNativeRange(r,l,o,s),i.update(lt.sources.SILENT)}})),this.update(lt.sources.SILENT)}),[{key:"handleComposition",value:function(){var t=this;this.emitter.on(lt.events.COMPOSITION_BEFORE_START,(function(){t.composing=!0})),this.emitter.on(lt.events.COMPOSITION_END,(function(){if(t.composing=!1,t.cursor.parent){var e=t.cursor.restore();if(!e)return;setTimeout((function(){t.setNativeRange(e.startNode,e.startOffset,e.endNode,e.endOffset)}),1)}}))}},{key:"handleDragging",value:function(){var t=this;this.emitter.listenDOM("mousedown",document.body,(function(){t.mouseDown=!0})),this.emitter.listenDOM("mouseup",document.body,(function(){t.mouseDown=!1,t.update(lt.sources.USER)}))}},{key:"focus",value:function(){this.hasFocus()||(this.root.focus({preventScroll:!0}),this.setRange(this.savedRange))}},{key:"format",value:function(t,e){this.scroll.update();var n=this.getNativeRange();if(null!=n&&n.native.collapsed&&!this.scroll.query(t,N.BLOCK)){if(n.start.node!==this.cursor.textNode){var i=this.scroll.find(n.start.node,!1);if(null==i)return;if(i instanceof S){var r=i.split(n.start.offset);i.parent.insertBefore(this.cursor,r)}else i.insertBefore(this.cursor,n.start.node);this.cursor.attach()}this.cursor.format(t,e),this.scroll.optimize(),this.setNativeRange(this.cursor.textNode,this.cursor.textNode.data.length),this.update()}}},{key:"getBounds",value:function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=this.scroll.length();t=Math.min(t,i-1),n=Math.min(t+n,i-1)-t;var r=o(this.scroll.leaf(t),2),l=r[0],s=r[1];if(null==l)return null;if(n>0&&s===l.length()){var a=o(this.scroll.leaf(t+1),1)[0];if(a)o(this.scroll.line(t),1)[0]===o(this.scroll.line(t+1),1)[0]&&(l=a,s=0)}var u=o(l.position(s,!0),2);e=u[0],s=u[1];var c=document.createRange();if(n>0){c.setStart(e,s);var h=o(this.scroll.leaf(t+n),2);if(l=h[0],s=h[1],null==l)return null;var f=o(l.position(s,!0),2);return e=f[0],s=f[1],c.setEnd(e,s),c.getBoundingClientRect()}var d,v="left";if(e instanceof Text){if(!e.data.length)return null;s<e.data.length?(c.setStart(e,s),c.setEnd(e,s+1)):(c.setStart(e,s-1),c.setEnd(e,s),v="right"),d=c.getBoundingClientRect()}else{if(!(l.domNode instanceof Element))return null;d=l.domNode.getBoundingClientRect(),s>0&&(v="right")}return{bottom:d.top+d.height,height:d.height,left:d[v],right:d[v],top:d.top,width:0}}},{key:"getNativeRange",value:function(){var t=document.getSelection();if(null==t||t.rangeCount<=0)return null;var e=t.getRangeAt(0);if(null==e)return null;var n=this.normalizeNative(e);return ot.info("getNativeRange",n),n}},{key:"getRange",value:function(){var t=this.scroll.domNode;if("isConnected"in t&&!t.isConnected)return[null,null];var e=this.getNativeRange();return null==e?[null,null]:[this.normalizedToRange(e),e]}},{key:"hasFocus",value:function(){return document.activeElement===this.root||null!=document.activeElement&&ut(this.root,document.activeElement)}},{key:"normalizedToRange",value:function(t){var e=this,n=[[t.start.node,t.start.offset]];t.native.collapsed||n.push([t.end.node,t.end.offset]);var i=n.map((function(t){var n=o(t,2),i=n[0],r=n[1],l=e.scroll.find(i,!0),s=l.offset(e.scroll);return 0===r?s:l instanceof S?s+l.index(i,r):s+l.length()})),l=Math.min(Math.max.apply(Math,r(i)),this.scroll.length()-1),s=Math.min.apply(Math,[l].concat(r(i)));return new st(s,l-s)}},{key:"normalizeNative",value:function(t){if(!ut(this.root,t.startContainer)||!t.collapsed&&!ut(this.root,t.endContainer))return null;var e={start:{node:t.startContainer,offset:t.startOffset},end:{node:t.endContainer,offset:t.endOffset},native:t};return[e.start,e.end].forEach((function(t){for(var e=t.node,n=t.offset;!(e instanceof Text)&&e.childNodes.length>0;)if(e.childNodes.length>n)e=e.childNodes[n],n=0;else{if(e.childNodes.length!==n)break;n=(e=e.lastChild)instanceof Text?e.data.length:e.childNodes.length>0?e.childNodes.length:e.childNodes.length+1}t.node=e,t.offset=n})),e}},{key:"rangeToNative",value:function(t){var e=this,n=this.scroll.length(),i=function(t,i){t=Math.min(n-1,t);var r=o(e.scroll.leaf(t),2),l=r[0],s=r[1];return l?l.position(s,i):[null,-1]};return[].concat(r(i(t.index,!1)),r(i(t.index+t.length,!0)))}},{key:"setNativeRange",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:t,i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e,r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(ot.info("setNativeRange",t,e,n,i),null==t||null!=this.root.parentNode&&null!=t.parentNode&&null!=n.parentNode){var l=document.getSelection();if(null!=l)if(null!=t){this.hasFocus()||this.root.focus({preventScroll:!0});var o=(this.getNativeRange()||{}).native;if(null==o||r||t!==o.startContainer||e!==o.startOffset||n!==o.endContainer||i!==o.endOffset){t instanceof Element&&"BR"===t.tagName&&(e=Array.from(t.parentNode.childNodes).indexOf(t),t=t.parentNode),n instanceof Element&&"BR"===n.tagName&&(i=Array.from(n.parentNode.childNodes).indexOf(n),n=n.parentNode);var s=document.createRange();s.setStart(t,e),s.setEnd(n,i),l.removeAllRanges(),l.addRange(s)}}else l.removeAllRanges(),this.root.blur()}}},{key:"setRange",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lt.sources.API;if("string"==typeof e&&(n=e,e=!1),ot.info("setRange",t),null!=t){var i=this.rangeToNative(t);this.setNativeRange.apply(this,r(i).concat([e]))}else this.setNativeRange(null);this.update(n)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt.sources.USER,e=this.lastRange,n=o(this.getRange(),2),i=n[0],r=n[1];if(this.lastRange=i,this.lastNative=r,null!=this.lastRange&&(this.savedRange=this.lastRange),!P(e,this.lastRange)){var l;if(!this.composing&&null!=r&&r.native.collapsed&&r.start.node!==this.cursor.textNode){var s=this.cursor.restore();s&&this.setNativeRange(s.startNode,s.startOffset,s.endNode,s.endOffset)}var a,u=[lt.events.SELECTION_CHANGE,j(this.lastRange),j(e),t];if((l=this.emitter).emit.apply(l,[lt.events.EDITOR_CHANGE].concat(u)),t!==lt.sources.SILENT)(a=this.emitter).emit.apply(a,u)}}}])}();function ut(t,e){try{e.parentNode}catch(n){return!1}return t.contains(e)}var ct=/^[ -~]*$/,ht=function(){return m((function t(e){p(this,t),this.scroll=e,this.delta=this.getDelta()}),[{key:"applyDelta",value:function(t){var e=this;this.scroll.update();var n=this.scroll.length();this.scroll.batchStart();var r,l,s=gt(t),a=new B;return(r=s.ops.slice(),l=[],r.forEach((function(t){"string"==typeof t.insert?t.insert.split("\n").forEach((function(e,n){n&&l.push({insert:"\n",attributes:t.attributes}),e&&l.push({insert:e,attributes:t.attributes})})):l.push(t)})),l).reduce((function(t,r){var l=U.Op.length(r),s=r.attributes||{},u=!1,c=!1;if(null!=r.insert){if(a.retain(l),"string"==typeof r.insert){var h=r.insert;c=!h.endsWith("\n")&&(n<=t||!!e.scroll.descendant(G,t)[0]),e.scroll.insertAt(t,h);var f=o(e.scroll.line(t),2),d=f[0],v=f[1],p=H({},$(d));if(d instanceof Z){var m=o(d.descendant(S,v),1)[0];m&&(p=H(p,$(m)))}s=U.AttributeMap.diff(p,s)||{}}else if("object"===i(r.insert)){var y=Object.keys(r.insert)[0];if(null==y)return t;var b=null!=e.scroll.query(y,N.INLINE);if(b)(n<=t||e.scroll.descendant(G,t)[0])&&(c=!0);else if(t>0){var k=o(e.scroll.descendant(S,t-1),2),q=k[0],x=k[1];if(q instanceof z)"\n"!==q.value()[x]&&(u=!0);else q instanceof g&&q.statics.scope===N.INLINE_BLOT&&(u=!0)}if(e.scroll.insertAt(t,y,r.insert[y]),b){var E=o(e.scroll.descendant(S,t),1)[0];if(E){var w=H({},$(E));s=U.AttributeMap.diff(w,s)||{}}}}n+=l}else if(a.push(r),null!==r.retain&&"object"===i(r.retain)){var A=Object.keys(r.retain)[0];if(null==A)return t;e.scroll.updateEmbedAt(t,A,r.retain[A])}Object.keys(s).forEach((function(n){e.scroll.formatAt(t,l,n,s[n])}));var L=u?1:0,T=c?1:0;return n+=L+T,a.retain(L),a.delete(T),t+l+L+T}),0),a.reduce((function(t,n){return"number"==typeof n.delete?(e.scroll.deleteAt(t,n.delete),t):t+U.Op.length(n)}),0),this.scroll.batchEnd(),this.scroll.optimize(),this.update(s)}},{key:"deleteText",value:function(t,e){return this.scroll.deleteAt(t,e),this.update((new B).retain(t).delete(e))}},{key:"formatLine",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};this.scroll.update(),Object.keys(i).forEach((function(r){n.scroll.lines(t,Math.max(e,1)).forEach((function(t){t.format(r,i[r])}))})),this.scroll.optimize();var r=(new B).retain(t).retain(e,j(i));return this.update(r)}},{key:"formatText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};Object.keys(i).forEach((function(r){n.scroll.formatAt(t,e,r,i[r])}));var r=(new B).retain(t).retain(e,j(i));return this.update(r)}},{key:"getContents",value:function(t,e){return this.delta.slice(t,t+e)}},{key:"getDelta",value:function(){return this.scroll.lines().reduce((function(t,e){return t.concat(e.delta())}),new B)}},{key:"getFormat",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=[],i=[];0===e?this.scroll.path(t).forEach((function(t){var e=o(t,1)[0];e instanceof Z?n.push(e):e instanceof S&&i.push(e)})):(n=this.scroll.lines(t,e),i=this.scroll.descendants(S,t,e));var r=o([n,i].map((function(t){var e=t.shift();if(null==e)return{};for(var n=$(e);Object.keys(n).length>0;){var i=t.shift();if(null==i)return n;n=vt($(i),n)}return n})),2),l=r[0],s=r[1];return f(f({},l),s)}},{key:"getHTML",value:function(t,e){var n=o(this.scroll.line(t),2),i=n[0],r=n[1];if(i){var l=i.length();return!(i.length()>=r+e)||0===r&&e===l?dt(this.scroll,t,e,!0):dt(i,r,e,!0)}return""}},{key:"getText",value:function(t,e){return this.getContents(t,e).filter((function(t){return"string"==typeof t.insert})).map((function(t){return t.insert})).join("")}},{key:"insertContents",value:function(t,e){var n=gt(e),i=(new B).retain(t).concat(n);return this.scroll.insertContents(t,n),this.update(i)}},{key:"insertEmbed",value:function(t,e,n){return this.scroll.insertAt(t,e,n),this.update((new B).retain(t).insert(v({},e,n)))}},{key:"insertText",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return e=e.replace(/\r\n/g,"\n").replace(/\r/g,"\n"),this.scroll.insertAt(t,e),Object.keys(i).forEach((function(r){n.scroll.formatAt(t,e.length,r,i[r])})),this.update((new B).retain(t).insert(e,j(i)))}},{key:"isBlank",value:function(){if(0===this.scroll.children.length)return!0;if(this.scroll.children.length>1)return!1;var t=this.scroll.children.head;if((null==t?void 0:t.statics.blotName)!==Z.blotName)return!1;var e=t;return!(e.children.length>1)&&e.children.head instanceof F}},{key:"removeFormat",value:function(t,e){var n=this.getText(t,e),i=o(this.scroll.line(t+e),2),r=i[0],l=i[1],s=0,a=new B;null!=r&&(s=r.length()-l,a=r.delta().slice(l,l+s-1).insert("\n"));var u=this.getContents(t,e+s).diff((new B).insert(n).concat(a)),c=(new B).retain(t).concat(u);return this.applyDelta(c)}},{key:"update",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,i=this.delta;if(1===e.length&&"characterData"===e[0].type&&e[0].target.data.match(ct)&&this.scroll.find(e[0].target)){var r=this.scroll.find(e[0].target),l=$(r),o=r.offset(this.scroll),s=e[0].oldValue.replace(X.CONTENTS,""),a=(new B).insert(s),u=(new B).insert(r.value()),c=n&&{oldRange:mt(n.oldRange,-o),newRange:mt(n.newRange,-o)};t=(new B).retain(o).concat(a.diff(u,c)).reduce((function(t,e){return e.insert?t.insert(e.insert,l):t.push(e)}),new B),this.delta=i.compose(t)}else this.delta=this.getDelta(),t&&P(i.compose(t),this.delta)||(t=i.diff(this.delta,n));return t}}])}();function ft(t,e,n){if(0===t.length){var i=o(pt(n.pop()),1)[0];return e<=0?"</li></".concat(i,">"):"</li></".concat(i,">").concat(ft([],e-1,n))}var r,u=c(r=t)||l(r)||a(r)||s(),h=u[0],f=h.child,d=h.offset,v=h.length,p=h.indent,g=h.type,m=u.slice(1),y=o(pt(g),2),b=y[0],k=y[1];if(p>e)return n.push(g),p===e+1?"<".concat(b,"><li").concat(k,">").concat(dt(f,d,v)).concat(ft(m,p,n)):"<".concat(b,"><li>").concat(ft(t,e+1,n));var q=n[n.length-1];if(p===e&&g===q)return"</li><li".concat(k,">").concat(dt(f,d,v)).concat(ft(m,p,n));var x=o(pt(n.pop()),1)[0];return"</li></".concat(x,">").concat(ft(t,e-1,n))}function dt(t,e,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if("html"in t&&"function"==typeof t.html)return t.html(e,n);if(t instanceof z)return K(t.value().slice(e,e+n));if(t instanceof L){if("list-container"===t.statics.blotName){var r=[];return t.children.forEachAt(e,n,(function(t,e,n){var i="formats"in t&&"function"==typeof t.formats?t.formats():{};r.push({child:t,offset:e,length:n,indent:i.indent||0,type:i.list})})),ft(r,-1,[])}var l=[];if(t.children.forEachAt(e,n,(function(t,e,n){l.push(dt(t,e,n))})),i||"list"===t.statics.blotName)return l.join("");var s=t.domNode,a=s.outerHTML,u=s.innerHTML,c=o(a.split(">".concat(u,"<")),2),h=c[0],f=c[1];return"<table"===h?'<table style="border: 1px solid #000;">'.concat(l.join(""),"<").concat(f):"".concat(h,">").concat(l.join(""),"<").concat(f)}return t.domNode instanceof Element?t.domNode.outerHTML:""}function vt(t,e){return Object.keys(e).reduce((function(n,i){if(null==t[i])return n;var r=e[i];return r===t[i]?n[i]=r:Array.isArray(r)?r.indexOf(t[i])<0?n[i]=r.concat([t[i]]):n[i]=r:n[i]=[r,t[i]],n}),{})}function pt(t){var e="ordered"===t?"ol":"ul";switch(t){case"checked":return[e,' data-list="checked"'];case"unchecked":return[e,' data-list="unchecked"'];default:return[e,""]}}function gt(t){return t.reduce((function(t,e){if("string"==typeof e.insert){var n=e.insert.replace(/\r\n/g,"\n").replace(/\r/g,"\n");return t.insert(n,e.attributes)}return t.push(e)}),new B)}function mt(t,e){var n=t.index,i=t.length;return new st(n+e,i)}var yt=m((function t(e){p(this,t);var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.quill=e,this.options=n}));v(yt,"DEFAULTS",{});var bt="\ufeff",kt=function(t){function e(t,n){var i;return p(this,e),(i=b(this,e,[t,n])).contentNode=document.createElement("span"),i.contentNode.setAttribute("contenteditable","false"),Array.from(i.domNode.childNodes).forEach((function(t){i.contentNode.appendChild(t)})),i.leftGuard=document.createTextNode(bt),i.rightGuard=document.createTextNode(bt),i.domNode.appendChild(i.leftGuard),i.domNode.appendChild(i.contentNode),i.domNode.appendChild(i.rightGuard),i}return E(e,t),m(e,[{key:"index",value:function(t,n){return t===this.leftGuard?0:t===this.rightGuard?1:d(x(e.prototype),"index",this).call(this,t,n)}},{key:"restore",value:function(t){var e,n=null,i=t.data.split(bt).join("");if(t===this.leftGuard)if(this.prev instanceof z){var r=this.prev.length();this.prev.insertAt(r,i),n={startNode:this.prev.domNode,startOffset:r+i.length}}else e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this),n={startNode:e,startOffset:i.length};else t===this.rightGuard&&(this.next instanceof z?(this.next.insertAt(0,i),n={startNode:this.next.domNode,startOffset:i.length}):(e=document.createTextNode(i),this.parent.insertBefore(this.scroll.create(e),this.next),n={startNode:e,startOffset:i.length}));return t.data=bt,n}},{key:"update",value:function(t,e){var n=this;t.forEach((function(t){if("characterData"===t.type&&(t.target===n.leftGuard||t.target===n.rightGuard)){var i=n.restore(t.target);i&&(e.range=i)}}))}}])}(g),qt=function(){return m((function t(e,n){p(this,t),v(this,"isComposing",!1),this.scroll=e,this.emitter=n,this.setupListeners()}),[{key:"setupListeners",value:function(){var t=this;this.scroll.domNode.addEventListener("compositionstart",(function(e){t.isComposing||t.handleCompositionStart(e)})),this.scroll.domNode.addEventListener("compositionend",(function(e){t.isComposing&&queueMicrotask((function(){t.handleCompositionEnd(e)}))}))}},{key:"handleCompositionStart",value:function(t){var e=t.target instanceof Node?this.scroll.find(t.target,!0):null;!e||e instanceof kt||(this.emitter.emit(lt.events.COMPOSITION_BEFORE_START,t),this.scroll.batchStart(),this.emitter.emit(lt.events.COMPOSITION_START,t),this.isComposing=!0)}},{key:"handleCompositionEnd",value:function(t){this.emitter.emit(lt.events.COMPOSITION_BEFORE_END,t),this.scroll.batchEnd(),this.emitter.emit(lt.events.COMPOSITION_END,t),this.isComposing=!1}}])}(),xt=function(){return m((function t(e,n){p(this,t),v(this,"modules",{}),this.quill=e,this.options=n}),[{key:"init",value:function(){var t=this;Object.keys(this.options.modules).forEach((function(e){null==t.modules[e]&&t.addModule(e)}))}},{key:"addModule",value:function(t){var e=this.quill.constructor.import("modules/".concat(t));return this.modules[t]=new e(this.quill,this.options.modules[t]||{}),this.modules[t]}}])}();h=xt,v(xt,"DEFAULTS",{modules:{}}),v(xt,"themes",{default:h});var Et=function(t){var e=t.getBoundingClientRect(),n="offsetWidth"in t&&Math.abs(e.width)/t.offsetWidth||1,i="offsetHeight"in t&&Math.abs(e.height)/t.offsetHeight||1;return{top:e.top,right:e.left+t.clientWidth*n,bottom:e.top+t.clientHeight*i,left:e.left}},Nt=function(t){var e=parseInt(t,10);return Number.isNaN(e)?0:e},wt=function(t,e,n,i,r,l){return t<n&&e>i?0:t<n?-(n-t+r):e>i?e-t>i-n?t+r-n:e-i+l:0},At=["block","break","cursor","inline","scroll","text"],St=it("quill"),Lt=new T;L.uiClass="ql-ui";var Tt=function(){function t(e){var n=this;p(this,t);var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(this.options=It(e,i),this.container=this.options.container,null!=this.container){this.options.debug&&t.debug(this.options.debug);var r=this.container.innerHTML.trim();this.container.classList.add("ql-container"),this.container.innerHTML="",J.set(this.container,this),this.root=this.addContainer("ql-editor"),this.root.classList.add("ql-blank"),this.emitter=new lt;var l=C.blotName,s=this.options.registry.query(l);if(!s||!("blotName"in s))throw new Error('Cannot initialize Quill without "'.concat(l,'" blot'));if(this.scroll=new s(this.options.registry,this.root,{emitter:this.emitter}),this.editor=new ht(this.scroll),this.selection=new at(this.scroll,this.emitter),this.composition=new qt(this.scroll,this.emitter),this.theme=new this.options.theme(this,this.options),this.keyboard=this.theme.addModule("keyboard"),this.clipboard=this.theme.addModule("clipboard"),this.history=this.theme.addModule("history"),this.uploader=this.theme.addModule("uploader"),this.theme.addModule("input"),this.theme.addModule("uiNode"),this.theme.init(),this.emitter.on(lt.events.EDITOR_CHANGE,(function(t){t===lt.events.TEXT_CHANGE&&n.root.classList.toggle("ql-blank",n.editor.isBlank())})),this.emitter.on(lt.events.SCROLL_UPDATE,(function(t,e){var i=n.selection.lastRange,r=o(n.selection.getRange(),1)[0],l=i&&r?{oldRange:i,newRange:r}:void 0;Mt.call(n,(function(){return n.editor.update(null,e,l)}),t)})),this.emitter.on(lt.events.SCROLL_EMBED_UPDATE,(function(e,i){var r=n.selection.lastRange,l=o(n.selection.getRange(),1)[0],s=r&&l?{oldRange:r,newRange:l}:void 0;Mt.call(n,(function(){var t=(new B).retain(e.offset(n)).retain(v({},e.statics.blotName,i));return n.editor.update(t,[],s)}),t.sources.USER)})),r){var a=this.clipboard.convert({html:"".concat(r,"<p><br></p>"),text:"\n"});this.setContents(a)}this.history.clear(),this.options.placeholder&&this.root.setAttribute("data-placeholder",this.options.placeholder),this.options.readOnly&&this.disable(),this.allowReadOnlyEdits=!1}else St.error("Invalid Quill container",e)}return m(t,[{key:"addContainer",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if("string"==typeof t){var n=t;(t=document.createElement("div")).classList.add(n)}return this.container.insertBefore(t,e),t}},{key:"blur",value:function(){this.selection.setRange(null)}},{key:"deleteText",value:function(t,e,n){var i=this,r=o(Dt(t,e,n),4);return t=r[0],e=r[1],n=r[3],Mt.call(this,(function(){return i.editor.deleteText(t,e)}),n,t,-1*e)}},{key:"disable",value:function(){this.enable(!1)}},{key:"editReadOnly",value:function(t){this.allowReadOnlyEdits=!0;var e=t();return this.allowReadOnlyEdits=!1,e}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.scroll.enable(t),this.container.classList.toggle("ql-disabled",!t)}},{key:"focus",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.selection.focus(),t.preventScroll||this.scrollSelectionIntoView()}},{key:"format",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:lt.sources.API;return Mt.call(this,(function(){var i=n.getSelection(!0),r=new B;if(null==i)return r;if(n.scroll.query(t,N.BLOCK))r=n.editor.formatLine(i.index,i.length,v({},t,e));else{if(0===i.length)return n.selection.format(t,e),r;r=n.editor.formatText(i.index,i.length,v({},t,e))}return n.setSelection(i,lt.sources.SILENT),r}),i)}},{key:"formatLine",value:function(t,e,n,i,r){var l,s=this,a=o(Dt(t,e,n,i,r),4);return t=a[0],e=a[1],l=a[2],r=a[3],Mt.call(this,(function(){return s.editor.formatLine(t,e,l)}),r,t,0)}},{key:"formatText",value:function(t,e,n,i,r){var l,s=this,a=o(Dt(t,e,n,i,r),4);return t=a[0],e=a[1],l=a[2],r=a[3],Mt.call(this,(function(){return s.editor.formatText(t,e,l)}),r,t,0)}},{key:"getBounds",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=null;if(!(n="number"==typeof t?this.selection.getBounds(t,e):this.selection.getBounds(t.index,t.length)))return null;var i=this.container.getBoundingClientRect();return{bottom:n.bottom-i.top,height:n.height,left:n.left-i.left,right:n.right-i.left,top:n.top-i.top,width:n.width}}},{key:"getContents",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getLength()-t,n=o(Dt(t,e),2);return t=n[0],e=n[1],this.editor.getContents(t,e)}},{key:"getFormat",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.getSelection(!0),e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;return"number"==typeof t?this.editor.getFormat(t,e):this.editor.getFormat(t.index,t.length)}},{key:"getIndex",value:function(t){return t.offset(this.scroll)}},{key:"getLength",value:function(){return this.scroll.length()}},{key:"getLeaf",value:function(t){return this.scroll.leaf(t)}},{key:"getLine",value:function(t){return this.scroll.line(t)}},{key:"getLines",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE;return"number"!=typeof t?this.scroll.lines(t.index,t.length):this.scroll.lines(t,e)}},{key:"getModule",value:function(t){return this.theme.modules[t]}},{key:"getSelection",value:function(){return arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&this.focus(),this.update(),this.selection.getRange()[0]}},{key:"getSemanticHTML",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;"number"==typeof e&&(n=null!==(t=n)&&void 0!==t?t:this.getLength()-e);var i=o(Dt(e,n),2);return e=i[0],n=i[1],this.editor.getHTML(e,n)}},{key:"getText",value:function(){var t,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,n=arguments.length>1?arguments[1]:void 0;"number"==typeof e&&(n=null!==(t=n)&&void 0!==t?t:this.getLength()-e);var i=o(Dt(e,n),2);return e=i[0],n=i[1],this.editor.getText(e,n)}},{key:"hasFocus",value:function(){return this.selection.hasFocus()}},{key:"insertEmbed",value:function(e,n,i){var r=this,l=arguments.length>3&&void 0!==arguments[3]?arguments[3]:t.sources.API;return Mt.call(this,(function(){return r.editor.insertEmbed(e,n,i)}),l,e)}},{key:"insertText",value:function(t,e,n,i,r){var l,s=this,a=o(Dt(t,0,n,i,r),4);return t=a[0],l=a[2],r=a[3],Mt.call(this,(function(){return s.editor.insertText(t,e,l)}),r,t,e.length)}},{key:"isEnabled",value:function(){return this.scroll.isEnabled()}},{key:"off",value:function(){var t;return(t=this.emitter).off.apply(t,arguments)}},{key:"on",value:function(){var t;return(t=this.emitter).on.apply(t,arguments)}},{key:"once",value:function(){var t;return(t=this.emitter).once.apply(t,arguments)}},{key:"removeFormat",value:function(t,e,n){var i=this,r=o(Dt(t,e,n),4);return t=r[0],e=r[1],n=r[3],Mt.call(this,(function(){return i.editor.removeFormat(t,e)}),n,t)}},{key:"scrollRectIntoView",value:function(t){!function(t,e){for(var n,i=t.ownerDocument,r=e,l=t;l;){var o,s,a,u,c=l===i.body,h=c?{top:0,right:null!==(o=null===(s=window.visualViewport)||void 0===s?void 0:s.width)&&void 0!==o?o:i.documentElement.clientWidth,bottom:null!==(a=null===(u=window.visualViewport)||void 0===u?void 0:u.height)&&void 0!==a?a:i.documentElement.clientHeight,left:0}:Et(l),f=getComputedStyle(l),d=wt(r.left,r.right,h.left,h.right,Nt(f.scrollPaddingLeft),Nt(f.scrollPaddingRight)),v=wt(r.top,r.bottom,h.top,h.bottom,Nt(f.scrollPaddingTop),Nt(f.scrollPaddingBottom));if(d||v)if(c){var p;null===(p=i.defaultView)||void 0===p||p.scrollBy(d,v)}else{var g=l,m=g.scrollLeft,y=g.scrollTop;v&&(l.scrollTop+=v),d&&(l.scrollLeft+=d);var b=l.scrollLeft-m,k=l.scrollTop-y;r={left:r.left-b,top:r.top-k,right:r.right-b,bottom:r.bottom-k}}l=c||"fixed"===f.position?null:(n=l).parentElement||n.getRootNode().host||null}}(this.root,t)}},{key:"scrollIntoView",value:function(){console.warn("Quill#scrollIntoView() has been deprecated and will be removed in the near future. Please use Quill#scrollSelectionIntoView() instead."),this.scrollSelectionIntoView()}},{key:"scrollSelectionIntoView",value:function(){var t=this.selection.lastRange,e=t&&this.selection.getBounds(t.index,t.length);e&&this.scrollRectIntoView(e)}},{key:"setContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt.sources.API;return Mt.call(this,(function(){t=new B(t);var n=e.getLength(),i=e.editor.deleteText(0,n),r=e.editor.insertContents(0,t),l=e.editor.deleteText(e.getLength()-1,1);return i.compose(r).compose(l)}),n)}},{key:"setSelection",value:function(e,n,i){if(null==e)this.selection.setRange(null,n||t.sources.API);else{var r=o(Dt(e,n,i),4);e=r[0],n=r[1],i=r[3],this.selection.setRange(new st(Math.max(0,e),n),i),i!==lt.sources.SILENT&&this.scrollSelectionIntoView()}}},{key:"setText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt.sources.API,n=(new B).insert(t);return this.setContents(n,e)}},{key:"update",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:lt.sources.USER,e=this.scroll.update(t);return this.selection.update(t),e}},{key:"updateContents",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:lt.sources.API;return Mt.call(this,(function(){return t=new B(t),e.editor.applyDelta(t)}),n,!0)}}],[{key:"debug",value:function(t){!0===t&&(t="log"),it.level(t)}},{key:"find",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return J.get(t)||Lt.find(t,e)}},{key:"import",value:function(t){return null==this.imports[t]&&St.error("Cannot import ".concat(t,". Are you sure it was registered?")),this.imports[t]}},{key:"register",value:function(t,e){var n=this,i=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if("string"!=typeof t){var r="attrName"in t?t.attrName:t.blotName;"string"==typeof r?this.register("formats/".concat(r),t,e):Object.keys(t).forEach((function(i){n.register(i,t[i],e)}))}else null==this.imports[t]||i||St.warn("Overwriting ".concat(t," with"),e),this.imports[t]=e,(t.startsWith("blots/")||t.startsWith("formats/"))&&e&&"boolean"!=typeof e&&"abstract"!==e.blotName&&Lt.register(e),"function"==typeof e.register&&e.register(Lt)}}])}();function Ot(t){return"string"==typeof t?document.querySelector(t):t}function Ct(t){return Object.entries(null!=t?t:{}).reduce((function(t,e){var n=o(e,2),i=n[0],r=n[1];return f(f({},t),{},v({},i,!0===r?{}:r))}),{})}function Rt(t){return Object.fromEntries(Object.entries(t).filter((function(t){return void 0!==t[1]})))}function It(i,r){var l=Ot(i);if(!l)throw new Error("Invalid Quill container");var s=!r.theme||r.theme===Tt.DEFAULTS.theme?xt:Tt.import("themes/".concat(r.theme));if(!s)throw new Error("Invalid theme ".concat(r.theme,". Did you register it?"));var a=Tt.DEFAULTS,u=a.modules,c=n(a,t),h=s.DEFAULTS,d=h.modules,p=n(h,e),g=H({},Ct(u),Ct(d),Ct(r.modules));null!=g&&g.toolbar&&g.toolbar.constructor!==Object&&(g.toolbar={container:g.toolbar});var m=f(f(f({},c),Rt(p)),Rt(r)),y=r.registry;return y?r.formats&&St.warn('Ignoring "formats" option because "registry" is specified'):y=r.formats?function(t,e,n){var i=new T;return At.forEach((function(t){var n=e.query(t);n&&i.register(n)})),t.forEach((function(t){var r=e.query(t);r||n.error('Cannot register "'.concat(t,'" specified in "formats" config. Are you sure it was registered?'));for(var l=0;r;){var o;if(i.register(r),r="blotName"in r&&null!==(o=r.requiredContainer)&&void 0!==o?o:null,(l+=1)>100){n.error('Cycle detected in registering blot requiredContainer: "'.concat(t,'"'));break}}})),i}(r.formats,m.registry,St):m.registry,f(f({},m),{},{registry:y,container:l,theme:s,modules:Object.entries(g).reduce((function(t,e){var n=o(e,2),i=n[0],r=n[1];if(!r)return t;var l=Tt.import("modules/".concat(i));return null==l?(St.error("Cannot load ".concat(i," module. Are you sure you registered it?")),t):f(f({},t),{},v({},i,H({},l.DEFAULTS||{},r)))}),{}),bounds:Ot(m.bounds)})}function Mt(t,e,n,i){if(!this.isEnabled()&&e===lt.sources.USER&&!this.allowReadOnlyEdits)return new B;var r=null==n?null:this.getSelection(),l=this.editor.delta,o=t();if(null!=r&&(!0===n&&(n=r.index),null==i?r=Bt(r,o,e):0!==i&&(r=Bt(r,n,i,e)),this.setSelection(r,lt.sources.SILENT)),o.length()>0){var s,a,u=[lt.events.TEXT_CHANGE,o,l,e];if((s=this.emitter).emit.apply(s,[lt.events.EDITOR_CHANGE].concat(u)),e!==lt.sources.SILENT)(a=this.emitter).emit.apply(a,u)}return o}function Dt(t,e,n,r,l){var o={};return"number"==typeof t.index&&"number"==typeof t.length?"number"!=typeof e?(l=r,r=n,n=e,e=t.length,t=t.index):(e=t.length,t=t.index):"number"!=typeof e&&(l=r,r=n,n=e,e=0),"object"===i(n)?(o=n,l=r):"string"==typeof n&&(null!=r?o[n]=r:l=n),[t,e,o,l=l||lt.sources.API]}function Bt(t,e,n,i){var r,l,s="number"==typeof n?n:0;if(null==t)return null;if(e&&"function"==typeof e.transformPosition){var a=o([t.index,t.index+t.length].map((function(t){return e.transformPosition(t,i!==lt.sources.USER)})),2);r=a[0],l=a[1]}else{var u=o([t.index,t.index+t.length].map((function(t){return t<e||t===e&&i===lt.sources.USER?t:s>=0?t+s:Math.max(e,t+s)})),2);r=u[0],l=u[1]}return new st(r,l-r)}v(Tt,"DEFAULTS",{bounds:null,modules:{clipboard:!0,keyboard:!0,history:!0,uploader:!0},placeholder:"",readOnly:!1,registry:Lt,theme:"default"}),v(Tt,"events",lt.events),v(Tt,"sources",lt.sources),v(Tt,"version","2.0.0"),v(Tt,"imports",{delta:B,parchment:O,"core/module":yt,"core/theme":xt}),u("default",Tt);var Ut=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(R);function _t(t){return t instanceof Z||t instanceof G}function Pt(t){return"function"==typeof t.updateContent}var jt=function(t){function e(t,n,i){var r;p(this,e);var l=i.emitter;return(r=b(this,e,[t,n])).emitter=l,r.batch=!1,r.optimize(),r.enable(),r.domNode.addEventListener("dragstart",(function(t){return r.handleDragStart(t)})),r}return E(e,t),m(e,[{key:"batchStart",value:function(){Array.isArray(this.batch)||(this.batch=[])}},{key:"batchEnd",value:function(){if(this.batch){var t=this.batch;this.batch=!1,this.update(t)}}},{key:"emitMount",value:function(t){this.emitter.emit(lt.events.SCROLL_BLOT_MOUNT,t)}},{key:"emitUnmount",value:function(t){this.emitter.emit(lt.events.SCROLL_BLOT_UNMOUNT,t)}},{key:"emitEmbedUpdate",value:function(t,e){this.emitter.emit(lt.events.SCROLL_EMBED_UPDATE,t,e)}},{key:"deleteAt",value:function(t,n){var i=o(this.line(t),2),r=i[0],l=i[1],s=o(this.line(t+n),1)[0];if(d(x(e.prototype),"deleteAt",this).call(this,t,n),null!=s&&r!==s&&l>0){if(r instanceof G||s instanceof G)return void this.optimize();var a=s.children.head instanceof F?null:s.children.head;r.moveChildren(s,a),r.remove()}this.optimize()}},{key:"enable",value:function(){var t=!(arguments.length>0&&void 0!==arguments[0])||arguments[0];this.domNode.setAttribute("contenteditable",t?"true":"false")}},{key:"formatAt",value:function(t,n,i,r){d(x(e.prototype),"formatAt",this).call(this,t,n,i,r),this.optimize()}},{key:"insertAt",value:function(t,n,i){if(t>=this.length())if(null==i||null==this.scroll.query(n,N.BLOCK)){var r=this.scroll.create(this.statics.defaultChild.blotName);this.appendChild(r),null==i&&n.endsWith("\n")?r.insertAt(0,n.slice(0,-1),i):r.insertAt(0,n,i)}else{var l=this.scroll.create(n,i);this.appendChild(l)}else d(x(e.prototype),"insertAt",this).call(this,t,n,i);this.optimize()}},{key:"insertBefore",value:function(t,n){if(t.statics.scope===N.INLINE_BLOT){var i=this.scroll.create(this.statics.defaultChild.blotName);i.appendChild(t),d(x(e.prototype),"insertBefore",this).call(this,i,n)}else d(x(e.prototype),"insertBefore",this).call(this,t,n)}},{key:"insertContents",value:function(t,e){var n=this,i=this.deltaToRenderBlocks(e.concat((new B).insert("\n"))),r=i.pop();if(null!=r){this.batchStart();var l=i.shift();if(l){var s="block"===l.type&&(0===l.delta.length()||!this.descendant(G,t)[0]&&t<this.length()),a="block"===l.type?l.delta:(new B).insert(v({},l.key,l.value));Ht(this,t,a);var u="block"===l.type?1:0,c=t+a.length()+u;s&&this.insertAt(c-1,"\n");var h=$(this.line(t)[0]),f=U.AttributeMap.diff(h,l.attributes)||{};Object.keys(f).forEach((function(t){n.formatAt(c-1,1,t,f[t])})),t=c}var d=o(this.children.find(t),2),p=d[0],g=d[1];if(i.length&&(p&&(p=p.split(g),g=0),i.forEach((function(t){if("block"===t.type){Ht(n.createBlock(t.attributes,p||void 0),0,t.delta)}else{var e=n.create(t.key,t.value);n.insertBefore(e,p||void 0),Object.keys(t.attributes).forEach((function(n){e.format(n,t.attributes[n])}))}}))),"block"===r.type&&r.delta.length())Ht(this,p?p.offset(p.scroll)+g:this.length(),r.delta);this.batchEnd(),this.optimize()}}},{key:"isEnabled",value:function(){return"true"===this.domNode.getAttribute("contenteditable")}},{key:"leaf",value:function(t){var e=this.path(t).pop();if(!e)return[null,-1];var n=o(e,2),i=n[0],r=n[1];return i instanceof S?[i,r]:[null,-1]}},{key:"line",value:function(t){return t===this.length()?this.line(t-1):this.descendant(_t,t)}},{key:"lines",value:function(){return function t(e,n,i){var r=[],l=i;return e.children.forEachAt(n,i,(function(e,n,i){_t(e)?r.push(e):e instanceof R&&(r=r.concat(t(e,n,l))),l-=i})),r}(this,arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,arguments.length>1&&void 0!==arguments[1]?arguments[1]:Number.MAX_VALUE)}},{key:"optimize",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};this.batch||(d(x(e.prototype),"optimize",this).call(this,t,n),t.length>0&&this.emitter.emit(lt.events.SCROLL_OPTIMIZE,t,n))}},{key:"path",value:function(t){return d(x(e.prototype),"path",this).call(this,t).slice(1)}},{key:"remove",value:function(){}},{key:"update",value:function(t){var n=this;if(this.batch)Array.isArray(t)&&(this.batch=this.batch.concat(t));else{var i=lt.sources.USER;"string"==typeof t&&(i=t),Array.isArray(t)||(t=this.observer.takeRecords()),(t=t.filter((function(t){var e=t.target,i=n.find(e,!0);return i&&!Pt(i)}))).length>0&&this.emitter.emit(lt.events.SCROLL_BEFORE_UPDATE,i,t),d(x(e.prototype),"update",this).call(this,t.concat([])),t.length>0&&this.emitter.emit(lt.events.SCROLL_UPDATE,i,t)}}},{key:"updateEmbedAt",value:function(t,e,n){var i=o(this.descendant((function(t){return t instanceof G}),t),1)[0];i&&i.statics.blotName===e&&Pt(i)&&i.updateContent(n)}},{key:"handleDragStart",value:function(t){t.preventDefault()}},{key:"deltaToRenderBlocks",value:function(t){var e=this,n=[],i=new B;return t.forEach((function(t){var r=null==t?void 0:t.insert;if(r)if("string"==typeof r){var l=r.split("\n");l.slice(0,-1).forEach((function(e){var r;i.insert(e,t.attributes),n.push({type:"block",delta:i,attributes:null!==(r=t.attributes)&&void 0!==r?r:{}}),i=new B}));var o=l[l.length-1];o&&i.insert(o,t.attributes)}else{var s,a=Object.keys(r)[0];if(!a)return;if(e.query(a,N.INLINE))i.push(t);else i.length()&&n.push({type:"block",delta:i,attributes:{}}),i=new B,n.push({type:"blockEmbed",key:a,value:r[a],attributes:null!==(s=t.attributes)&&void 0!==s?s:{}})}})),i.length()&&n.push({type:"block",delta:i,attributes:{}}),n}},{key:"createBlock",value:function(t,e){var n,i=this,r={};Object.entries(t).forEach((function(t){var e=o(t,2),l=e[0],s=e[1];null!=i.query(l,N.BLOCK&N.BLOT)?n=l:r[l]=s}));var l=this.create(n||this.statics.defaultChild.blotName,n?t[n]:void 0);this.insertBefore(l,e||void 0);var s=l.length();return Object.entries(r).forEach((function(t){var e=o(t,2),n=e[0],i=e[1];l.formatAt(0,s,n,i)})),l}}])}(C);function Ht(t,e,n){n.reduce((function(e,n){var r=U.Op.length(n),l=n.attributes||{};if(null!=n.insert)if("string"==typeof n.insert){var s=n.insert;t.insertAt(e,s);var a=$(o(t.descendant(S,e),1)[0]);l=U.AttributeMap.diff(a,l)||{}}else if("object"===i(n.insert)){var u=Object.keys(n.insert)[0];if(null==u)return e;if(t.insertAt(e,u,n.insert[u]),null!=t.scroll.query(u,N.INLINE)){var c=$(o(t.descendant(S,e),1)[0]);l=U.AttributeMap.diff(c,l)||{}}}return Object.keys(l).forEach((function(n){t.formatAt(e,r,n,l[n])})),e+r}),e)}v(jt,"blotName","scroll"),v(jt,"className","ql-editor"),v(jt,"tagName","DIV"),v(jt,"defaultChild",Z),v(jt,"allowedChildren",[Z,G,Ut]);var Ft={scope:N.BLOCK,whitelist:["right","center","justify"]},zt=new I("align","align",Ft),Kt=new M("align","ql-align",Ft),Vt=new D("align","text-align",Ft),Zt=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"value",value:function(t){var n=d(x(e.prototype),"value",this).call(this,t);if(!n.startsWith("rgb("))return n;n=n.replace(/^[^\d]+/,"").replace(/[^\d]+$/,"");var i=n.split(",").map((function(t){return"00".concat(parseInt(t,10).toString(16)).slice(-2)})).join("");return"#".concat(i)}}])}(D),Gt=new M("color","ql-color",{scope:N.INLINE}),Wt=new Zt("color","color",{scope:N.INLINE}),$t=new M("background","ql-bg",{scope:N.INLINE}),Xt=new Zt("background","background-color",{scope:N.INLINE}),Qt=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"code",value:function(t,e){return this.children.map((function(t){return t.length()<=1?"":t.domNode.innerText})).join("\n").slice(t,t+e)}},{key:"html",value:function(t,e){return"<pre>\n".concat(K(this.code(t,e)),"\n</pre>")}}],[{key:"create",value:function(t){var n=d(x(e),"create",this).call(this,t);return n.setAttribute("spellcheck","false"),n}}])}(Ut),Yt=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,null,[{key:"register",value:function(){Tt.register(Qt)}}])}(Z);v(Yt,"TAB","  ");var Jt=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(V);Jt.blotName="code",Jt.tagName="CODE",Yt.blotName="code-block",Yt.className="ql-code-block",Yt.tagName="DIV",Qt.blotName="code-block-container",Qt.className="ql-code-block-container",Qt.tagName="DIV",Qt.allowedChildren=[Yt],Yt.allowedChildren=[z,F,X],Yt.requiredContainer=Qt;var te={scope:N.BLOCK,whitelist:["rtl"]},ee=new I("direction","dir",te),ne=new M("direction","ql-direction",te),ie=new D("direction","direction",te),re={scope:N.INLINE,whitelist:["serif","monospace"]},le=new M("font","ql-font",re),oe=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"value",value:function(t){return d(x(e.prototype),"value",this).call(this,t).replace(/["']/g,"")}}])}(D),se=new oe("font","font-family",re),ae=new M("size","ql-size",{scope:N.INLINE,whitelist:["small","large","huge"]}),ue=new D("size","font-size",{scope:N.INLINE,whitelist:["10px","18px","32px"]}),ce=it("quill:keyboard"),he=/Mac/i.test(navigator.platform)?"metaKey":"ctrlKey",fe=function(t){function e(t,n){var i;return p(this,e),(i=b(this,e,[t,n])).bindings={},Object.keys(i.options.bindings).forEach((function(t){i.options.bindings[t]&&i.addBinding(i.options.bindings[t])})),i.addBinding({key:"Enter",shiftKey:null},i.handleEnter),i.addBinding({key:"Enter",metaKey:null,ctrlKey:null,altKey:null},(function(){})),/Firefox/i.test(navigator.userAgent)?(i.addBinding({key:"Backspace"},{collapsed:!0},i.handleBackspace),i.addBinding({key:"Delete"},{collapsed:!0},i.handleDelete)):(i.addBinding({key:"Backspace"},{collapsed:!0,prefix:/^.?$/},i.handleBackspace),i.addBinding({key:"Delete"},{collapsed:!0,suffix:/^.?$/},i.handleDelete)),i.addBinding({key:"Backspace"},{collapsed:!1},i.handleDeleteRange),i.addBinding({key:"Delete"},{collapsed:!1},i.handleDeleteRange),i.addBinding({key:"Backspace",altKey:null,ctrlKey:null,metaKey:null,shiftKey:null},{collapsed:!0,offset:0},i.handleBackspace),i.listen(),i}return E(e,t),m(e,[{key:"addBinding",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},l=function(t){if("string"==typeof t||"number"==typeof t)t={key:t};else{if("object"!==i(t))return null;t=j(t)}t.shortKey&&(t[he]=t.shortKey,delete t.shortKey);return t}(t);null!=l?("function"==typeof n&&(n={handler:n}),"function"==typeof r&&(r={handler:r}),(Array.isArray(l.key)?l.key:[l.key]).forEach((function(t){var i=f(f(f({},l),{},{key:t},n),r);e.bindings[i.key]=e.bindings[i.key]||[],e.bindings[i.key].push(i)}))):ce.warn("Attempted to add invalid keyboard binding",l)}},{key:"listen",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(n){if(!n.defaultPrevented&&!n.isComposing){var r=(t.bindings[n.key]||[]).concat(t.bindings[n.which]||[]).filter((function(t){return e.match(n,t)}));if(0!==r.length){var l=Tt.find(n.target,!0);if(!l||l.scroll===t.quill.scroll){var s=t.quill.getSelection();if(null!=s&&t.quill.hasFocus()){var a=o(t.quill.getLine(s.index),2),u=a[0],c=a[1],h=o(t.quill.getLeaf(s.index),2),f=h[0],d=h[1],v=o(0===s.length?[f,d]:t.quill.getLeaf(s.index+s.length),2),p=v[0],g=v[1],m=f instanceof y?f.value().slice(0,d):"",b=p instanceof y?p.value().slice(g):"",k={collapsed:0===s.length,empty:0===s.length&&u.length()<=1,format:t.quill.getFormat(s),line:u,offset:c,prefix:m,suffix:b,event:n};r.some((function(e){if(null!=e.collapsed&&e.collapsed!==k.collapsed)return!1;if(null!=e.empty&&e.empty!==k.empty)return!1;if(null!=e.offset&&e.offset!==k.offset)return!1;if(Array.isArray(e.format)){if(e.format.every((function(t){return null==k.format[t]})))return!1}else if("object"===i(e.format)&&!Object.keys(e.format).every((function(t){return!0===e.format[t]?null!=k.format[t]:!1===e.format[t]?null==k.format[t]:P(e.format[t],k.format[t])})))return!1;return!(null!=e.prefix&&!e.prefix.test(k.prefix))&&(!(null!=e.suffix&&!e.suffix.test(k.suffix))&&!0!==e.handler.call(t,s,k,e))}))&&n.preventDefault()}}}}}))}},{key:"handleBackspace",value:function(t,e){var n=/[\uD800-\uDBFF][\uDC00-\uDFFF]$/.test(e.prefix)?2:1;if(!(0===t.index||this.quill.getLength()<=1)){var i={},r=o(this.quill.getLine(t.index),1)[0],l=(new B).retain(t.index-n).delete(n);if(0===e.offset){var s=o(this.quill.getLine(t.index-1),1)[0];if(s)if(!("block"===s.statics.blotName&&s.length()<=1)){var a=r.formats(),u=this.quill.getFormat(t.index-1,1);if(i=U.AttributeMap.diff(a,u)||{},Object.keys(i).length>0){var c=(new B).retain(t.index+r.length()-2).retain(1,i);l=l.compose(c)}}}this.quill.updateContents(l,Tt.sources.USER),this.quill.focus()}}},{key:"handleDelete",value:function(t,e){var n=/^[\uD800-\uDBFF][\uDC00-\uDFFF]/.test(e.suffix)?2:1;if(!(t.index>=this.quill.getLength()-n)){var i={},r=o(this.quill.getLine(t.index),1)[0],l=(new B).retain(t.index).delete(n);if(e.offset>=r.length()-1){var s=o(this.quill.getLine(t.index+1),1)[0];if(s){var a=r.formats(),u=this.quill.getFormat(t.index,1);i=U.AttributeMap.diff(a,u)||{},Object.keys(i).length>0&&(l=l.retain(s.length()-1).retain(1,i))}}this.quill.updateContents(l,Tt.sources.USER),this.quill.focus()}}},{key:"handleDeleteRange",value:function(t){ye({range:t,quill:this.quill}),this.quill.focus()}},{key:"handleEnter",value:function(t,e){var n=this,i=Object.keys(e.format).reduce((function(t,i){return n.quill.scroll.query(i,N.BLOCK)&&!Array.isArray(e.format[i])&&(t[i]=e.format[i]),t}),{}),r=(new B).retain(t.index).delete(t.length).insert("\n",i);this.quill.updateContents(r,Tt.sources.USER),this.quill.setSelection(t.index+1,Tt.sources.SILENT),this.quill.focus()}}],[{key:"match",value:function(t,e){return!["altKey","ctrlKey","metaKey","shiftKey"].some((function(n){return!!e[n]!==t[n]&&null!==e[n]}))&&(e.key===t.key||e.key===t.which)}}])}(yt),de={bindings:{bold:ge("bold"),italic:ge("italic"),underline:ge("underline"),indent:{key:"Tab",format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","+1",Tt.sources.USER),!1)}},outdent:{key:"Tab",shiftKey:!0,format:["blockquote","indent","list"],handler:function(t,e){return!(!e.collapsed||0===e.offset)||(this.quill.format("indent","-1",Tt.sources.USER),!1)}},"outdent backspace":{key:"Backspace",collapsed:!0,shiftKey:null,metaKey:null,ctrlKey:null,altKey:null,format:["indent","list"],offset:0,handler:function(t,e){null!=e.format.indent?this.quill.format("indent","-1",Tt.sources.USER):null!=e.format.list&&this.quill.format("list",!1,Tt.sources.USER)}},"indent code-block":ve(!0),"outdent code-block":ve(!1),"remove tab":{key:"Tab",shiftKey:!0,collapsed:!0,prefix:/\t$/,handler:function(t){this.quill.deleteText(t.index-1,1,Tt.sources.USER)}},tab:{key:"Tab",handler:function(t,e){if(e.format.table)return!0;this.quill.history.cutoff();var n=(new B).retain(t.index).delete(t.length).insert("\t");return this.quill.updateContents(n,Tt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index+1,Tt.sources.SILENT),!1}},"blockquote empty enter":{key:"Enter",collapsed:!0,format:["blockquote"],empty:!0,handler:function(){this.quill.format("blockquote",!1,Tt.sources.USER)}},"list empty enter":{key:"Enter",collapsed:!0,format:["list"],empty:!0,handler:function(t,e){var n={list:!1};e.format.indent&&(n.indent=!1),this.quill.formatLine(t.index,t.length,n,Tt.sources.USER)}},"checklist enter":{key:"Enter",collapsed:!0,format:{list:"checked"},handler:function(t){var e=o(this.quill.getLine(t.index),2),n=e[0],i=e[1],r=f(f({},n.formats()),{},{list:"checked"}),l=(new B).retain(t.index).insert("\n",r).retain(n.length()-i-1).retain(1,{list:"unchecked"});this.quill.updateContents(l,Tt.sources.USER),this.quill.setSelection(t.index+1,Tt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"header enter":{key:"Enter",collapsed:!0,format:["header"],suffix:/^$/,handler:function(t,e){var n=o(this.quill.getLine(t.index),2),i=n[0],r=n[1],l=(new B).retain(t.index).insert("\n",e.format).retain(i.length()-r-1).retain(1,{header:null});this.quill.updateContents(l,Tt.sources.USER),this.quill.setSelection(t.index+1,Tt.sources.SILENT),this.quill.scrollSelectionIntoView()}},"table backspace":{key:"Backspace",format:["table"],collapsed:!0,offset:0,handler:function(){}},"table delete":{key:"Delete",format:["table"],collapsed:!0,suffix:/^$/,handler:function(){}},"table enter":{key:"Enter",shiftKey:null,format:["table"],handler:function(t){var e=this.quill.getModule("table");if(e){var n=o(e.getTable(t),4),i=n[0],r=function(t,e,n,i){if(null==e.prev&&null==e.next)return null==n.prev&&null==n.next?0===i?-1:1:null==n.prev?-1:1;if(null==e.prev)return-1;if(null==e.next)return 1;return null}(0,n[1],n[2],n[3]);if(null==r)return;var l=i.offset();if(r<0){var s=(new B).retain(l).insert("\n");this.quill.updateContents(s,Tt.sources.USER),this.quill.setSelection(t.index+1,t.length,Tt.sources.SILENT)}else if(r>0){l+=i.length();var a=(new B).retain(l).insert("\n");this.quill.updateContents(a,Tt.sources.USER),this.quill.setSelection(l,Tt.sources.USER)}}}},"table tab":{key:"Tab",shiftKey:null,format:["table"],handler:function(t,e){var n=e.event,i=e.line,r=i.offset(this.quill.scroll);n.shiftKey?this.quill.setSelection(r-1,Tt.sources.USER):this.quill.setSelection(r+i.length(),Tt.sources.USER)}},"list autofill":{key:" ",shiftKey:null,collapsed:!0,format:{"code-block":!1,blockquote:!1,table:!1},prefix:/^\s*?(\d+\.|-|\*|\[ ?\]|\[x\])$/,handler:function(t,e){if(null==this.quill.scroll.query("list"))return!0;var n,i=e.prefix.length,r=o(this.quill.getLine(t.index),2),l=r[0],s=r[1];if(s>i)return!0;switch(e.prefix.trim()){case"[]":case"[ ]":n="unchecked";break;case"[x]":n="checked";break;case"-":case"*":n="bullet";break;default:n="ordered"}this.quill.insertText(t.index," ",Tt.sources.USER),this.quill.history.cutoff();var a=(new B).retain(t.index-s).delete(i+1).retain(l.length()-2-s).retain(1,{list:n});return this.quill.updateContents(a,Tt.sources.USER),this.quill.history.cutoff(),this.quill.setSelection(t.index-i,Tt.sources.SILENT),!1}},"code exit":{key:"Enter",collapsed:!0,format:["code-block"],prefix:/^$/,suffix:/^\s*$/,handler:function(t){for(var e=o(this.quill.getLine(t.index),2),n=e[0],i=e[1],r=2,l=n;null!=l&&l.length()<=1&&l.formats()["code-block"];)if(l=l.prev,(r-=1)<=0){var s=(new B).retain(t.index+n.length()-i-2).retain(1,{"code-block":null}).delete(1);return this.quill.updateContents(s,Tt.sources.USER),this.quill.setSelection(t.index-1,Tt.sources.SILENT),!1}return!0}},"embed left":pe("ArrowLeft",!1),"embed left shift":pe("ArrowLeft",!0),"embed right":pe("ArrowRight",!1),"embed right shift":pe("ArrowRight",!0),"table down":me(!1),"table up":me(!0)}};function ve(t){return{key:"Tab",shiftKey:!t,format:{"code-block":!0},handler:function(e,n){var i=n.event,r=this.quill.scroll.query("code-block").TAB;if(0===e.length&&!i.shiftKey)return this.quill.insertText(e.index,r,Tt.sources.USER),void this.quill.setSelection(e.index+r.length,Tt.sources.SILENT);var l=0===e.length?this.quill.getLines(e.index,1):this.quill.getLines(e),o=e.index,s=e.length;l.forEach((function(e,n){t?(e.insertAt(0,r),0===n?o+=r.length:s+=r.length):e.domNode.textContent.startsWith(r)&&(e.deleteAt(0,r.length),0===n?o-=r.length:s-=r.length)})),this.quill.update(Tt.sources.USER),this.quill.setSelection(o,s,Tt.sources.SILENT)}}}function pe(t,e){return v(v({key:t,shiftKey:e,altKey:null},"ArrowLeft"===t?"prefix":"suffix",/^$/),"handler",(function(n){var i=n.index;return"ArrowRight"===t&&(i+=n.length+1),!(o(this.quill.getLeaf(i),1)[0]instanceof g)||("ArrowLeft"===t?e?this.quill.setSelection(n.index-1,n.length+1,Tt.sources.USER):this.quill.setSelection(n.index-1,Tt.sources.USER):e?this.quill.setSelection(n.index,n.length+1,Tt.sources.USER):this.quill.setSelection(n.index+n.length+1,Tt.sources.USER),!1)}))}function ge(t){return{key:t[0],shortKey:!0,handler:function(e,n){this.quill.format(t,!n.format[t],Tt.sources.USER)}}}function me(t){return{key:t?"ArrowUp":"ArrowDown",collapsed:!0,format:["table"],handler:function(e,n){var i=t?"prev":"next",r=n.line,l=r.parent[i];if(null!=l){if("table-row"===l.statics.blotName){for(var o=l.children.head,s=r;null!=s.prev;)s=s.prev,o=o.next;var a=o.offset(this.quill.scroll)+Math.min(n.offset,o.length()-1);this.quill.setSelection(a,0,Tt.sources.USER)}}else{var u=r.table()[i];null!=u&&(t?this.quill.setSelection(u.offset(this.quill.scroll)+u.length()-1,0,Tt.sources.USER):this.quill.setSelection(u.offset(this.quill.scroll),0,Tt.sources.USER))}return!1}}}function ye(t){var e=t.quill,n=t.range,i=e.getLines(n),r={};if(i.length>1){var l=i[0].formats(),o=i[i.length-1].formats();r=U.AttributeMap.diff(o,l)||{}}e.deleteText(n,Tt.sources.USER),Object.keys(r).length>0&&e.formatLine(n.index,1,r,Tt.sources.USER),e.setSelection(n.index,Tt.sources.SILENT)}fe.DEFAULTS=de;var be=/font-weight:\s*normal/,ke=["P","OL","UL"],qe=function(t){return t&&ke.includes(t.tagName)};var xe=/\bmso-list:[^;]*ignore/i,Ee=/\bmso-list:[^;]*\bl(\d+)/i,Ne=/\bmso-list:[^;]*\blevel(\d+)/i,we=function(t){var e=Array.from(t.querySelectorAll("[style*=mso-list]")),n=[],i=[];e.forEach((function(t){(t.getAttribute("style")||"").match(xe)?n.push(t):i.push(t)})),n.forEach((function(t){var e;return null===(e=t.parentNode)||void 0===e?void 0:e.removeChild(t)}));for(var r=t.documentElement.innerHTML,l=i.map((function(t){return function(t,e){var n=t.getAttribute("style"),i=null==n?void 0:n.match(Ee);if(!i)return null;var r=Number(i[1]),l=null==n?void 0:n.match(Ne),o=l?Number(l[1]):1,s=new RegExp("@list l".concat(r,":level").concat(o,"\\s*\\{[^\\}]*mso-level-number-format:\\s*([\\w-]+)"),"i"),a=e.match(s);return{id:r,indent:o,type:a&&"bullet"===a[1]?"bullet":"ordered",element:t}}(t,r)})).filter((function(t){return t})),o=function(){for(var t,e=[],n=l.shift();n;){var i;e.push(n),n=l.length&&(null===(i=l[0])||void 0===i?void 0:i.element)===n.element.nextElementSibling&&l[0].id===n.id?l.shift():null}var r=document.createElement("ul");e.forEach((function(t){var e=document.createElement("li");e.setAttribute("data-list",t.type),t.indent>1&&e.setAttribute("class","ql-indent-".concat(t.indent-1)),e.innerHTML=t.element.innerHTML,r.appendChild(e)}));var o=null===(t=e[0])||void 0===t?void 0:t.element,s=(null!=o?o:{}).parentNode;o&&(null==s||s.replaceChild(r,o)),e.slice(1).forEach((function(t){var e=t.element;null==s||s.removeChild(e)}))};l.length;)o()};var Ae=[function(t){"urn:schemas-microsoft-com:office:word"===t.documentElement.getAttribute("xmlns:w")&&we(t)},function(t){t.querySelector('[id^="docs-internal-guid-"]')&&(function(t){Array.from(t.querySelectorAll('b[style*="font-weight"]')).filter((function(t){var e;return null===(e=t.getAttribute("style"))||void 0===e?void 0:e.match(be)})).forEach((function(e){var n,i=t.createDocumentFragment();i.append.apply(i,r(e.childNodes)),null===(n=e.parentNode)||void 0===n||n.replaceChild(i,e)}))}(t),function(t){Array.from(t.querySelectorAll("br")).filter((function(t){return qe(t.previousElementSibling)&&qe(t.nextElementSibling)})).forEach((function(t){var e;null===(e=t.parentNode)||void 0===e||e.removeChild(t)}))}(t))}],Se=it("quill:clipboard"),Le=[[Node.TEXT_NODE,function(t,e,n){var i,r=t.data;if("O:P"===(null===(i=t.parentElement)||void 0===i?void 0:i.tagName))return e.insert(r.trim());if(!Be(t)){if(0===r.trim().length&&r.includes("\n")&&!function(t,e){return t.previousElementSibling&&t.nextElementSibling&&!Me(t.previousElementSibling,e)&&!Me(t.nextElementSibling,e)}(t,n))return e;var l=function(t,e){var n=e.replace(/[^\u00a0]/g,"");return n.length<1&&t?" ":n};r=(r=r.replace(/\r\n/g," ").replace(/\n/g," ")).replace(/\s\s+/g,l.bind(l,!0)),(null==t.previousSibling&&null!=t.parentElement&&Me(t.parentElement,n)||t.previousSibling instanceof Element&&Me(t.previousSibling,n))&&(r=r.replace(/^\s+/,l.bind(l,!1))),(null==t.nextSibling&&null!=t.parentElement&&Me(t.parentElement,n)||t.nextSibling instanceof Element&&Me(t.nextSibling,n))&&(r=r.replace(/\s+$/,l.bind(l,!1)))}return e.insert(r)}],[Node.TEXT_NODE,Pe],["br",function(t,e){Ie(e,"\n")||e.insert("\n");return e}],[Node.ELEMENT_NODE,Pe],[Node.ELEMENT_NODE,function(t,e,n){var i=n.query(t);if(null==i)return e;if(i.prototype instanceof g){var r={},l=i.value(t);if(null!=l)return r[i.blotName]=l,(new B).insert(r,i.formats(t,n))}else if(i.prototype instanceof w&&!Ie(e,"\n")&&e.insert("\n"),"blotName"in i&&"formats"in i&&"function"==typeof i.formats)return Re(e,i.blotName,i.formats(t,n),n);return e}],[Node.ELEMENT_NODE,function(t,e,n){var i=I.keys(t),r=M.keys(t),l=D.keys(t),s={};return i.concat(r).concat(l).forEach((function(e){var i=n.query(e,N.ATTRIBUTE);null!=i&&(s[i.attrName]=i.value(t),s[i.attrName])||(null==(i=Te[e])||i.attrName!==e&&i.keyName!==e||(s[i.attrName]=i.value(t)||void 0),null==(i=Oe[e])||i.attrName!==e&&i.keyName!==e||(i=Oe[e],s[i.attrName]=i.value(t)||void 0))})),Object.entries(s).reduce((function(t,e){var i=o(e,2);return Re(t,i[0],i[1],n)}),e)}],[Node.ELEMENT_NODE,function(t,e,n){var i,r={},l=t.style||{};"italic"===l.fontStyle&&(r.italic=!0);"underline"===l.textDecoration&&(r.underline=!0);"line-through"===l.textDecoration&&(r.strike=!0);(null!==(i=l.fontWeight)&&void 0!==i&&i.startsWith("bold")||parseInt(l.fontWeight,10)>=700)&&(r.bold=!0);if(e=Object.entries(r).reduce((function(t,e){var i=o(e,2);return Re(t,i[0],i[1],n)}),e),parseFloat(l.textIndent||0)>0)return(new B).insert("\t").concat(e);return e}],["li",function(t,e,n){var i=n.query(t);if(null==i||"list"!==i.blotName||!Ie(e,"\n"))return e;var r=-1,l=t.parentNode;for(;null!=l;)["OL","UL"].includes(l.tagName)&&(r+=1),l=l.parentNode;return r<=0?e:e.reduce((function(t,e){return e.insert?e.attributes&&"number"==typeof e.attributes.indent?t.push(e):t.insert(e.insert,f({indent:r},e.attributes||{})):t}),new B)}],["ol, ul",function(t,e,n){var i=t,r="OL"===i.tagName?"ordered":"bullet",l=i.getAttribute("data-checked");l&&(r="true"===l?"checked":"unchecked");return Re(e,"list",r,n)}],["pre",function(t,e,n){var i=n.query("code-block"),r=!i||!("formats"in i)||"function"!=typeof i.formats||i.formats(t,n);return Re(e,"code-block",r,n)}],["tr",function(t,e,n){var i,r,l="TABLE"===(null===(i=t.parentElement)||void 0===i?void 0:i.tagName)?t.parentElement:null===(r=t.parentElement)||void 0===r?void 0:r.parentElement;if(null!=l){return Re(e,"table",Array.from(l.querySelectorAll("tr")).indexOf(t)+1,n)}return e}],["b",_e("bold")],["i",_e("italic")],["strike",_e("strike")],["style",function(){return new B}]],Te=[zt,ee].reduce((function(t,e){return t[e.keyName]=e,t}),{}),Oe=[Vt,Xt,Wt,ie,se,ue].reduce((function(t,e){return t[e.keyName]=e,t}),{}),Ce=function(t){function e(t,n){var i,r;return p(this,e),(r=b(this,e,[t,n])).quill.root.addEventListener("copy",(function(t){return r.onCaptureCopy(t,!1)})),r.quill.root.addEventListener("cut",(function(t){return r.onCaptureCopy(t,!0)})),r.quill.root.addEventListener("paste",r.onCapturePaste.bind(r)),r.matchers=[],Le.concat(null!==(i=r.options.matchers)&&void 0!==i?i:[]).forEach((function(t){var e=o(t,2),n=e[0],i=e[1];r.addMatcher(n,i)})),r}return E(e,t),m(e,[{key:"addMatcher",value:function(t,e){this.matchers.push([t,e])}},{key:"convert",value:function(t){var e=t.html,n=t.text,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(i[Yt.blotName])return(new B).insert(n||"",v({},Yt.blotName,i[Yt.blotName]));if(!e)return(new B).insert(n||"",i);var r=this.convertHTML(e);return Ie(r,"\n")&&(null==r.ops[r.ops.length-1].attributes||i.table)?r.compose((new B).retain(r.length()-1).delete(1)):r}},{key:"normalizeHTML",value:function(t){!function(t){t.documentElement&&Ae.forEach((function(e){e(t)}))}(t)}},{key:"convertHTML",value:function(t){var e=(new DOMParser).parseFromString(t,"text/html");this.normalizeHTML(e);var n=e.body,i=new WeakMap,r=o(this.prepareMatching(n,i),2),l=r[0],s=r[1];return Ue(this.quill.scroll,n,l,s,i)}},{key:"dangerouslyPasteHTML",value:function(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Tt.sources.API;if("string"==typeof t){var i=this.convert({html:t,text:""});this.quill.setContents(i,e),this.quill.setSelection(0,Tt.sources.SILENT)}else{var r=this.convert({html:e,text:""});this.quill.updateContents((new B).retain(t).concat(r),n),this.quill.setSelection(t+r.length(),Tt.sources.SILENT)}}},{key:"onCaptureCopy",value:function(t){var e,n,i=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t.defaultPrevented){t.preventDefault();var r=o(this.quill.selection.getRange(),1)[0];if(null!=r){var l=this.onCopy(r,i),s=l.html,a=l.text;null===(e=t.clipboardData)||void 0===e||e.setData("text/plain",a),null===(n=t.clipboardData)||void 0===n||n.setData("text/html",s),i&&ye({range:r,quill:this.quill})}}}},{key:"normalizeURIList",value:function(t){return t.split(/\r?\n/).filter((function(t){return"#"!==t[0]})).join("\n")}},{key:"onCapturePaste",value:function(t){var e,n,i;if(!t.defaultPrevented&&this.quill.isEnabled()){t.preventDefault();var r=this.quill.getSelection(!0);if(null!=r){var l=null===(e=t.clipboardData)||void 0===e?void 0:e.getData("text/html"),o=null===(n=t.clipboardData)||void 0===n?void 0:n.getData("text/plain");if(!l&&!o){var s,a=null===(s=t.clipboardData)||void 0===s?void 0:s.getData("text/uri-list");a&&(o=this.normalizeURIList(a))}var u=Array.from((null===(i=t.clipboardData)||void 0===i?void 0:i.files)||[]);if(!l&&u.length>0)this.quill.uploader.upload(r,u);else{if(l&&u.length>0){var c,h=(new DOMParser).parseFromString(l,"text/html");if(1===h.body.childElementCount&&"IMG"===(null===(c=h.body.firstElementChild)||void 0===c?void 0:c.tagName))return void this.quill.uploader.upload(r,u)}this.onPaste(r,{html:l,text:o})}}}}},{key:"onCopy",value:function(t){var e=this.quill.getText(t);return{html:this.quill.getSemanticHTML(t),text:e}}},{key:"onPaste",value:function(t,e){var n=e.text,i=e.html,r=this.quill.getFormat(t.index),l=this.convert({text:n,html:i},r);Se.log("onPaste",l,{text:n,html:i});var o=(new B).retain(t.index).delete(t.length).concat(l);this.quill.updateContents(o,Tt.sources.USER),this.quill.setSelection(o.length()-t.length,Tt.sources.SILENT),this.quill.scrollSelectionIntoView()}},{key:"prepareMatching",value:function(t,e){var n=[],i=[];return this.matchers.forEach((function(r){var l=o(r,2),s=l[0],a=l[1];switch(s){case Node.TEXT_NODE:i.push(a);break;case Node.ELEMENT_NODE:n.push(a);break;default:Array.from(t.querySelectorAll(s)).forEach((function(t){if(e.has(t)){var n=e.get(t);null==n||n.push(a)}else e.set(t,[a])}))}})),[n,i]}}])}(yt);function Re(t,e,n,i){return i.query(e)?t.reduce((function(t,i){if(!i.insert)return t;if(i.attributes&&i.attributes[e])return t.push(i);var r=n?v({},e,n):{};return t.insert(i.insert,f(f({},r),i.attributes))}),new B):t}function Ie(t,e){for(var n="",i=t.ops.length-1;i>=0&&n.length<e.length;--i){var r=t.ops[i];if("string"!=typeof r.insert)break;n=r.insert+n}return n.slice(-1*e.length)===e}function Me(t,e){if(!(t instanceof Element))return!1;var n=e.query(t);return!(n&&n.prototype instanceof g)&&["address","article","blockquote","canvas","dd","div","dl","dt","fieldset","figcaption","figure","footer","form","h1","h2","h3","h4","h5","h6","header","iframe","li","main","nav","ol","output","p","pre","section","table","td","tr","ul","video"].includes(t.tagName.toLowerCase())}v(Ce,"DEFAULTS",{matchers:[]});var De=new WeakMap;function Be(t){return null!=t&&(De.has(t)||("PRE"===t.tagName?De.set(t,!0):De.set(t,Be(t.parentNode))),De.get(t))}function Ue(t,e,n,i,r){return e.nodeType===e.TEXT_NODE?i.reduce((function(n,i){return i(e,n,t)}),new B):e.nodeType===e.ELEMENT_NODE?Array.from(e.childNodes||[]).reduce((function(l,o){var s=Ue(t,o,n,i,r);return o.nodeType===e.ELEMENT_NODE&&(s=n.reduce((function(e,n){return n(o,e,t)}),s),s=(r.get(o)||[]).reduce((function(e,n){return n(o,e,t)}),s)),l.concat(s)}),new B):new B}function _e(t){return function(e,n,i){return Re(n,t,!0,i)}}function Pe(t,e,n){if(!Ie(e,"\n")){if(Me(t,n)&&(t.childNodes.length>0||t instanceof HTMLParagraphElement))return e.insert("\n");if(e.length()>0&&t.nextSibling)for(var i=t.nextSibling;null!=i;){if(Me(i,n))return e.insert("\n");var r=n.query(i);if(r&&r.prototype instanceof G)return e.insert("\n");i=i.firstChild}}return e}var je=function(t){function e(t,n){var i;return p(this,e),v(i=b(this,e,[t,n]),"lastRecorded",0),v(i,"ignoreChange",!1),v(i,"stack",{undo:[],redo:[]}),v(i,"currentRange",null),i.quill.on(Tt.events.EDITOR_CHANGE,(function(t,e,n,r){t===Tt.events.SELECTION_CHANGE?e&&r!==Tt.sources.SILENT&&(i.currentRange=e):t===Tt.events.TEXT_CHANGE&&(i.ignoreChange||(i.options.userOnly&&r!==Tt.sources.USER?i.transform(e):i.record(e,n)),i.currentRange=Fe(i.currentRange,e))})),i.quill.keyboard.addBinding({key:"z",shortKey:!0},i.undo.bind(i)),i.quill.keyboard.addBinding({key:["z","Z"],shortKey:!0,shiftKey:!0},i.redo.bind(i)),/Win/i.test(navigator.platform)&&i.quill.keyboard.addBinding({key:"y",shortKey:!0},i.redo.bind(i)),i.quill.root.addEventListener("beforeinput",(function(t){"historyUndo"===t.inputType?(i.undo(),t.preventDefault()):"historyRedo"===t.inputType&&(i.redo(),t.preventDefault())})),i}return E(e,t),m(e,[{key:"change",value:function(t,e){if(0!==this.stack[t].length){var n=this.stack[t].pop();if(n){var i=this.quill.getContents(),r=n.delta.invert(i);this.stack[e].push({delta:r,range:Fe(n.range,r)}),this.lastRecorded=0,this.ignoreChange=!0,this.quill.updateContents(n.delta,Tt.sources.USER),this.ignoreChange=!1,this.restoreSelection(n)}}}},{key:"clear",value:function(){this.stack={undo:[],redo:[]}}},{key:"cutoff",value:function(){this.lastRecorded=0}},{key:"record",value:function(t,e){if(0!==t.ops.length){this.stack.redo=[];var n=t.invert(e),i=this.currentRange,r=Date.now();if(this.lastRecorded+this.options.delay>r&&this.stack.undo.length>0){var l=this.stack.undo.pop();l&&(n=n.compose(l.delta),i=l.range)}else this.lastRecorded=r;0!==n.length()&&(this.stack.undo.push({delta:n,range:i}),this.stack.undo.length>this.options.maxStack&&this.stack.undo.shift())}}},{key:"redo",value:function(){this.change("redo","undo")}},{key:"transform",value:function(t){He(this.stack.undo,t),He(this.stack.redo,t)}},{key:"undo",value:function(){this.change("undo","redo")}},{key:"restoreSelection",value:function(t){if(t.range)this.quill.setSelection(t.range,Tt.sources.USER);else{var e=function(t,e){var n=e.reduce((function(t,e){return t+(e.delete||0)}),0),i=e.length()-n;(function(t,e){var n=e.ops[e.ops.length-1];if(null==n)return!1;if(null!=n.insert)return"string"==typeof n.insert&&n.insert.endsWith("\n");if(null!=n.attributes)return Object.keys(n.attributes).some((function(e){return null!=t.query(e,N.BLOCK)}));return!1})(t,e)&&(i-=1);return i}(this.quill.scroll,t.delta);this.quill.setSelection(e,Tt.sources.USER)}}}])}(yt);function He(t,e){for(var n=e,i=t.length-1;i>=0;i-=1){var r=t[i];t[i]={delta:n.transform(r.delta,!0),range:r.range&&Fe(r.range,n)},n=r.delta.transform(n),0===t[i].delta.length()&&t.splice(i,1)}}function Fe(t,e){if(!t)return t;var n=e.transformPosition(t.index);return{index:n,length:e.transformPosition(t.index+t.length)-n}}v(je,"DEFAULTS",{delay:1e3,maxStack:100,userOnly:!1});var ze=function(t){function e(t,n){var i;return p(this,e),i=b(this,e,[t,n]),t.root.addEventListener("drop",(function(e){e.preventDefault();var n=null;if(document.caretRangeFromPoint)n=document.caretRangeFromPoint(e.clientX,e.clientY);else if(document.caretPositionFromPoint){var r=document.caretPositionFromPoint(e.clientX,e.clientY);(n=document.createRange()).setStart(r.offsetNode,r.offset),n.setEnd(r.offsetNode,r.offset)}var l=n&&t.selection.normalizeNative(n);if(l){var o,s=t.selection.normalizedToRange(l);null!==(o=e.dataTransfer)&&void 0!==o&&o.files&&i.upload(s,e.dataTransfer.files)}})),i}return E(e,t),m(e,[{key:"upload",value:function(t,e){var n=this,i=[];Array.from(e).forEach((function(t){var e;t&&null!==(e=n.options.mimetypes)&&void 0!==e&&e.includes(t.type)&&i.push(t)})),i.length>0&&this.options.handler.call(this,t,i)}}])}(yt);ze.DEFAULTS={mimetypes:["image/png","image/jpeg"],handler:function(t,e){var n=this,i=e.map((function(t){return new Promise((function(e){var n=new FileReader;n.onload=function(t){e(t.target.result)},n.readAsDataURL(t)}))}));Promise.all(i).then((function(e){var i=e.reduce((function(t,e){return t.insert({image:e})}),(new B).retain(t.index).delete(t.length));n.quill.updateContents(i,lt.sources.USER),n.quill.setSelection(t.index+e.length,lt.sources.SILENT)}))}};var Ke=["insertText","insertReplacementText"],Ve=function(t){function e(t,n){var i;return p(this,e),i=b(this,e,[t,n]),t.root.addEventListener("beforeinput",(function(t){i.handleBeforeInput(t)})),/Android/i.test(navigator.userAgent)||t.on(Tt.events.COMPOSITION_BEFORE_START,(function(){i.handleCompositionStart()})),i}return E(e,t),m(e,[{key:"deleteRange",value:function(t){ye({range:t,quill:this.quill})}},{key:"replaceText",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(0===t.length)return!1;if(e){var n=this.quill.getFormat(t.index,1);this.deleteRange(t),this.quill.updateContents((new B).retain(t.index).insert(e,n),Tt.sources.USER)}else this.deleteRange(t);return this.quill.setSelection(t.index+e.length,0,Tt.sources.SILENT),!0}},{key:"handleBeforeInput",value:function(t){if(!this.quill.composition.isComposing&&!t.defaultPrevented&&Ke.includes(t.inputType)){var e=t.getTargetRanges?t.getTargetRanges()[0]:null;if(e&&!0!==e.collapsed){var n=function(t){var e;if("string"==typeof t.data)return t.data;if(null!==(e=t.dataTransfer)&&void 0!==e&&e.types.includes("text/plain"))return t.dataTransfer.getData("text/plain");return null}(t);if(null!=n){var i=this.quill.selection.normalizeNative(e),r=i?this.quill.selection.normalizedToRange(i):null;r&&this.replaceText(r,n)&&t.preventDefault()}}}}},{key:"handleCompositionStart",value:function(){var t=this.quill.getSelection();t&&this.replaceText(t)}}])}(yt);var Ze=/Mac/i.test(navigator.platform),Ge=function(t){function e(t,n){var i;return p(this,e),v(i=b(this,e,[t,n]),"isListening",!1),v(i,"selectionChangeDeadline",0),i.handleArrowKeys(),i.handleNavigationShortcuts(),i}return E(e,t),m(e,[{key:"handleArrowKeys",value:function(){this.quill.keyboard.addBinding({key:["ArrowLeft","ArrowRight"],offset:0,shiftKey:null,handler:function(t,e){var n=e.line,i=e.event;if(!(n instanceof L&&n.uiNode))return!0;var r="rtl"===getComputedStyle(n.domNode).direction;return!!(r&&"ArrowRight"!==i.key||!r&&"ArrowLeft"!==i.key)||(this.quill.setSelection(t.index-1,t.length+(i.shiftKey?1:0),Tt.sources.USER),!1)}})}},{key:"handleNavigationShortcuts",value:function(){var t=this;this.quill.root.addEventListener("keydown",(function(e){!e.defaultPrevented&&function(t){return"ArrowLeft"===t.key||"ArrowRight"===t.key||"ArrowUp"===t.key||"ArrowDown"===t.key||"Home"===t.key||!(!Ze||"a"!==t.key||!0!==t.ctrlKey)}(e)&&t.ensureListeningToSelectionChange()}))}},{key:"ensureListeningToSelectionChange",value:function(){var t=this;if(this.selectionChangeDeadline=Date.now()+100,!this.isListening){this.isListening=!0;document.addEventListener("selectionchange",(function(){t.isListening=!1,Date.now()<=t.selectionChangeDeadline&&t.handleSelectionChange()}),{once:!0})}}},{key:"handleSelectionChange",value:function(){var t=document.getSelection();if(t){var e=t.getRangeAt(0);if(!0===e.collapsed&&0===e.startOffset){var n=this.quill.scroll.find(e.startContainer);if(n instanceof L&&n.uiNode){var i=document.createRange();i.setStartAfter(n.uiNode),i.setEndAfter(n.uiNode),t.removeAllRanges(),t.addRange(i)}}}}}])}(yt);Tt.register({"blots/block":Z,"blots/block/embed":G,"blots/break":F,"blots/container":Ut,"blots/cursor":X,"blots/embed":kt,"blots/inline":V,"blots/scroll":jt,"blots/text":z,"modules/clipboard":Ce,"modules/history":je,"modules/keyboard":fe,"modules/uploader":ze,"modules/input":Ve,"modules/uiNode":Ge});var We=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"add",value:function(t,n){var i=0;if("+1"===n||"-1"===n){var r=this.value(t)||0;i="+1"===n?r+1:r-1}else"number"==typeof n&&(i=n);return 0===i?(this.remove(t),!0):d(x(e.prototype),"add",this).call(this,t,i.toString())}},{key:"canAdd",value:function(t,n){return d(x(e.prototype),"canAdd",this).call(this,t,n)||d(x(e.prototype),"canAdd",this).call(this,t,parseInt(n,10))}},{key:"value",value:function(t){return parseInt(d(x(e.prototype),"value",this).call(this,t),10)||void 0}}])}(M),$e=new We("indent","ql-indent",{scope:N.BLOCK,whitelist:[1,2,3,4,5,6,7,8]}),Xe=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(Z);v(Xe,"blotName","blockquote"),v(Xe,"tagName","blockquote");var Qe=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,null,[{key:"formats",value:function(t){return this.tagName.indexOf(t.tagName)+1}}])}(Z);v(Qe,"blotName","header"),v(Qe,"tagName",["H1","H2","H3","H4","H5","H6"]);var Ye=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(Ut);Ye.blotName="list-container",Ye.tagName="OL";var Je=function(t){function e(t,n){var i;p(this,e),i=b(this,e,[t,n]);var r=n.ownerDocument.createElement("span"),l=function(e){if(t.isEnabled()){var r=i.statics.formats(n,t);"checked"===r?(i.format("list","unchecked"),e.preventDefault()):"unchecked"===r&&(i.format("list","checked"),e.preventDefault())}};return r.addEventListener("mousedown",l),r.addEventListener("touchstart",l),i.attachUI(r),i}return E(e,t),m(e,[{key:"format",value:function(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-list",n):d(x(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=d(x(e),"create",this).call(this);return n.setAttribute("data-list",t),n}},{key:"formats",value:function(t){return t.getAttribute("data-list")||void 0}},{key:"register",value:function(){Tt.register(Ye)}}])}(Z);Je.blotName="list",Je.tagName="LI",Ye.allowedChildren=[Je],Je.requiredContainer=Ye;var tn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"optimize",value:function(t){d(x(e.prototype),"optimize",this).call(this,t),this.domNode.tagName!==this.statics.tagName[0]&&this.replaceWith(this.statics.blotName)}}],[{key:"create",value:function(){return d(x(e),"create",this).call(this)}},{key:"formats",value:function(){return!0}}])}(V);v(tn,"blotName","bold"),v(tn,"tagName",["STRONG","B"]);var en=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(tn);v(en,"blotName","italic"),v(en,"tagName",["EM","I"]);var nn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"format",value:function(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("href",this.constructor.sanitize(n)):d(x(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=d(x(e),"create",this).call(this,t);return n.setAttribute("href",this.sanitize(t)),n.setAttribute("rel","noopener noreferrer"),n.setAttribute("target","_blank"),n}},{key:"formats",value:function(t){return t.getAttribute("href")}},{key:"sanitize",value:function(t){return rn(t,this.PROTOCOL_WHITELIST)?t:this.SANITIZED_URL}}])}(V);function rn(t,e){var n=document.createElement("a");n.href=t;var i=n.href.slice(0,n.href.indexOf(":"));return e.indexOf(i)>-1}v(nn,"blotName","link"),v(nn,"tagName","A"),v(nn,"SANITIZED_URL","about:blank"),v(nn,"PROTOCOL_WHITELIST",["http","https","mailto","tel","sms"]);var ln=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,null,[{key:"create",value:function(t){return"super"===t?document.createElement("sup"):"sub"===t?document.createElement("sub"):d(x(e),"create",this).call(this,t)}},{key:"formats",value:function(t){return"SUB"===t.tagName?"sub":"SUP"===t.tagName?"super":void 0}}])}(V);v(ln,"blotName","script"),v(ln,"tagName",["SUB","SUP"]);var on=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(tn);v(on,"blotName","strike"),v(on,"tagName",["S","STRIKE"]);var sn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(V);v(sn,"blotName","underline"),v(sn,"tagName","U");var an=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"html",value:function(){var t=this.value().formula;return"<span>".concat(t,"</span>")}}],[{key:"create",value:function(t){if(null==window.katex)throw new Error("Formula module requires KaTeX.");var n=d(x(e),"create",this).call(this,t);return"string"==typeof t&&(window.katex.render(t,n,{throwOnError:!1,errorColor:"#f00"}),n.setAttribute("data-value",t)),n}},{key:"value",value:function(t){return t.getAttribute("data-value")}}])}(kt);v(an,"blotName","formula"),v(an,"className","ql-formula"),v(an,"tagName","SPAN");var un=["alt","height","width"],cn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"format",value:function(t,n){un.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):d(x(e.prototype),"format",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=d(x(e),"create",this).call(this,t);return"string"==typeof t&&n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return un.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"match",value:function(t){return/\.(jpe?g|gif|png)$/.test(t)||/^data:image\/.+;base64/.test(t)}},{key:"sanitize",value:function(t){return rn(t,["http","https","data"])?t:"//:0"}},{key:"value",value:function(t){return t.getAttribute("src")}}])}(g);v(cn,"blotName","image"),v(cn,"tagName","IMG");var hn=["height","width"],fn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"format",value:function(t,n){hn.indexOf(t)>-1?n?this.domNode.setAttribute(t,n):this.domNode.removeAttribute(t):d(x(e.prototype),"format",this).call(this,t,n)}},{key:"html",value:function(){var t=this.value().video;return'<a href="'.concat(t,'">').concat(t,"</a>")}}],[{key:"create",value:function(t){var n=d(x(e),"create",this).call(this,t);return n.setAttribute("frameborder","0"),n.setAttribute("allowfullscreen","true"),n.setAttribute("src",this.sanitize(t)),n}},{key:"formats",value:function(t){return hn.reduce((function(e,n){return t.hasAttribute(n)&&(e[n]=t.getAttribute(n)),e}),{})}},{key:"sanitize",value:function(t){return nn.sanitize(t)}},{key:"value",value:function(t){return t.getAttribute("src")}}])}(G);v(fn,"blotName","video"),v(fn,"className","ql-video"),v(fn,"tagName","IFRAME");var dn=new M("code-token","hljs",{scope:N.INLINE}),vn=function(t){function e(t,n,i){var r;return p(this,e),r=b(this,e,[t,n,i]),dn.add(r.domNode,i),r}return E(e,t),m(e,[{key:"format",value:function(t,n){t!==e.blotName?d(x(e.prototype),"format",this).call(this,t,n):n?dn.add(this.domNode,n):(dn.remove(this.domNode),this.domNode.classList.remove(this.statics.className))}},{key:"optimize",value:function(){d(x(e.prototype),"optimize",this).apply(this,arguments),dn.value(this.domNode)||this.unwrap()}}],[{key:"formats",value:function(t,n){for(;null!=t&&t!==n.domNode;){if(t.classList&&t.classList.contains(Yt.className))return d(x(e),"formats",this).call(this,t,n);t=t.parentNode}}}])}(V);vn.blotName="code-token",vn.className="ql-token";var pn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"format",value:function(t,n){t===this.statics.blotName&&n?this.domNode.setAttribute("data-language",n):d(x(e.prototype),"format",this).call(this,t,n)}},{key:"replaceWith",value:function(t,n){return this.formatAt(0,this.length(),vn.blotName,!1),d(x(e.prototype),"replaceWith",this).call(this,t,n)}}],[{key:"create",value:function(t){var n=d(x(e),"create",this).call(this,t);return"string"==typeof t&&n.setAttribute("data-language",t),n}},{key:"formats",value:function(t){return t.getAttribute("data-language")||"plain"}},{key:"register",value:function(){}}])}(Yt),gn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"attach",value:function(){d(x(e.prototype),"attach",this).call(this),this.forceNext=!1,this.scroll.emitMount(this)}},{key:"format",value:function(t,e){t===pn.blotName&&(this.forceNext=!0,this.children.forEach((function(n){n.format(t,e)})))}},{key:"formatAt",value:function(t,n,i,r){i===pn.blotName&&(this.forceNext=!0),d(x(e.prototype),"formatAt",this).call(this,t,n,i,r)}},{key:"highlight",value:function(t){var e=this,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null!=this.children.head){var i=Array.from(this.domNode.childNodes).filter((function(t){return t!==e.uiNode})),r="".concat(i.map((function(t){return t.textContent})).join("\n"),"\n"),l=pn.formats(this.children.head.domNode);if(n||this.forceNext||this.cachedText!==r){if(r.trim().length>0||null==this.cachedText){var o=this.children.reduce((function(t,e){return t.concat(W(e,!1))}),new B),s=t(r,l);o.diff(s).reduce((function(t,n){var i=n.retain,r=n.attributes;return i?(r&&Object.keys(r).forEach((function(n){[pn.blotName,vn.blotName].includes(n)&&e.formatAt(t,i,n,r[n])})),t+i):t}),0)}this.cachedText=r,this.forceNext=!1}}}},{key:"html",value:function(t,e){var n=o(this.children.find(t),1)[0],i=n?pn.formats(n.domNode):"plain";return'<pre data-language="'.concat(i,'">\n').concat(K(this.code(t,e)),"\n</pre>")}},{key:"optimize",value:function(t){if(d(x(e.prototype),"optimize",this).call(this,t),null!=this.parent&&null!=this.children.head&&null!=this.uiNode){var n=pn.formats(this.children.head.domNode);n!==this.uiNode.value&&(this.uiNode.value=n)}}}])}(Qt);gn.allowedChildren=[pn],pn.requiredContainer=gn,pn.allowedChildren=[vn,X,z,F];var mn=function(t){function e(t,n){var i;if(p(this,e),null==(i=b(this,e,[t,n])).options.hljs)throw new Error("Syntax module requires highlight.js. Please include the library on the page before Quill.");return i.languages=i.options.languages.reduce((function(t,e){return t[e.key]=!0,t}),{}),i.highlightBlot=i.highlightBlot.bind(i),i.initListener(),i.initTimer(),i}return E(e,t),m(e,[{key:"initListener",value:function(){var t=this;this.quill.on(Tt.events.SCROLL_BLOT_MOUNT,(function(e){if(e instanceof gn){var n=t.quill.root.ownerDocument.createElement("select");t.options.languages.forEach((function(t){var e=t.key,i=t.label,r=n.ownerDocument.createElement("option");r.textContent=i,r.setAttribute("value",e),n.appendChild(r)})),n.addEventListener("change",(function(){e.format(pn.blotName,n.value),t.quill.root.focus(),t.highlight(e,!0)})),null==e.uiNode&&(e.attachUI(n),e.children.head&&(n.value=pn.formats(e.children.head.domNode)))}}))}},{key:"initTimer",value:function(){var t=this,e=null;this.quill.on(Tt.events.SCROLL_OPTIMIZE,(function(){e&&clearTimeout(e),e=setTimeout((function(){t.highlight(),e=null}),t.options.interval)}))}},{key:"highlight",value:function(){var t=this,e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!this.quill.selection.composing){this.quill.update(Tt.sources.USER);var i=this.quill.getSelection();(null==e?this.quill.scroll.descendants(gn):[e]).forEach((function(e){e.highlight(t.highlightBlot,n)})),this.quill.update(Tt.sources.SILENT),null!=i&&this.quill.setSelection(i,Tt.sources.SILENT)}}},{key:"highlightBlot",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"plain";if("plain"===(e=this.languages[e]?e:"plain"))return K(t).split("\n").reduce((function(t,n,i){return 0!==i&&t.insert("\n",v({},Yt.blotName,e)),t.insert(n)}),new B);var n=this.quill.root.ownerDocument.createElement("div");return n.classList.add(Yt.className),n.innerHTML=function(t,e,n){if("string"==typeof t.versionString){var i=t.versionString.split(".")[0];if(parseInt(i,10)>=11)return t.highlight(n,{language:e}).value}return t.highlight(e,n).value}(this.options.hljs,e,t),Ue(this.quill.scroll,n,[function(t,e){var n=dn.value(t);return n?e.compose((new B).retain(e.length(),v({},vn.blotName,n))):e}],[function(t,n){return t.data.split("\n").reduce((function(t,n,i){return 0!==i&&t.insert("\n",v({},Yt.blotName,e)),t.insert(n)}),n)}],new WeakMap)}}],[{key:"register",value:function(){Tt.register(vn,!0),Tt.register(pn,!0),Tt.register(gn,!0)}}])}(yt);mn.DEFAULTS={hljs:window.hljs,interval:1e3,languages:[{key:"plain",label:"Plain"},{key:"bash",label:"Bash"},{key:"cpp",label:"C++"},{key:"cs",label:"C#"},{key:"css",label:"CSS"},{key:"diff",label:"Diff"},{key:"xml",label:"HTML/XML"},{key:"java",label:"Java"},{key:"javascript",label:"JavaScript"},{key:"markdown",label:"Markdown"},{key:"php",label:"PHP"},{key:"python",label:"Python"},{key:"ruby",label:"Ruby"},{key:"sql",label:"SQL"}]};var yn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"cellOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"format",value:function(t,n){t===e.blotName&&n?this.domNode.setAttribute("data-row",n):d(x(e.prototype),"format",this).call(this,t,n)}},{key:"row",value:function(){return this.parent}},{key:"rowOffset",value:function(){return this.row()?this.row().rowOffset():-1}},{key:"table",value:function(){return this.row()&&this.row().table()}}],[{key:"create",value:function(t){var n=d(x(e),"create",this).call(this);return t?n.setAttribute("data-row",t):n.setAttribute("data-row",xn()),n}},{key:"formats",value:function(t){if(t.hasAttribute("data-row"))return t.getAttribute("data-row")}}])}(Z);v(yn,"blotName","table"),v(yn,"tagName","TD");var bn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"checkMerge",value:function(){if(d(x(e.prototype),"checkMerge",this).call(this)&&null!=this.next.children.head){var t=this.children.head.formats(),n=this.children.tail.formats(),i=this.next.children.head.formats(),r=this.next.children.tail.formats();return t.table===n.table&&t.table===i.table&&t.table===r.table}return!1}},{key:"optimize",value:function(t){var n=this;d(x(e.prototype),"optimize",this).call(this,t),this.children.forEach((function(t){if(null!=t.next){var e=t.formats(),i=t.next.formats();if(e.table!==i.table){var r=n.splitAfter(t);r&&r.optimize(),n.prev&&n.prev.optimize()}}}))}},{key:"rowOffset",value:function(){return this.parent?this.parent.children.indexOf(this):-1}},{key:"table",value:function(){return this.parent&&this.parent.parent}}])}(Ut);v(bn,"blotName","table-row"),v(bn,"tagName","TR");var kn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e)}(Ut);v(kn,"blotName","table-body"),v(kn,"tagName","TBODY");var qn=function(t){function e(){return p(this,e),b(this,e,arguments)}return E(e,t),m(e,[{key:"balanceCells",value:function(){var t=this,e=this.descendants(bn),n=e.reduce((function(t,e){return Math.max(e.children.length,t)}),0);e.forEach((function(e){new Array(n-e.children.length).fill(0).forEach((function(){var n;null!=e.children.head&&(n=yn.formats(e.children.head.domNode));var i=t.scroll.create(yn.blotName,n);e.appendChild(i),i.optimize()}))}))}},{key:"cells",value:function(t){return this.rows().map((function(e){return e.children.at(t)}))}},{key:"deleteColumn",value:function(t){var e=o(this.descendant(kn),1)[0];null!=e&&null!=e.children.head&&e.children.forEach((function(e){var n=e.children.at(t);null!=n&&n.remove()}))}},{key:"insertColumn",value:function(t){var e=this,n=o(this.descendant(kn),1)[0];null!=n&&null!=n.children.head&&n.children.forEach((function(n){var i=n.children.at(t),r=yn.formats(n.children.head.domNode),l=e.scroll.create(yn.blotName,r);n.insertBefore(l,i)}))}},{key:"insertRow",value:function(t){var e=this,n=o(this.descendant(kn),1)[0];if(null!=n&&null!=n.children.head){var i=xn(),r=this.scroll.create(bn.blotName);n.children.head.children.forEach((function(){var t=e.scroll.create(yn.blotName,i);r.appendChild(t)}));var l=n.children.at(t);n.insertBefore(r,l)}}},{key:"rows",value:function(){var t=this.children.head;return null==t?[]:t.children.map((function(t){return t}))}}])}(Ut);function xn(){var t=Math.random().toString(36).slice(2,6);return"row-".concat(t)}v(qn,"blotName","table-container"),v(qn,"tagName","TABLE"),qn.allowedChildren=[kn],kn.requiredContainer=qn,kn.allowedChildren=[bn],bn.requiredContainer=kn,bn.allowedChildren=[yn],yn.requiredContainer=bn;var En=function(t){function e(){var t;return p(this,e),(t=b(this,e,arguments)).listenBalanceCells(),t}return E(e,t),m(e,[{key:"balanceTables",value:function(){this.quill.scroll.descendants(qn).forEach((function(t){t.balanceCells()}))}},{key:"deleteColumn",value:function(){var t=o(this.getTable(),3),e=t[0],n=t[2];null!=n&&(e.deleteColumn(n.cellOffset()),this.quill.update(Tt.sources.USER))}},{key:"deleteRow",value:function(){var t=o(this.getTable(),2)[1];null!=t&&(t.remove(),this.quill.update(Tt.sources.USER))}},{key:"deleteTable",value:function(){var t=o(this.getTable(),1)[0];if(null!=t){var e=t.offset();t.remove(),this.quill.update(Tt.sources.USER),this.quill.setSelection(e,Tt.sources.SILENT)}}},{key:"getTable",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.quill.getSelection();if(null==t)return[null,null,null,-1];var e=o(this.quill.getLine(t.index),2),n=e[0],i=e[1];if(null==n||n.statics.blotName!==yn.blotName)return[null,null,null,-1];var r=n.parent;return[r.parent.parent,r,n,i]}},{key:"insertColumn",value:function(t){var e=this.quill.getSelection();if(e){var n=o(this.getTable(e),3),i=n[0],r=n[1],l=n[2];if(null!=l){var s=l.cellOffset();i.insertColumn(s+t),this.quill.update(Tt.sources.USER);var a=r.rowOffset();0===t&&(a+=1),this.quill.setSelection(e.index+a,e.length,Tt.sources.SILENT)}}}},{key:"insertColumnLeft",value:function(){this.insertColumn(0)}},{key:"insertColumnRight",value:function(){this.insertColumn(1)}},{key:"insertRow",value:function(t){var e=this.quill.getSelection();if(e){var n=o(this.getTable(e),3),i=n[0],r=n[1];if(null!=n[2]){var l=r.rowOffset();i.insertRow(l+t),this.quill.update(Tt.sources.USER),t>0?this.quill.setSelection(e,Tt.sources.SILENT):this.quill.setSelection(e.index+r.children.length,e.length,Tt.sources.SILENT)}}}},{key:"insertRowAbove",value:function(){this.insertRow(0)}},{key:"insertRowBelow",value:function(){this.insertRow(1)}},{key:"insertTable",value:function(t,e){var n=this.quill.getSelection();if(null!=n){var i=new Array(t).fill(0).reduce((function(t){var n=new Array(e).fill("\n").join("");return t.insert(n,{table:xn()})}),(new B).retain(n.index));this.quill.updateContents(i,Tt.sources.USER),this.quill.setSelection(n.index,Tt.sources.SILENT),this.balanceTables()}}},{key:"listenBalanceCells",value:function(){var t=this;this.quill.on(Tt.events.SCROLL_OPTIMIZE,(function(e){e.some((function(e){return!!["TD","TR","TBODY","TABLE"].includes(e.target.tagName)&&(t.quill.once(Tt.events.TEXT_CHANGE,(function(e,n,i){i===Tt.sources.USER&&t.balanceTables()})),!0)}))}))}}],[{key:"register",value:function(){Tt.register(yn),Tt.register(bn),Tt.register(kn),Tt.register(qn)}}])}(yt),Nn=it("quill:toolbar"),wn=function(t){function e(t,n){var i;if(p(this,e),i=b(this,e,[t,n]),Array.isArray(i.options.container)){var r,l=document.createElement("div");l.setAttribute("role","toolbar"),function(t,e){Array.isArray(e[0])||(e=[e]);e.forEach((function(e){var n=document.createElement("span");n.classList.add("ql-formats"),e.forEach((function(t){if("string"==typeof t)An(n,t);else{var e=Object.keys(t)[0],i=t[e];Array.isArray(i)?function(t,e,n){var i=document.createElement("select");i.classList.add("ql-".concat(e)),n.forEach((function(t){var e=document.createElement("option");!1!==t?e.setAttribute("value",String(t)):e.setAttribute("selected","selected"),i.appendChild(e)})),t.appendChild(i)}(n,e,i):An(n,e,i)}})),t.appendChild(n)}))}(l,i.options.container),null===(r=t.container)||void 0===r||null===(r=r.parentNode)||void 0===r||r.insertBefore(l,t.container),i.container=l}else"string"==typeof i.options.container?i.container=document.querySelector(i.options.container):i.container=i.options.container;return i.container instanceof HTMLElement?(i.container.classList.add("ql-toolbar"),i.controls=[],i.handlers={},i.options.handlers&&Object.keys(i.options.handlers).forEach((function(t){var e,n=null===(e=i.options.handlers)||void 0===e?void 0:e[t];n&&i.addHandler(t,n)})),Array.from(i.container.querySelectorAll("button, select")).forEach((function(t){i.attach(t)})),i.quill.on(Tt.events.EDITOR_CHANGE,(function(){var t=o(i.quill.selection.getRange(),1)[0];i.update(t)})),i):(Nn.error("Container required for toolbar",i.options),k(i))}return E(e,t),m(e,[{key:"addHandler",value:function(t,e){this.handlers[t]=e}},{key:"attach",value:function(t){var e=this,n=Array.from(t.classList).find((function(t){return 0===t.indexOf("ql-")}));if(n)if(n=n.slice(3),"BUTTON"===t.tagName&&t.setAttribute("type","button"),null!=this.handlers[n]||null!=this.quill.scroll.query(n)){var i="SELECT"===t.tagName?"change":"click";t.addEventListener(i,(function(i){var r;if("SELECT"===t.tagName){if(t.selectedIndex<0)return;var l=t.options[t.selectedIndex];r=!l.hasAttribute("selected")&&(l.value||!1)}else r=!t.classList.contains("ql-active")&&(t.value||!t.hasAttribute("value")),i.preventDefault();e.quill.focus();var s=o(e.quill.selection.getRange(),1)[0];if(null!=e.handlers[n])e.handlers[n].call(e,r);else if(e.quill.scroll.query(n).prototype instanceof g){if(!(r=prompt("Enter ".concat(n))))return;e.quill.updateContents((new B).retain(s.index).delete(s.length).insert(v({},n,r)),Tt.sources.USER)}else e.quill.format(n,r,Tt.sources.USER);e.update(s)})),this.controls.push([n,t])}else Nn.warn("ignoring attaching to nonexistent format",n,t)}},{key:"update",value:function(t){var e=null==t?{}:this.quill.getFormat(t);this.controls.forEach((function(n){var i=o(n,2),r=i[0],l=i[1];if("SELECT"===l.tagName){var s=null;if(null==t)s=null;else if(null==e[r])s=l.querySelector("option[selected]");else if(!Array.isArray(e[r])){var a=e[r];"string"==typeof a&&(a=a.replace(/"/g,'\\"')),s=l.querySelector('option[value="'.concat(a,'"]'))}null==s?(l.value="",l.selectedIndex=-1):s.selected=!0}else if(null==t)l.classList.remove("ql-active"),l.setAttribute("aria-pressed","false");else if(l.hasAttribute("value")){var u=e[r],c=u===l.getAttribute("value")||null!=u&&u.toString()===l.getAttribute("value")||null==u&&!l.getAttribute("value");l.classList.toggle("ql-active",c),l.setAttribute("aria-pressed",c.toString())}else{var h=null!=e[r];l.classList.toggle("ql-active",h),l.setAttribute("aria-pressed",h.toString())}}))}}])}(yt);function An(t,e,n){var i=document.createElement("button");i.setAttribute("type","button"),i.classList.add("ql-".concat(e)),i.setAttribute("aria-pressed","false"),null!=n?(i.value=n,i.setAttribute("aria-label","".concat(e,": ").concat(n))):i.setAttribute("aria-label",e),t.appendChild(i)}wn.DEFAULTS={},wn.DEFAULTS={container:null,handlers:{clean:function(){var t=this,e=this.quill.getSelection();if(null!=e)if(0===e.length){var n=this.quill.getFormat();Object.keys(n).forEach((function(e){null!=t.quill.scroll.query(e,N.INLINE)&&t.quill.format(e,!1,Tt.sources.USER)}))}else this.quill.removeFormat(e,Tt.sources.USER)},direction:function(t){var e=this.quill.getFormat().align;"rtl"===t&&null==e?this.quill.format("align","right",Tt.sources.USER):t||"right"!==e||this.quill.format("align",!1,Tt.sources.USER),this.quill.format("direction",t,Tt.sources.USER)},indent:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e),i=parseInt(n.indent||0,10);if("+1"===t||"-1"===t){var r="+1"===t?1:-1;"rtl"===n.direction&&(r*=-1),this.quill.format("indent",i+r,Tt.sources.USER)}},link:function(t){!0===t&&(t=prompt("Enter link URL:")),this.quill.format("link",t,Tt.sources.USER)},list:function(t){var e=this.quill.getSelection(),n=this.quill.getFormat(e);"check"===t?"checked"===n.list||"unchecked"===n.list?this.quill.format("list",!1,Tt.sources.USER):this.quill.format("list","unchecked",Tt.sources.USER):this.quill.format("list",t,Tt.sources.USER)}}};var Sn='<svg viewbox="0 0 18 18"><polyline class="ql-even ql-stroke" points="5 7 3 9 5 11"/><polyline class="ql-even ql-stroke" points="13 7 15 9 13 11"/><line class="ql-stroke" x1="10" x2="8" y1="5" y2="13"/></svg>',Ln={align:{"":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="13" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="9" y1="4" y2="4"/></svg>',center:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="14" x2="4" y1="14" y2="14"/><line class="ql-stroke" x1="12" x2="6" y1="4" y2="4"/></svg>',right:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="5" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="9" y1="4" y2="4"/></svg>',justify:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="15" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="15" x2="3" y1="14" y2="14"/><line class="ql-stroke" x1="15" x2="3" y1="4" y2="4"/></svg>'},background:'<svg viewbox="0 0 18 18"><g class="ql-fill ql-color-label"><polygon points="6 6.868 6 6 5 6 5 7 5.942 7 6 6.868"/><rect height="1" width="1" x="4" y="4"/><polygon points="6.817 5 6 5 6 6 6.38 6 6.817 5"/><rect height="1" width="1" x="2" y="6"/><rect height="1" width="1" x="3" y="5"/><rect height="1" width="1" x="4" y="7"/><polygon points="4 11.439 4 11 3 11 3 12 3.755 12 4 11.439"/><rect height="1" width="1" x="2" y="12"/><rect height="1" width="1" x="2" y="9"/><rect height="1" width="1" x="2" y="15"/><polygon points="4.63 10 4 10 4 11 4.192 11 4.63 10"/><rect height="1" width="1" x="3" y="8"/><path d="M10.832,4.2L11,4.582V4H10.708A1.948,1.948,0,0,1,10.832,4.2Z"/><path d="M7,4.582L7.168,4.2A1.929,1.929,0,0,1,7.292,4H7V4.582Z"/><path d="M8,13H7.683l-0.351.8a1.933,1.933,0,0,1-.124.2H8V13Z"/><rect height="1" width="1" x="12" y="2"/><rect height="1" width="1" x="11" y="3"/><path d="M9,3H8V3.282A1.985,1.985,0,0,1,9,3Z"/><rect height="1" width="1" x="2" y="3"/><rect height="1" width="1" x="6" y="2"/><rect height="1" width="1" x="3" y="2"/><rect height="1" width="1" x="5" y="3"/><rect height="1" width="1" x="9" y="2"/><rect height="1" width="1" x="15" y="14"/><polygon points="13.447 10.174 13.469 10.225 13.472 10.232 13.808 11 14 11 14 10 13.37 10 13.447 10.174"/><rect height="1" width="1" x="13" y="7"/><rect height="1" width="1" x="15" y="5"/><rect height="1" width="1" x="14" y="6"/><rect height="1" width="1" x="15" y="8"/><rect height="1" width="1" x="14" y="9"/><path d="M3.775,14H3v1H4V14.314A1.97,1.97,0,0,1,3.775,14Z"/><rect height="1" width="1" x="14" y="3"/><polygon points="12 6.868 12 6 11.62 6 12 6.868"/><rect height="1" width="1" x="15" y="2"/><rect height="1" width="1" x="12" y="5"/><rect height="1" width="1" x="13" y="4"/><polygon points="12.933 9 13 9 13 8 12.495 8 12.933 9"/><rect height="1" width="1" x="9" y="14"/><rect height="1" width="1" x="8" y="15"/><path d="M6,14.926V15H7V14.316A1.993,1.993,0,0,1,6,14.926Z"/><rect height="1" width="1" x="5" y="15"/><path d="M10.668,13.8L10.317,13H10v1h0.792A1.947,1.947,0,0,1,10.668,13.8Z"/><rect height="1" width="1" x="11" y="15"/><path d="M14.332,12.2a1.99,1.99,0,0,1,.166.8H15V12H14.245Z"/><rect height="1" width="1" x="14" y="15"/><rect height="1" width="1" x="15" y="11"/></g><polyline class="ql-stroke" points="5.5 13 9 5 12.5 13"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="11" y2="11"/></svg>',blockquote:'<svg viewbox="0 0 18 18"><rect class="ql-fill ql-stroke" height="3" width="3" x="4" y="5"/><rect class="ql-fill ql-stroke" height="3" width="3" x="11" y="5"/><path class="ql-even ql-fill ql-stroke" d="M7,8c0,4.031-3,5-3,5"/><path class="ql-even ql-fill ql-stroke" d="M14,8c0,4.031-3,5-3,5"/></svg>',bold:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,4H9.5A2.5,2.5,0,0,1,12,6.5v0A2.5,2.5,0,0,1,9.5,9H5A0,0,0,0,1,5,9V4A0,0,0,0,1,5,4Z"/><path class="ql-stroke" d="M5,9h5.5A2.5,2.5,0,0,1,13,11.5v0A2.5,2.5,0,0,1,10.5,14H5a0,0,0,0,1,0,0V9A0,0,0,0,1,5,9Z"/></svg>',clean:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="5" x2="13" y1="3" y2="3"/><line class="ql-stroke" x1="6" x2="9.35" y1="12" y2="3"/><line class="ql-stroke" x1="11" x2="15" y1="11" y2="15"/><line class="ql-stroke" x1="15" x2="11" y1="11" y2="15"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="7" x="2" y="14"/></svg>',code:Sn,"code-block":Sn,color:'<svg viewbox="0 0 18 18"><line class="ql-color-label ql-stroke ql-transparent" x1="3" x2="15" y1="15" y2="15"/><polyline class="ql-stroke" points="5.5 11 9 3 12.5 11"/><line class="ql-stroke" x1="11.63" x2="6.38" y1="9" y2="9"/></svg>',direction:{"":'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="3 11 5 9 3 7 3 11"/><line class="ql-stroke ql-fill" x1="15" x2="11" y1="4" y2="4"/><path class="ql-fill" d="M11,3a3,3,0,0,0,0,6h1V3H11Z"/><rect class="ql-fill" height="11" width="1" x="11" y="4"/><rect class="ql-fill" height="11" width="1" x="13" y="4"/></svg>',rtl:'<svg viewbox="0 0 18 18"><polygon class="ql-stroke ql-fill" points="15 12 13 10 15 8 15 12"/><line class="ql-stroke ql-fill" x1="9" x2="5" y1="4" y2="4"/><path class="ql-fill" d="M5,3A3,3,0,0,0,5,9H6V3H5Z"/><rect class="ql-fill" height="11" width="1" x="5" y="4"/><rect class="ql-fill" height="11" width="1" x="7" y="4"/></svg>'},formula:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M11.759,2.482a2.561,2.561,0,0,0-3.53.607A7.656,7.656,0,0,0,6.8,6.2C6.109,9.188,5.275,14.677,4.15,14.927a1.545,1.545,0,0,0-1.3-.933A0.922,0.922,0,0,0,2,15.036S1.954,16,4.119,16s3.091-2.691,3.7-5.553c0.177-.826.36-1.726,0.554-2.6L8.775,6.2c0.381-1.421.807-2.521,1.306-2.676a1.014,1.014,0,0,0,1.02.56A0.966,0.966,0,0,0,11.759,2.482Z"/><rect class="ql-fill" height="1.6" rx="0.8" ry="0.8" width="5" x="5.15" y="6.2"/><path class="ql-fill" d="M13.663,12.027a1.662,1.662,0,0,1,.266-0.276q0.193,0.069.456,0.138a2.1,2.1,0,0,0,.535.069,1.075,1.075,0,0,0,.767-0.3,1.044,1.044,0,0,0,.314-0.8,0.84,0.84,0,0,0-.238-0.619,0.8,0.8,0,0,0-.594-0.239,1.154,1.154,0,0,0-.781.3,4.607,4.607,0,0,0-.781,1q-0.091.15-.218,0.346l-0.246.38c-0.068-.288-0.137-0.582-0.212-0.885-0.459-1.847-2.494-.984-2.941-0.8-0.482.2-.353,0.647-0.094,0.529a0.869,0.869,0,0,1,1.281.585c0.217,0.751.377,1.436,0.527,2.038a5.688,5.688,0,0,1-.362.467,2.69,2.69,0,0,1-.264.271q-0.221-.08-0.471-0.147a2.029,2.029,0,0,0-.522-0.066,1.079,1.079,0,0,0-.768.3A1.058,1.058,0,0,0,9,15.131a0.82,0.82,0,0,0,.832.852,1.134,1.134,0,0,0,.787-0.3,5.11,5.11,0,0,0,.776-0.993q0.141-.219.215-0.34c0.046-.076.122-0.194,0.223-0.346a2.786,2.786,0,0,0,.918,1.726,2.582,2.582,0,0,0,2.376-.185c0.317-.181.212-0.565,0-0.494A0.807,0.807,0,0,1,14.176,15a5.159,5.159,0,0,1-.913-2.446l0,0Q13.487,12.24,13.663,12.027Z"/></svg>',header:{1:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M10,4V14a1,1,0,0,1-2,0V10H3v4a1,1,0,0,1-2,0V4A1,1,0,0,1,3,4V8H8V4a1,1,0,0,1,2,0Zm6.06787,9.209H14.98975V7.59863a.54085.54085,0,0,0-.605-.60547h-.62744a1.01119,1.01119,0,0,0-.748.29688L11.645,8.56641a.5435.5435,0,0,0-.022.8584l.28613.30762a.53861.53861,0,0,0,.84717.0332l.09912-.08789a1.2137,1.2137,0,0,0,.2417-.35254h.02246s-.01123.30859-.01123.60547V13.209H12.041a.54085.54085,0,0,0-.605.60547v.43945a.54085.54085,0,0,0,.605.60547h4.02686a.54085.54085,0,0,0,.605-.60547v-.43945A.54085.54085,0,0,0,16.06787,13.209Z"/></svg>',2:'<svg viewBox="0 0 18 18"><path class="ql-fill" d="M16.73975,13.81445v.43945a.54085.54085,0,0,1-.605.60547H11.855a.58392.58392,0,0,1-.64893-.60547V14.0127c0-2.90527,3.39941-3.42187,3.39941-4.55469a.77675.77675,0,0,0-.84717-.78125,1.17684,1.17684,0,0,0-.83594.38477c-.2749.26367-.561.374-.85791.13184l-.4292-.34082c-.30811-.24219-.38525-.51758-.1543-.81445a2.97155,2.97155,0,0,1,2.45361-1.17676,2.45393,2.45393,0,0,1,2.68408,2.40918c0,2.45312-3.1792,2.92676-3.27832,3.93848h2.79443A.54085.54085,0,0,1,16.73975,13.81445ZM9,3A.99974.99974,0,0,0,8,4V8H3V4A1,1,0,0,0,1,4V14a1,1,0,0,0,2,0V10H8v4a1,1,0,0,0,2,0V4A.99974.99974,0,0,0,9,3Z"/></svg>'},italic:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="13" y1="4" y2="4"/><line class="ql-stroke" x1="5" x2="11" y1="14" y2="14"/><line class="ql-stroke" x1="8" x2="10" y1="14" y2="4"/></svg>',image:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="10" width="12" x="3" y="4"/><circle class="ql-fill" cx="6" cy="7" r="1"/><polyline class="ql-even ql-fill" points="5 12 5 11 7 9 8 10 11 7 13 9 13 12 5 12"/></svg>',indent:{"+1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-fill ql-stroke" points="3 7 3 11 5 9 3 7"/></svg>',"-1":'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="3" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="5 7 5 11 3 9 5 7"/></svg>'},link:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="11" y1="7" y2="11"/><path class="ql-even ql-stroke" d="M8.9,4.577a3.476,3.476,0,0,1,.36,4.679A3.476,3.476,0,0,1,4.577,8.9C3.185,7.5,2.035,6.4,4.217,4.217S7.5,3.185,8.9,4.577Z"/><path class="ql-even ql-stroke" d="M13.423,9.1a3.476,3.476,0,0,0-4.679-.36,3.476,3.476,0,0,0,.36,4.679c1.392,1.392,2.5,2.542,4.679.36S14.815,10.5,13.423,9.1Z"/></svg>',list:{bullet:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="6" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="6" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="6" x2="15" y1="14" y2="14"/><line class="ql-stroke" x1="3" x2="3" y1="4" y2="4"/><line class="ql-stroke" x1="3" x2="3" y1="9" y2="9"/><line class="ql-stroke" x1="3" x2="3" y1="14" y2="14"/></svg>',check:'<svg class="" viewbox="0 0 18 18"><line class="ql-stroke" x1="9" x2="15" y1="4" y2="4"/><polyline class="ql-stroke" points="3 4 4 5 6 3"/><line class="ql-stroke" x1="9" x2="15" y1="14" y2="14"/><polyline class="ql-stroke" points="3 14 4 15 6 13"/><line class="ql-stroke" x1="9" x2="15" y1="9" y2="9"/><polyline class="ql-stroke" points="3 9 4 10 6 8"/></svg>',ordered:'<svg viewbox="0 0 18 18"><line class="ql-stroke" x1="7" x2="15" y1="4" y2="4"/><line class="ql-stroke" x1="7" x2="15" y1="9" y2="9"/><line class="ql-stroke" x1="7" x2="15" y1="14" y2="14"/><line class="ql-stroke ql-thin" x1="2.5" x2="4.5" y1="5.5" y2="5.5"/><path class="ql-fill" d="M3.5,6A0.5,0.5,0,0,1,3,5.5V3.085l-0.276.138A0.5,0.5,0,0,1,2.053,3c-0.124-.247-0.023-0.324.224-0.447l1-.5A0.5,0.5,0,0,1,4,2.5v3A0.5,0.5,0,0,1,3.5,6Z"/><path class="ql-stroke ql-thin" d="M4.5,10.5h-2c0-.234,1.85-1.076,1.85-2.234A0.959,0.959,0,0,0,2.5,8.156"/><path class="ql-stroke ql-thin" d="M2.5,14.846a0.959,0.959,0,0,0,1.85-.109A0.7,0.7,0,0,0,3.75,14a0.688,0.688,0,0,0,.6-0.736,0.959,0.959,0,0,0-1.85-.109"/></svg>'},script:{sub:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,15H13.861a3.858,3.858,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.921,1.921,0,0,0,12.021,11.7a0.50013,0.50013,0,1,0,.957.291h0a0.914,0.914,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.076-1.16971,1.86982-1.93971,2.43082A1.45639,1.45639,0,0,0,12,15.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,15Z"/><path class="ql-fill" d="M9.65,5.241a1,1,0,0,0-1.409.108L6,7.964,3.759,5.349A1,1,0,0,0,2.192,6.59178Q2.21541,6.6213,2.241,6.649L4.684,9.5,2.241,12.35A1,1,0,0,0,3.71,13.70722q0.02557-.02768.049-0.05722L6,11.036,8.241,13.65a1,1,0,1,0,1.567-1.24277Q9.78459,12.3777,9.759,12.35L7.316,9.5,9.759,6.651A1,1,0,0,0,9.65,5.241Z"/></svg>',super:'<svg viewbox="0 0 18 18"><path class="ql-fill" d="M15.5,7H13.861a4.015,4.015,0,0,0,1.914-2.975,1.8,1.8,0,0,0-1.6-1.751A1.922,1.922,0,0,0,12.021,3.7a0.5,0.5,0,1,0,.957.291,0.917,0.917,0,0,1,1.053-.725,0.81,0.81,0,0,1,.744.762c0,1.077-1.164,1.925-1.934,2.486A1.423,1.423,0,0,0,12,7.5a0.5,0.5,0,0,0,.5.5h3A0.5,0.5,0,0,0,15.5,7Z"/><path class="ql-fill" d="M9.651,5.241a1,1,0,0,0-1.41.108L6,7.964,3.759,5.349a1,1,0,1,0-1.519,1.3L4.683,9.5,2.241,12.35a1,1,0,1,0,1.519,1.3L6,11.036,8.241,13.65a1,1,0,0,0,1.519-1.3L7.317,9.5,9.759,6.651A1,1,0,0,0,9.651,5.241Z"/></svg>'},strike:'<svg viewbox="0 0 18 18"><line class="ql-stroke ql-thin" x1="15.5" x2="2.5" y1="8.5" y2="9.5"/><path class="ql-fill" d="M9.007,8C6.542,7.791,6,7.519,6,6.5,6,5.792,7.283,5,9,5c1.571,0,2.765.679,2.969,1.309a1,1,0,0,0,1.9-.617C13.356,4.106,11.354,3,9,3,6.2,3,4,4.538,4,6.5a3.2,3.2,0,0,0,.5,1.843Z"/><path class="ql-fill" d="M8.984,10C11.457,10.208,12,10.479,12,11.5c0,0.708-1.283,1.5-3,1.5-1.571,0-2.765-.679-2.969-1.309a1,1,0,1,0-1.9.617C4.644,13.894,6.646,15,9,15c2.8,0,5-1.538,5-3.5a3.2,3.2,0,0,0-.5-1.843Z"/></svg>',table:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="2" width="3" x="5" y="5"/><rect class="ql-fill" height="2" width="4" x="9" y="5"/><g class="ql-fill ql-transparent"><rect height="2" width="3" x="5" y="8"/><rect height="2" width="4" x="9" y="8"/><rect height="2" width="3" x="5" y="11"/><rect height="2" width="4" x="9" y="11"/></g></svg>',underline:'<svg viewbox="0 0 18 18"><path class="ql-stroke" d="M5,3V9a4.012,4.012,0,0,0,4,4H9a4.012,4.012,0,0,0,4-4V3"/><rect class="ql-fill" height="1" rx="0.5" ry="0.5" width="12" x="3" y="15"/></svg>',video:'<svg viewbox="0 0 18 18"><rect class="ql-stroke" height="12" width="12" x="3" y="3"/><rect class="ql-fill" height="12" width="1" x="5" y="3"/><rect class="ql-fill" height="12" width="1" x="12" y="3"/><rect class="ql-fill" height="2" width="8" x="5" y="8"/><rect class="ql-fill" height="1" width="3" x="3" y="5"/><rect class="ql-fill" height="1" width="3" x="3" y="7"/><rect class="ql-fill" height="1" width="3" x="3" y="10"/><rect class="ql-fill" height="1" width="3" x="3" y="12"/><rect class="ql-fill" height="1" width="3" x="12" y="5"/><rect class="ql-fill" height="1" width="3" x="12" y="7"/><rect class="ql-fill" height="1" width="3" x="12" y="10"/><rect class="ql-fill" height="1" width="3" x="12" y="12"/></svg>'},Tn=0;function On(t,e){t.setAttribute(e,"".concat(!("true"===t.getAttribute(e))))}var Cn=function(){return m((function t(e){var n=this;p(this,t),this.select=e,this.container=document.createElement("span"),this.buildPicker(),this.select.style.display="none",this.select.parentNode.insertBefore(this.container,this.select),this.label.addEventListener("mousedown",(function(){n.togglePicker()})),this.label.addEventListener("keydown",(function(t){switch(t.key){case"Enter":n.togglePicker();break;case"Escape":n.escape(),t.preventDefault()}})),this.select.addEventListener("change",this.update.bind(this))}),[{key:"togglePicker",value:function(){this.container.classList.toggle("ql-expanded"),On(this.label,"aria-expanded"),On(this.options,"aria-hidden")}},{key:"buildItem",value:function(t){var e=this,n=document.createElement("span");n.tabIndex="0",n.setAttribute("role","button"),n.classList.add("ql-picker-item");var i=t.getAttribute("value");return i&&n.setAttribute("data-value",i),t.textContent&&n.setAttribute("data-label",t.textContent),n.addEventListener("click",(function(){e.selectItem(n,!0)})),n.addEventListener("keydown",(function(t){switch(t.key){case"Enter":e.selectItem(n,!0),t.preventDefault();break;case"Escape":e.escape(),t.preventDefault()}})),n}},{key:"buildLabel",value:function(){var t=document.createElement("span");return t.classList.add("ql-picker-label"),t.innerHTML='<svg viewbox="0 0 18 18"><polygon class="ql-stroke" points="7 11 9 13 11 11 7 11"/><polygon class="ql-stroke" points="7 7 9 5 11 7 7 7"/></svg>',t.tabIndex="0",t.setAttribute("role","button"),t.setAttribute("aria-expanded","false"),this.container.appendChild(t),t}},{key:"buildOptions",value:function(){var t=this,e=document.createElement("span");e.classList.add("ql-picker-options"),e.setAttribute("aria-hidden","true"),e.tabIndex="-1",e.id="ql-picker-options-".concat(Tn),Tn+=1,this.label.setAttribute("aria-controls",e.id),this.options=e,Array.from(this.select.options).forEach((function(n){var i=t.buildItem(n);e.appendChild(i),!0===n.selected&&t.selectItem(i)})),this.container.appendChild(e)}},{key:"buildPicker",value:function(){var t=this;Array.from(this.select.attributes).forEach((function(e){t.container.setAttribute(e.name,e.value)})),this.container.classList.add("ql-picker"),this.label=this.buildLabel(),this.buildOptions()}},{key:"escape",value:function(){var t=this;this.close(),setTimeout((function(){return t.label.focus()}),1)}},{key:"close",value:function(){this.container.classList.remove("ql-expanded"),this.label.setAttribute("aria-expanded","false"),this.options.setAttribute("aria-hidden","true")}},{key:"selectItem",value:function(t){var e=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=this.container.querySelector(".ql-selected");t!==n&&(null!=n&&n.classList.remove("ql-selected"),null!=t&&(t.classList.add("ql-selected"),this.select.selectedIndex=Array.from(t.parentNode.children).indexOf(t),t.hasAttribute("data-value")?this.label.setAttribute("data-value",t.getAttribute("data-value")):this.label.removeAttribute("data-value"),t.hasAttribute("data-label")?this.label.setAttribute("data-label",t.getAttribute("data-label")):this.label.removeAttribute("data-label"),e&&(this.select.dispatchEvent(new Event("change")),this.close())))}},{key:"update",value:function(){var t;if(this.select.selectedIndex>-1){var e=this.container.querySelector(".ql-picker-options").children[this.select.selectedIndex];t=this.select.options[this.select.selectedIndex],this.selectItem(e)}else this.selectItem(null);var n=null!=t&&t!==this.select.querySelector("option[selected]");this.label.classList.toggle("ql-active",n)}}])}(),Rn=function(t){function e(t,n){var i;return p(this,e),(i=b(this,e,[t])).label.innerHTML=n,i.container.classList.add("ql-color-picker"),Array.from(i.container.querySelectorAll(".ql-picker-item")).slice(0,7).forEach((function(t){t.classList.add("ql-primary")})),i}return E(e,t),m(e,[{key:"buildItem",value:function(t){var n=d(x(e.prototype),"buildItem",this).call(this,t);return n.style.backgroundColor=t.getAttribute("value")||"",n}},{key:"selectItem",value:function(t,n){d(x(e.prototype),"selectItem",this).call(this,t,n);var i=this.label.querySelector(".ql-color-label"),r=t&&t.getAttribute("data-value")||"";i&&("line"===i.tagName?i.style.stroke=r:i.style.fill=r)}}])}(Cn),In=function(t){function e(t,n){var i;return p(this,e),(i=b(this,e,[t])).container.classList.add("ql-icon-picker"),Array.from(i.container.querySelectorAll(".ql-picker-item")).forEach((function(t){t.innerHTML=n[t.getAttribute("data-value")||""]})),i.defaultItem=i.container.querySelector(".ql-selected"),i.selectItem(i.defaultItem),i}return E(e,t),m(e,[{key:"selectItem",value:function(t,n){d(x(e.prototype),"selectItem",this).call(this,t,n);var i=t||this.defaultItem;if(null!=i){if(this.label.innerHTML===i.innerHTML)return;this.label.innerHTML=i.innerHTML}}}])}(Cn),Mn=function(){return m((function t(e,n){var i,r,l=this;p(this,t),this.quill=e,this.boundsContainer=n||document.body,this.root=e.addContainer("ql-tooltip"),this.root.innerHTML=this.constructor.TEMPLATE,i=this.quill.root,"visible"!==(r=getComputedStyle(i,null).overflowY)&&"clip"!==r&&this.quill.root.addEventListener("scroll",(function(){l.root.style.marginTop="".concat(-1*l.quill.root.scrollTop,"px")})),this.hide()}),[{key:"hide",value:function(){this.root.classList.add("ql-hidden")}},{key:"position",value:function(t){var e=t.left+t.width/2-this.root.offsetWidth/2,n=t.bottom+this.quill.root.scrollTop;this.root.style.left="".concat(e,"px"),this.root.style.top="".concat(n,"px"),this.root.classList.remove("ql-flip");var i=this.boundsContainer.getBoundingClientRect(),r=this.root.getBoundingClientRect(),l=0;if(r.right>i.right&&(l=i.right-r.right,this.root.style.left="".concat(e+l,"px")),r.left<i.left&&(l=i.left-r.left,this.root.style.left="".concat(e+l,"px")),r.bottom>i.bottom){var o=r.bottom-r.top,s=t.bottom-t.top+o;this.root.style.top="".concat(n-s,"px"),this.root.classList.add("ql-flip")}return l}},{key:"show",value:function(){this.root.classList.remove("ql-editing"),this.root.classList.remove("ql-hidden")}}])}(),Dn=[!1,"center","right","justify"],Bn=["#000000","#e60000","#ff9900","#ffff00","#008a00","#0066cc","#9933ff","#ffffff","#facccc","#ffebcc","#ffffcc","#cce8cc","#cce0f5","#ebd6ff","#bbbbbb","#f06666","#ffc266","#ffff66","#66b966","#66a3e0","#c285ff","#888888","#a10000","#b26b00","#b2b200","#006100","#0047b2","#6b24b2","#444444","#5c0000","#663d00","#666600","#003700","#002966","#3d1466"],Un=[!1,"serif","monospace"],_n=["1","2","3",!1],Pn=["small",!1,"large","huge"],jn=function(t){function e(t,n){var i;p(this,e),i=b(this,e,[t,n]);return t.emitter.listenDOM("click",document.body,(function e(n){document.body.contains(t.root)?(null==i.tooltip||i.tooltip.root.contains(n.target)||document.activeElement===i.tooltip.textbox||i.quill.hasFocus()||i.tooltip.hide(),null!=i.pickers&&i.pickers.forEach((function(t){t.container.contains(n.target)||t.close()}))):document.body.removeEventListener("click",e)})),i}return E(e,t),m(e,[{key:"addModule",value:function(t){var n=d(x(e.prototype),"addModule",this).call(this,t);return"toolbar"===t&&this.extendToolbar(n),n}},{key:"buildButtons",value:function(t,e){Array.from(t).forEach((function(t){(t.getAttribute("class")||"").split(/\s+/).forEach((function(n){if(n.startsWith("ql-")&&(n=n.slice(3),null!=e[n]))if("direction"===n)t.innerHTML=e[n][""]+e[n].rtl;else if("string"==typeof e[n])t.innerHTML=e[n];else{var i=t.value||"";null!=i&&e[n][i]&&(t.innerHTML=e[n][i])}}))}))}},{key:"buildPickers",value:function(t,e){var n=this;this.pickers=Array.from(t).map((function(t){if(t.classList.contains("ql-align")&&(null==t.querySelector("option")&&Fn(t,Dn),"object"===i(e.align)))return new In(t,e.align);if(t.classList.contains("ql-background")||t.classList.contains("ql-color")){var n=t.classList.contains("ql-background")?"background":"color";return null==t.querySelector("option")&&Fn(t,Bn,"background"===n?"#ffffff":"#000000"),new Rn(t,e[n])}return null==t.querySelector("option")&&(t.classList.contains("ql-font")?Fn(t,Un):t.classList.contains("ql-header")?Fn(t,_n):t.classList.contains("ql-size")&&Fn(t,Pn)),new Cn(t)}));this.quill.on(lt.events.EDITOR_CHANGE,(function(){n.pickers.forEach((function(t){t.update()}))}))}}])}(xt);jn.DEFAULTS=H({},xt.DEFAULTS,{modules:{toolbar:{handlers:{formula:function(){this.quill.theme.tooltip.edit("formula")},image:function(){var t=this,e=this.container.querySelector("input.ql-image[type=file]");null==e&&((e=document.createElement("input")).setAttribute("type","file"),e.setAttribute("accept",this.quill.uploader.options.mimetypes.join(", ")),e.classList.add("ql-image"),e.addEventListener("change",(function(){var n=t.quill.getSelection(!0);t.quill.uploader.upload(n,e.files),e.value=""})),this.container.appendChild(e)),e.click()},video:function(){this.quill.theme.tooltip.edit("video")}}}}});var Hn=function(t){function e(t,n){var i;return p(this,e),(i=b(this,e,[t,n])).textbox=i.root.querySelector('input[type="text"]'),i.listen(),i}return E(e,t),m(e,[{key:"listen",value:function(){var t=this;this.textbox.addEventListener("keydown",(function(e){"Enter"===e.key?(t.save(),e.preventDefault()):"Escape"===e.key&&(t.cancel(),e.preventDefault())}))}},{key:"cancel",value:function(){this.hide(),this.restoreFocus()}},{key:"edit",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"link",e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;if(this.root.classList.remove("ql-hidden"),this.root.classList.add("ql-editing"),null!=this.textbox){null!=e?this.textbox.value=e:t!==this.root.getAttribute("data-mode")&&(this.textbox.value="");var n=this.quill.getBounds(this.quill.selection.savedRange);null!=n&&this.position(n),this.textbox.select(),this.textbox.setAttribute("placeholder",this.textbox.getAttribute("data-".concat(t))||""),this.root.setAttribute("data-mode",t)}}},{key:"restoreFocus",value:function(){this.quill.focus({preventScroll:!0})}},{key:"save",value:function(){var t=this.textbox.value;switch(this.root.getAttribute("data-mode")){case"link":var e=this.quill.root.scrollTop;this.linkRange?(this.quill.formatText(this.linkRange,"link",t,lt.sources.USER),delete this.linkRange):(this.restoreFocus(),this.quill.format("link",t,lt.sources.USER)),this.quill.root.scrollTop=e;break;case"video":t=function(t){var e=t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtube\.com\/watch.*v=([a-zA-Z0-9_-]+)/)||t.match(/^(?:(https?):\/\/)?(?:(?:www|m)\.)?youtu\.be\/([a-zA-Z0-9_-]+)/);if(e)return"".concat(e[1]||"https","://www.youtube.com/embed/").concat(e[2],"?showinfo=0");if(e=t.match(/^(?:(https?):\/\/)?(?:www\.)?vimeo\.com\/(\d+)/))return"".concat(e[1]||"https","://player.vimeo.com/video/").concat(e[2],"/");return t}(t);case"formula":if(!t)break;var n=this.quill.getSelection(!0);if(null!=n){var i=n.index+n.length;this.quill.insertEmbed(i,this.root.getAttribute("data-mode"),t,lt.sources.USER),"formula"===this.root.getAttribute("data-mode")&&this.quill.insertText(i+1," ",lt.sources.USER),this.quill.setSelection(i+2,lt.sources.USER)}}this.textbox.value="",this.hide()}}])}(Mn);function Fn(t,e){var n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];e.forEach((function(e){var i=document.createElement("option");e===n?i.setAttribute("selected","selected"):i.setAttribute("value",String(e)),t.appendChild(i)}))}var zn=[["bold","italic","link"],[{header:1},{header:2},"blockquote"]],Kn=function(t){function e(t,n){var i;return p(this,e),(i=b(this,e,[t,n])).quill.on(lt.events.EDITOR_CHANGE,(function(t,e,n,r){if(t===lt.events.SELECTION_CHANGE)if(null!=e&&e.length>0&&r===lt.sources.USER){i.show(),i.root.style.left="0px",i.root.style.width="",i.root.style.width="".concat(i.root.offsetWidth,"px");var l=i.quill.getLines(e.index,e.length);if(1===l.length){var o=i.quill.getBounds(e);null!=o&&i.position(o)}else{var s=l[l.length-1],a=i.quill.getIndex(s),u=Math.min(s.length()-1,e.index+e.length-a),c=i.quill.getBounds(new st(a,u));null!=c&&i.position(c)}}else document.activeElement!==i.textbox&&i.quill.hasFocus()&&i.hide()})),i}return E(e,t),m(e,[{key:"listen",value:function(){var t=this;d(x(e.prototype),"listen",this).call(this),this.root.querySelector(".ql-close").addEventListener("click",(function(){t.root.classList.remove("ql-editing")})),this.quill.on(lt.events.SCROLL_OPTIMIZE,(function(){setTimeout((function(){if(!t.root.classList.contains("ql-hidden")){var e=t.quill.getSelection();if(null!=e){var n=t.quill.getBounds(e);null!=n&&t.position(n)}}}),1)}))}},{key:"cancel",value:function(){this.show()}},{key:"position",value:function(t){var n=d(x(e.prototype),"position",this).call(this,t),i=this.root.querySelector(".ql-tooltip-arrow");return i.style.marginLeft="",0!==n&&(i.style.marginLeft="".concat(-1*n-i.offsetWidth/2,"px")),n}}])}(Hn);v(Kn,"TEMPLATE",['<span class="ql-tooltip-arrow"></span>','<div class="ql-tooltip-editor">','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-close"></a>',"</div>"].join(""));var Vn=function(t){function e(t,n){var i;return p(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=zn),(i=b(this,e,[t,n])).quill.container.classList.add("ql-bubble"),i}return E(e,t),m(e,[{key:"extendToolbar",value:function(t){this.tooltip=new Kn(this.quill,this.options.bounds),null!=t.container&&(this.tooltip.root.appendChild(t.container),this.buildButtons(t.container.querySelectorAll("button"),Ln),this.buildPickers(t.container.querySelectorAll("select"),Ln))}}])}(jn);Vn.DEFAULTS=H({},jn.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){t?this.quill.theme.tooltip.edit():this.quill.format("link",!1)}}}}});var Zn=[[{header:["1","2","3",!1]}],["bold","italic","underline","link"],[{list:"ordered"},{list:"bullet"}],["clean"]],Gn=function(t){function e(){var t;p(this,e);for(var n=arguments.length,i=new Array(n),r=0;r<n;r++)i[r]=arguments[r];return v(t=b(this,e,[].concat(i)),"preview",t.root.querySelector("a.ql-preview")),t}return E(e,t),m(e,[{key:"listen",value:function(){var t=this;d(x(e.prototype),"listen",this).call(this),this.root.querySelector("a.ql-action").addEventListener("click",(function(e){t.root.classList.contains("ql-editing")?t.save():t.edit("link",t.preview.textContent),e.preventDefault()})),this.root.querySelector("a.ql-remove").addEventListener("click",(function(e){if(null!=t.linkRange){var n=t.linkRange;t.restoreFocus(),t.quill.formatText(n,"link",!1,lt.sources.USER),delete t.linkRange}e.preventDefault(),t.hide()})),this.quill.on(lt.events.SELECTION_CHANGE,(function(e,n,i){if(null!=e){if(0===e.length&&i===lt.sources.USER){var r=o(t.quill.scroll.descendant(nn,e.index),2),l=r[0],s=r[1];if(null!=l){t.linkRange=new st(e.index-s,l.length());var a=nn.formats(l.domNode);t.preview.textContent=a,t.preview.setAttribute("href",a),t.show();var u=t.quill.getBounds(t.linkRange);return void(null!=u&&t.position(u))}}else delete t.linkRange;t.hide()}}))}},{key:"show",value:function(){d(x(e.prototype),"show",this).call(this),this.root.removeAttribute("data-mode")}}])}(Hn);v(Gn,"TEMPLATE",['<a class="ql-preview" rel="noopener noreferrer" target="_blank" href="about:blank"></a>','<input type="text" data-formula="e=mc^2" data-link="https://quilljs.com" data-video="Embed URL">','<a class="ql-action"></a>','<a class="ql-remove"></a>'].join(""));var Wn=function(t){function e(t,n){var i;return p(this,e),null!=n.modules.toolbar&&null==n.modules.toolbar.container&&(n.modules.toolbar.container=Zn),(i=b(this,e,[t,n])).quill.container.classList.add("ql-snow"),i}return E(e,t),m(e,[{key:"extendToolbar",value:function(t){null!=t.container&&(t.container.classList.add("ql-snow"),this.buildButtons(t.container.querySelectorAll("button"),Ln),this.buildPickers(t.container.querySelectorAll("select"),Ln),this.tooltip=new Gn(this.quill,this.options.bounds),t.container.querySelector(".ql-link")&&this.quill.keyboard.addBinding({key:"k",shortKey:!0},(function(e,n){t.handlers.link.call(t,!n.format.link)})))}}])}(jn);Wn.DEFAULTS=H({},jn.DEFAULTS,{modules:{toolbar:{handlers:{link:function(t){if(t){var e=this.quill.getSelection();if(null==e||0===e.length)return;var n=this.quill.getText(e);/^\S+@\S+\.\S+$/.test(n)&&0!==n.indexOf("mailto:")&&(n="mailto:".concat(n)),this.quill.theme.tooltip.edit("link",n)}else this.quill.format("link",!1)}}}}}),Tt.register({"attributors/attribute/direction":ee,"attributors/class/align":Kt,"attributors/class/background":$t,"attributors/class/color":Gt,"attributors/class/direction":ne,"attributors/class/font":le,"attributors/class/size":ae,"attributors/style/align":Vt,"attributors/style/background":Xt,"attributors/style/color":Wt,"attributors/style/direction":ie,"attributors/style/font":se,"attributors/style/size":ue},!0),Tt.register({"formats/align":Kt,"formats/direction":ne,"formats/indent":$e,"formats/background":Xt,"formats/color":Wt,"formats/font":le,"formats/size":ae,"formats/blockquote":Xe,"formats/code-block":Yt,"formats/header":Qe,"formats/list":Je,"formats/bold":tn,"formats/code":Jt,"formats/italic":en,"formats/link":nn,"formats/script":ln,"formats/strike":on,"formats/underline":sn,"formats/formula":an,"formats/image":cn,"formats/video":fn,"modules/syntax":mn,"modules/table":En,"modules/toolbar":wn,"themes/bubble":Vn,"themes/snow":Wn,"ui/icons":Ln,"ui/picker":Cn,"ui/icon-picker":In,"ui/color-picker":Rn,"ui/tooltip":Mn},!0)}}}))}();
//# sourceMappingURL=quill-legacy-BweLYUg9.js.map
